!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("swQ requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function s(e){var t=e.length,s=J.type(e);return"function"!==s&&!J.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===s||0===t||"number"==typeof t&&t>0&&t-1 in e))}function n(e,t,s){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==s});if(t.nodeType)return J.grep(e,function(e){return e===t!==s});if("string"==typeof t){if(re.test(t))return J.filter(t,e,s);t=J.filter(t,e)}return J.grep(e,function(e){return K.call(t,e)>=0!==s})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return J.each(e.match(ue)||[],function(e,s){t[s]=!0}),t}function r(){Y.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),J.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+Math.random()}function l(e,t,s){var n;if(void 0===s&&1===e.nodeType)if(n="data-"+t.replace(ve,"-$1").toLowerCase(),"string"==typeof(s=e.getAttribute(n))){try{s="true"===s||"false"!==s&&("null"===s?null:+s+""===s?+s:we.test(s)?J.parseJSON(s):s)}catch(e){}me.set(e,t,s)}else s=void 0;return s}function c(){return!0}function d(){return!1}function u(){try{return Y.activeElement}catch(e){}}function h(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function g(e){var t=Re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var s=0,n=e.length;n>s;s++)fe.set(e[s],"globalEval",!t||fe.get(t[s],"globalEval"))}function m(e,t){var s,n,i,o,r,a,l,c;if(1===t.nodeType){if(fe.hasData(e)&&(o=fe.access(e),r=fe.set(t,o),c=o.events)){delete r.handle,r.events={};for(i in c)for(s=0,n=c[i].length;n>s;s++)J.event.add(t,i,c[i][s])}me.hasData(e)&&(a=me.access(e),l=J.extend({},a),me.set(t,l))}}function w(e,t){var s=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],s):s}function v(e,t){var s=t.nodeName.toLowerCase();"input"===s&&xe.test(e.type)?t.checked=e.checked:("input"===s||"textarea"===s)&&(t.defaultValue=e.defaultValue)}function b(t,s){var n,i=J(s.createElement(t)).appendTo(s.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(i[0]))?n.display:J.css(i[0],"display");return i.detach(),o}function y(e){var t=Y,s=Le[e];return s||("none"!==(s=b(e,t))&&s||(Fe=(Fe||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),(t=Fe[0].contentDocument).write(),t.close(),s=b(e,t),Fe.detach()),Le[e]=s),s}function k(e,t,s){var n,i,o,r,a=e.style;return(s=s||Ue(e))&&(r=s.getPropertyValue(t)||s[t]),s&&(""!==r||J.contains(e.ownerDocument,e)||(r=J.style(e,t)),je.test(r)&&He.test(t)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=s.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0!==r?r+"":r}function x(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var s=t[0].toUpperCase()+t.slice(1),n=t,i=Ve.length;i--;)if((t=Ve[i]+s)in e)return t;return n}function C(e,t,s){var n=qe.exec(t);return n?Math.max(0,n[1]-(s||0))+(n[2]||"px"):t}function _(e,t,s,n,i){for(var o=s===(n?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===s&&(r+=J.css(e,s+ye[o],!0,i)),n?("content"===s&&(r-=J.css(e,"padding"+ye[o],!0,i)),"margin"!==s&&(r-=J.css(e,"border"+ye[o]+"Width",!0,i))):(r+=J.css(e,"padding"+ye[o],!0,i),"padding"!==s&&(r+=J.css(e,"border"+ye[o]+"Width",!0,i)));return r}function S(e,t,s){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ue(e),r="border-box"===J.css(e,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=k(e,t,o))||null==i)&&(i=e.style[t]),je.test(i))return i;n=r&&(X.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+_(e,t,s||(r?"border":"content"),n,o)+"px"}function D(e,t){for(var s,n,i,o=[],r=0,a=e.length;a>r;r++)(n=e[r]).style&&(o[r]=fe.get(n,"olddisplay"),s=n.style.display,t?(o[r]||"none"!==s||(n.style.display=""),""===n.style.display&&ke(n)&&(o[r]=fe.access(n,"olddisplay",y(n.nodeName)))):(i=ke(n),"none"===s&&i||fe.set(n,"olddisplay",i?s:J.css(n,"display"))));for(r=0;a>r;r++)(n=e[r]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[r]||"":"none"));return e}function O(e,t,s,n,i){return new O.prototype.init(e,t,s,n,i)}function E(){return setTimeout(function(){Ge=void 0}),Ge=J.now()}function I(e,t){var s,n=0,i={height:e};for(t=t?1:0;4>n;n+=2-t)s=ye[n],i["margin"+s]=i["padding"+s]=e;return t&&(i.opacity=i.width=e),i}function M(e,t,s){for(var n,i=(et[t]||[]).concat(et["*"]),o=0,r=i.length;r>o;o++)if(n=i[o].call(s,t,e))return n}function P(e,t){var s,n,i,o,r;for(s in e)if(n=J.camelCase(s),i=t[n],o=e[s],J.isArray(o)&&(i=o[1],o=e[s]=o[0]),s!==n&&(e[n]=o,delete e[s]),(r=J.cssHooks[n])&&"expand"in r){o=r.expand(o),delete e[n];for(s in o)s in e||(e[s]=o[s],t[s]=i)}else t[n]=i}function A(e,t,s){var n,i,o=0,r=Ze.length,a=J.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Ge||E(),s=Math.max(0,c.startTime+c.duration-t),n=1-(s/c.duration||0),o=0,r=c.tweens.length;r>o;o++)c.tweens[o].run(n);return a.notifyWith(e,[c,n,s]),1>n&&r?s:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},s),originalProperties:t,originalOptions:s,startTime:Ge||E(),duration:s.duration,tweens:[],createTween:function(t,s){var n=J.Tween(e,c.opts,t,s,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var s=0,n=t?c.tweens.length:0;if(i)return this;for(i=!0;n>s;s++)c.tweens[s].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),d=c.props;for(P(d,c.opts.specialEasing);r>o;o++)if(n=Ze[o].call(c,e,d,c.opts))return n;return J.map(d,M,c),J.isFunction(c.opts.start)&&c.opts.start.call(e,c),J.fx.timer(J.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(e){return function(t,s){"string"!=typeof t&&(s=t,t="*");var n,i=0,o=t.toLowerCase().match(ue)||[];if(J.isFunction(s))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(s)):(e[n]=e[n]||[]).push(s)}}function N(e,t,s,n){function i(a){var l;return o[a]=!0,J.each(e[a]||[],function(e,a){var c=a(t,s,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},r=e===vt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function B(e,t){var s,n,i=J.ajaxSettings.flatOptions||{};for(s in t)void 0!==t[s]&&((i[s]?e:n||(n={}))[s]=t[s]);return n&&J.extend(!0,e,n),e}function F(e,t,s){for(var n,i,o,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){l.unshift(i);break}if(l[0]in s)o=l[0];else{for(i in s){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}r||(r=i)}o=o||r}return o?(o!==l[0]&&l.unshift(o),s[o]):void 0}function L(e,t,s,n){var i,o,r,a,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=d.shift();o;)if(e.responseFields[o]&&(s[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=c[l+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[i]:!0!==c[i]&&(o=a[0],d.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function H(e,t,s,n){var i;if(J.isArray(t))J.each(t,function(t,i){s||kt.test(e)?n(e,i):H(e+"["+("object"==typeof i?t:"")+"]",i,s,n)});else if(s||"object"!==J.type(t))n(e,t);else for(i in t)H(e+"["+i+"]",t[i],s,n)}function j(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],z=U.slice,q=U.concat,W=U.push,K=U.indexOf,$={},V=$.toString,G=$.hasOwnProperty,X={},Y=e.document,Q="2.1.1",J=function(e,t){return new J.fn.init(e,t)},Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,te=/-([\da-z])/gi,se=function(e,t){return t.toUpperCase()};J.fn=J.prototype={swq:Q,constructor:J,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,s){return e.call(t,s,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,s=+e+(0>e?t:0);return this.pushStack(s>=0&&t>s?[this[s]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:U.sort,splice:U.splice},J.extend=J.fn.extend=function(){var e,t,s,n,i,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||J.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)s=r[t],n=e[t],r!==n&&(c&&n&&(J.isPlainObject(n)||(i=J.isArray(n)))?(i?(i=!1,o=s&&J.isArray(s)?s:[]):o=s&&J.isPlainObject(s)?s:{},r[t]=J.extend(c,o,n)):void 0!==n&&(r[t]=n));return r},J.extend({expando:"swQ"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===J.type(e)&&!e.nodeType&&!J.isWindow(e)&&!(e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[V.call(e)]||"object":typeof e},globalEval:function(e){var t,s=eval;(e=J.trim(e))&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):s(e))},camelCase:function(e){return e.replace(ee,"ms-").replace(te,se)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,o=e.length,r=s(e);if(n){if(r)for(;o>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(r)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Z,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?J.merge(n,"string"==typeof e?[e]:e):W.call(n,e)),n},inArray:function(e,t,s){return null==t?-1:K.call(t,e,s)},merge:function(e,t){for(var s=+t.length,n=0,i=e.length;s>n;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,s){for(var n=[],i=0,o=e.length,r=!s;o>i;i++)!t(e[i],i)!==r&&n.push(e[i]);return n},map:function(e,t,n){var i,o=0,r=e.length,a=[];if(s(e))for(;r>o;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return q.apply([],a)},guid:1,proxy:function(e,t){var s,n,i;return"string"==typeof t&&(s=e[t],t=e,e=s),J.isFunction(e)?(n=z.call(arguments,2),i=function(){return e.apply(t||this,n.concat(z.call(arguments)))},i.guid=e.guid=e.guid||J.guid++,i):void 0},now:Date.now,support:X}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});var ne=function(e){function t(e,t,s,n){var i,o,r,a,c,u,h,p,g,f;if((t?t.ownerDocument||t:L)!==I&&E(t),t=t||I,s=s||[],!e||"string"!=typeof e)return s;if(1!==(a=t.nodeType)&&9!==a)return[];if(P&&!n){if(i=me.exec(e))if(r=i[1]){if(9===a){if(!(o=t.getElementById(r))||!o.parentNode)return s;if(o.id===r)return s.push(o),s}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&B(t,o)&&o.id===r)return s.push(o),s}else{if(i[2])return Q.apply(s,t.getElementsByTagName(e)),s;if((r=i[3])&&b.getElementsByClassName&&t.getElementsByClassName&&-1!=t.getElementsByClassName.toString().indexOf("native code"))return Q.apply(s,t.getElementsByClassName(r)),s}if(b.qsa&&(!A||!A.test(e))){if(p=h=F,g=t,f=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=T(e),(h=t.getAttribute("id"))?p=h.replace(ve,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",c=u.length;c--;)u[c]=p+d(u[c]);g=we.test(e)&&l(t.parentNode)||t,f=u.join(",")}if(f)try{return Q.apply(s,g.querySelectorAll(f)),s}catch(e){}finally{h||t.removeAttribute("id")}}}return _(e.replace(re,"$1"),t,s,n)}function s(){function e(s,n){return t.push(s+" ")>y.cacheLength&&delete e[t.shift()],e[s+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function i(e){var t=I.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var s=e.split("|"),n=e.length;n--;)y.attrHandle[s[n]]=t}function r(e,t){var s=t&&e,n=s&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||$)-(~e.sourceIndex||$);if(n)return n;if(s)for(;s=s.nextSibling;)if(s===t)return-1;return e?1:-1}function a(e){return n(function(t){return t=+t,n(function(s,n){for(var i,o=e([],s.length,t),r=o.length;r--;)s[i=o[r]]&&(s[i]=!(n[i]=s[i]))})})}function l(e){return e&&typeof e.getElementsByTagName!==K&&e}function c(){}function d(e){for(var t=0,s=e.length,n="";s>t;t++)n+=e[t].value;return n}function u(e,t,s){var n=t.dir,i=s&&"parentNode"===n,o=j++;return t.first?function(t,s,o){for(;t=t[n];)if(1===t.nodeType||i)return e(t,s,o)}:function(t,s,r){var a,l,c=[H,o];if(r){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,s,r))return!0}else for(;t=t[n];)if(1===t.nodeType||i){if(l=t[F]||(t[F]={}),(a=l[n])&&a[0]===H&&a[1]===o)return c[2]=a[2];if(l[n]=c,c[2]=e(t,s,r))return!0}}}function h(e){return e.length>1?function(t,s,n){for(var i=e.length;i--;)if(!e[i](t,s,n))return!1;return!0}:e[0]}function p(e,s,n){for(var i=0,o=s.length;o>i;i++)t(e,s[i],n);return n}function g(e,t,s,n,i){for(var o,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!s||s(o,n,i))&&(r.push(o),c&&t.push(a));return r}function f(e,t,s,i,o,r){return i&&!i[F]&&(i=f(i)),o&&!o[F]&&(o=f(o,r)),n(function(n,r,a,l){var c,d,u,h=[],f=[],m=r.length,w=n||p(t||"*",a.nodeType?[a]:a,[]),v=!e||!n&&t?w:g(w,h,e,a,l),b=s?o||(n?e:m||i)?[]:r:v;if(s&&s(v,b,a,l),i)for(c=g(b,f),i(c,[],a,l),d=c.length;d--;)(u=c[d])&&(b[f[d]]=!(v[f[d]]=u));if(n){if(o||e){if(o){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(v[d]=u);o(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=o?Z.call(n,u):h[d])>-1&&(n[c]=!(r[c]=u))}}else b=g(b===r?b.splice(m,b.length):b),o?o(null,r,b,l):Q.apply(r,b)})}function m(e){for(var t,s,n,i=e.length,o=y.relative[e[0].type],r=o||y.relative[" "],a=o?1:0,l=u(function(e){return e===t},r,!0),c=u(function(e){return Z.call(t,e)>-1},r,!0),p=[function(e,s,n){return!o&&(n||s!==S)||((t=s).nodeType?l(e,s,n):c(e,s,n))}];i>a;a++)if(s=y.relative[e[a].type])p=[u(h(p),s)];else{if((s=y.filter[e[a].type].apply(null,e[a].matches))[F]){for(n=++a;i>n&&!y.relative[e[n].type];n++);return f(a>1&&h(p),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(re,"$1"),s,n>a&&m(e.slice(a,n)),i>n&&m(e=e.slice(n)),i>n&&d(e))}p.push(s)}return h(p)}function w(e,s){var i=s.length>0,o=e.length>0,r=function(n,r,a,l,c){var d,u,h,p=0,f="0",m=n&&[],w=[],v=S,b=n||o&&y.find.TAG("*",c),k=H+=null==v?1:Math.random()||.1,x=b.length;for(c&&(S=r!==I&&r);f!==x&&null!=(d=b[f]);f++){if(o&&d){for(u=0;h=e[u++];)if(h(d,r,a)){l.push(d);break}c&&(H=k)}i&&((d=!h&&d)&&p--,n&&m.push(d))}if(p+=f,i&&f!==p){for(u=0;h=s[u++];)h(m,w,r,a);if(n){if(p>0)for(;f--;)m[f]||w[f]||(w[f]=X.call(l));w=g(w)}Q.apply(l,w),c&&!n&&w.length>0&&p+s.length>1&&t.uniqueSort(l)}return c&&(H=k,S=v),m};return i?n(r):r}var v,b,y,k,x,T,C,_,S,D,O,E,I,M,P,A,R,N,B,F="sizzle"+-new Date,L=e.document,H=0,j=0,U=s(),z=s(),q=s(),W=function(e,t){return e===t&&(O=!0),0},K="undefined",$=1<<31,V={}.hasOwnProperty,G=[],X=G.pop,Y=G.push,Q=G.push,J=G.slice,Z=G.indexOf||function(e){for(var t=0,s=this.length;s>t;t++)if(this[t]===e)return t;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=se.replace("w","w#"),ie="\\["+te+"*("+se+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+te+"*\\]",oe=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",re=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),ae=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ce=new RegExp("="+te+"*([^\\]'\"]*?)"+te+"*\\]","g"),de=new RegExp(oe),ue=new RegExp("^"+ne+"$"),he={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/[+~]/,ve=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),ye=function(e,t,s){var n="0x"+t-65536;return n!==n||s?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(G=J.call(L.childNodes),L.childNodes),G[L.childNodes.length].nodeType}catch(e){Q={apply:G.length?function(e,t){Y.apply(e,J.call(t))}:function(e,t){for(var s=e.length,n=0;e[s++]=t[n++];);e.length=s-1}}}b=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},E=t.setDocument=function(e){var t,s=e?e.ownerDocument||e:L,n=s.defaultView;return s!==I&&9===s.nodeType&&s.documentElement?(I=s,M=s.documentElement,P=!x(s),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){E()},!1):n.attachEvent&&n.attachEvent("onunload",function(){E()})),b.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=i(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=fe.test(s.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),b.getById=i(function(e){return M.appendChild(e).id=F,!s.getElementsByName||!s.getElementsByName(F).length}),b.getById?(y.find.ID=function(e,t){if(typeof t.getElementById!==K&&P){var s=t.getElementById(e);return s&&s.parentNode?[s]:[]}},y.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(delete y.find.ID,y.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var s=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return s&&s.value===t}}),y.find.TAG=b.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var s,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;s=o[i++];)1===s.nodeType&&n.push(s);return n}return o},y.find.CLASS=b.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&P?t.getElementsByClassName(e):void 0},R=[],A=[],(b.qsa=fe.test(s.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&A.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll(":checked").length||A.push(":checked")}),i(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+te+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(b.matchesSelector=fe.test(N=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){b.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),R.push("!=",oe)}),A=A.length&&new RegExp(A.join("|")),R=R.length&&new RegExp(R.join("|")),t=fe.test(M.compareDocumentPosition),B=t||fe.test(M.contains)?function(e,t){var s=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(s.contains?s.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!b.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===L&&B(L,e)?-1:t===s||t.ownerDocument===L&&B(L,t)?1:D?Z.call(D,e)-Z.call(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!o||!a)return e===s?-1:t===s?1:o?-1:a?1:D?Z.call(D,e)-Z.call(D,t):0;if(o===a)return r(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?r(l[i],c[i]):l[i]===L?-1:c[i]===L?1:0},s):I},t.matches=function(e,s){return t(e,null,null,s)},t.matchesSelector=function(e,s){if((e.ownerDocument||e)!==I&&E(e),s=s.replace(ce,"='$1']"),!(!b.matchesSelector||!P||R&&R.test(s)||A&&A.test(s)))try{var n=N.call(e,s);if(n||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(s,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&E(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&E(e);var s=y.attrHandle[t.toLowerCase()],n=s&&V.call(y.attrHandle,t.toLowerCase())?s(e,t,!P):void 0;return void 0!==n?n:b.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,s=[],n=0,i=0;if(O=!b.detectDuplicates,D=!b.sortStable&&e.slice(0),e.sort(W),O){for(;t=e[i++];)t===e[i]&&(n=s.push(i));for(;n--;)e.splice(s[n],1)}return D=null,e},k=t.getText=function(e){var t,s="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)s+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)s+=k(t);return s},(y=t.selectors={cacheLength:50,createPseudo:n,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,s=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":s&&de.test(s)&&(t=T(s,!0))&&(t=s.indexOf(")",s.length-t)-s.length)&&(e[0]=e[0].slice(0,t),e[2]=s.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,s,n){return function(i){var o=t.attr(i,e);return null==o?"!="===s:!s||(o+="","="===s?o===n:"!="===s?o!==n:"^="===s?n&&0===o.indexOf(n):"*="===s?n&&o.indexOf(n)>-1:"$="===s?n&&o.slice(-n.length)===n:"~="===s?(" "+o+" ").indexOf(n)>-1:"|="===s&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,s,n,i){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,s,l){var c,d,u,h,p,g,f=o!==r?"nextSibling":"previousSibling",m=t.parentNode,w=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(m){if(o){for(;f;){for(u=t;u=u[f];)if(a?u.nodeName.toLowerCase()===w:1===u.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[r?m.firstChild:m.lastChild],r&&v){for(p=(c=(d=m[F]||(m[F]={}))[e]||[])[0]===H&&c[1],h=c[0]===H&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[f]||(h=p=0)||g.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[H,p,h];break}}else if(v&&(c=(t[F]||(t[F]={}))[e])&&c[0]===H)h=c[1];else for(;(u=++p&&u&&u[f]||(h=p=0)||g.pop())&&((a?u.nodeName.toLowerCase()!==w:1!==u.nodeType)||!++h||(v&&((u[F]||(u[F]={}))[e]=[H,h]),u!==t)););return(h-=i)===n||h%n==0&&h/n>=0}}},PSEUDO:function(e,s){var i,o=y.pseudos[e]||y.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(s):o.length>1?(i=[e,e,"",s],y.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,i=o(e,s),r=i.length;r--;)n=Z.call(e,i[r]),e[n]=!(t[n]=i[r])}):function(e){return o(e,0,i)}):o}},pseudos:{not:n(function(e){var t=[],s=[],i=C(e.replace(re,"$1"));return i[F]?n(function(e,t,s,n){for(var o,r=i(e,null,n,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,s),!s.pop()}}),has:n(function(e){return function(s){return t(e,s).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var s;do{if(s=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(s=s.toLowerCase())===e||0===s.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var s=e.location&&e.location.hash;return s&&s.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,s){return[0>s?s+t:s]}),even:a(function(e,t){for(var s=0;t>s;s+=2)e.push(s);return e}),odd:a(function(e,t){for(var s=1;t>s;s+=2)e.push(s);return e}),lt:a(function(e,t,s){for(var n=0>s?s+t:s;--n>=0;)e.push(n);return e}),gt:a(function(e,t,s){for(var n=0>s?s+t:s;++n<t;)e.push(n);return e})}}).pseudos.nth=y.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})y.pseudos[v]=function(e){return function(t){var s=t.nodeName.toLowerCase();return("input"===s||"button"===s)&&t.type===e}}(v);return c.prototype=y.filters=y.pseudos,y.setFilters=new c,T=t.tokenize=function(e,s){var n,i,o,r,a,l,c,d=z[e+" "];if(d)return s?0:d.slice(0);for(a=e,l=[],c=y.preFilter;a;){(!n||(i=ae.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=le.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(re," ")}),a=a.slice(n.length));for(r in y.filter)!(i=he[r].exec(a))||c[r]&&!(i=c[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return s?a.length:a?t.error(e):z(e,l).slice(0)},C=t.compile=function(e,t){var s,n=[],i=[],o=q[e+" "];if(!o){for(t||(t=T(e)),s=t.length;s--;)(o=m(t[s]))[F]?n.push(o):i.push(o);(o=q(e,w(i,n))).selector=e}return o},_=t.select=function(e,t,s,n){var i,o,r,a,c,u="function"==typeof e&&e,h=!n&&T(e=u.selector||e);if(s=s||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(r=o[0]).type&&b.getById&&9===t.nodeType&&P&&y.relative[o[1].type]){if(!(t=(y.find.ID(r.matches[0].replace(be,ye),t)||[])[0]))return s;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(r=o[i],!y.relative[a=r.type]);)if((c=y.find[a])&&(n=c(r.matches[0].replace(be,ye),we.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(i,1),!(e=n.length&&d(o)))return Q.apply(s,n),s;break}}return(u||C(e,h))(n,t,!P,s,we.test(e)&&l(t.parentNode)||t),s},b.sortStable=F.split("").sort(W).join("")===F,b.detectDuplicates=!!O,E(),b.sortDetached=i(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,s){return s?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,s){return s||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ee,function(e,t,s){var n;return s?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);J.find=ne,J.expr=ne.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ne.uniqueSort,J.text=ne.getText,J.isXMLDoc=ne.isXML,J.contains=ne.contains;var ie=J.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,re=/^.[^:#\[\.,]*$/;J.filter=function(e,t,s){var n=t[0];return s&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,s=this.length,n=[],i=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;s>t;t++)if(J.contains(i[t],this))return!0}));for(t=0;s>t;t++)J.find(e,i[t],n);return n=this.pushStack(s>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ie.test(e)?J(e):e||[],!1).length}});var ae,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(J.fn.init=function(e,t){var s,n;if(!e)return this;if("string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e))||!s[1]&&t)return!t||t.swq?(t||ae).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:Y,!0)),oe.test(s[1])&&J.isPlainObject(t))for(s in t)J.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(n=Y.getElementById(s[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?void 0!==ae.ready?ae.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))}).prototype=J.fn,ae=J(Y);var ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,s){for(var n=[],i=void 0!==s;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&J(e).is(s))break;n.push(e)}return n},sibling:function(e,t){for(var s=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&s.push(e);return s}}),J.fn.extend({has:function(e){var t=J(e,this),s=t.length;return this.filter(function(){for(var e=0;s>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var s,n=0,i=this.length,o=[],r=ie.test(e)||"string"!=typeof e?J(e,t||this.context):0;i>n;n++)for(s=this[n];s&&s!==t;s=s.parentNode)if(s.nodeType<11&&(r?r.index(s)>-1:1===s.nodeType&&J.find.matchesSelector(s,e))){o.push(s);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(e){return e?"string"==typeof e?K.call(J(e),this[0]):K.call(this,e.swq?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,s){return J.dir(e,"parentNode",s)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,s){return J.dir(e,"nextSibling",s)},prevUntil:function(e,t,s){return J.dir(e,"previousSibling",s)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(s,n){var i=J.map(this,t,s);return"Until"!==e.slice(-5)&&(n=s),n&&"string"==typeof n&&(i=J.filter(n,i)),this.length>1&&(de[e]||J.unique(i),ce.test(e)&&i.reverse()),this.pushStack(i)}});var ue=/\S+/g,he={};J.Callbacks=function(e){var t,s,n,i,r,a,l=[],c=!(e="string"==typeof e?he[e]||o(e):J.extend({},e)).once&&[],d=function(o){for(t=e.memory&&o,s=!0,a=i||0,i=0,r=l.length,n=!0;l&&r>a;a++)if(!1===l[a].apply(o[0],o[1])&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):t?l=[]:u.disable())},u={add:function(){if(l){var s=l.length;!function t(s){J.each(s,function(s,n){var i=J.type(n);"function"===i?e.unique&&u.has(n)||l.push(n):n&&n.length&&"string"!==i&&t(n)})}(arguments),n?r=l.length:t&&(i=s,d(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var s;(s=J.inArray(t,l,s))>-1;)l.splice(s,1),n&&(r>=s&&r--,a>=s&&a--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||u.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||s&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],s="pending",n={state:function(){return s},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(s){J.each(t,function(t,o){var r=J.isFunction(e[t])&&e[t];i[o[1]](function(){var e=r&&r.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(s.resolve).fail(s.reject).progress(s.notify):s[o[0]+"With"](this===n?s.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},i={};return n.pipe=n.then,J.each(t,function(e,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){s=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=r.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,s,n,i=0,o=z.call(arguments),r=o.length,a=1!==r||e&&J.isFunction(e.promise)?r:0,l=1===a?e:J.Deferred(),c=function(e,s,n){return function(i){s[e]=this,n[e]=arguments.length>1?z.call(arguments):i,n===t?l.notifyWith(s,n):--a||l.resolveWith(s,n)}};if(r>1)for(t=new Array(r),s=new Array(r),n=new Array(r);r>i;i++)o[i]&&J.isFunction(o[i].promise)?o[i].promise().done(c(i,n,o)).fail(l.reject).progress(c(i,s,t)):--a;return a||l.resolveWith(n,o),l.promise()}});var pe;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(!0===e?--J.readyWait:J.isReady)||(J.isReady=!0,!0!==e&&--J.readyWait>0||(pe.resolveWith(Y,[J]),J.fn.triggerHandler&&(J(Y).triggerHandler("ready"),J(Y).off("ready"))))}}),J.ready.promise=function(t){return pe||(pe=J.Deferred(),"complete"===Y.readyState?setTimeout(J.ready):(Y.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))),pe.promise(t)},J.ready.promise();var ge=J.access=function(e,t,s,n,i,o,r){var a=0,l=e.length,c=null==s;if("object"===J.type(s)){i=!0;for(a in s)J.access(e,t,a,s[a],!0,o,r)}else if(void 0!==n&&(i=!0,J.isFunction(n)||(r=!0),c&&(r?(t.call(e,n),t=null):(c=t,t=function(e,t,s){return c.call(J(e),s)})),t))for(;l>a;a++)t(e[a],s,r?n:n.call(e[a],a,t(e[a],s)));return i?e:c?t.call(e):l?t(e[0],s):o};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=J.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},s=e[this.expando];if(!s){s=a.uid++;try{t[this.expando]={value:s},Object.defineProperties(e,t)}catch(n){t[this.expando]=s,J.extend(e,t)}}return this.cache[s]||(this.cache[s]={}),s},set:function(e,t,s){var n,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=s;else if(J.isEmptyObject(o))J.extend(this.cache[i],t);else for(n in t)o[n]=t[n];return o},get:function(e,t){var s=this.cache[this.key(e)];return void 0===t?s:s[t]},access:function(e,t,s){var n;return void 0===t||t&&"string"==typeof t&&void 0===s?void 0!==(n=this.get(e,t))?n:this.get(e,J.camelCase(t)):(this.set(e,t,s),void 0!==s?s:t)},remove:function(e,t){var s,n,i,o=this.key(e),r=this.cache[o];if(void 0===t)this.cache[o]={};else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(i=J.camelCase(t),t in r?n=[t,i]:(n=i,n=n in r?[n]:n.match(ue)||[])),s=n.length;for(;s--;)delete r[n[s]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var fe=new a,me=new a,we=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ve=/([A-Z])/g;J.extend({hasData:function(e){return me.hasData(e)||fe.hasData(e)},data:function(e,t,s){return me.access(e,t,s)},removeData:function(e,t){me.remove(e,t)},_data:function(e,t,s){return fe.access(e,t,s)},_removeData:function(e,t){fe.remove(e,t)}}),J.fn.extend({data:function(e,t){var s,n,i,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(i=me.get(o),1===o.nodeType&&!fe.get(o,"hasDataAttrs"))){for(s=r.length;s--;)r[s]&&0===(n=r[s].name).indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(o,n,i[n]));fe.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){me.set(this,e)}):ge(this,function(t){var s,n=J.camelCase(e);if(o&&void 0===t){if(void 0!==(s=me.get(o,e)))return s;if(void 0!==(s=me.get(o,n)))return s;if(void 0!==(s=l(o,n,void 0)))return s}else this.each(function(){var s=me.get(this,n);me.set(this,n,t),-1!==e.indexOf("-")&&void 0!==s&&me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){me.remove(this,e)})}}),J.extend({queue:function(e,t,s){var n;return e?(t=(t||"fx")+"queue",n=fe.get(e,t),s&&(!n||J.isArray(s)?n=fe.access(e,t,J.makeArray(s)):n.push(s)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var s=J.queue(e,t),n=s.length,i=s.shift(),o=J._queueHooks(e,t);"inprogress"===i&&(i=s.shift(),n--),i&&("fx"===t&&s.unshift("inprogress"),delete o.stop,i.call(e,function(){J.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var s=t+"queueHooks";return fe.get(e,s)||fe.access(e,s,{empty:J.Callbacks("once memory").add(function(){fe.remove(e,[t+"queue",s])})})}}),J.fn.extend({queue:function(e,t){var s=2;return"string"!=typeof e&&(t=e,e="fx",s--),arguments.length<s?J.queue(this[0],e):void 0===t?this:this.each(function(){var s=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==s[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var s,n=1,i=J.Deferred(),o=this,r=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(s=fe.get(o[r],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(a));return a(),i.promise(t)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ye=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},xe=/^(?:checkbox|radio)$/i;!function(){var e=Y.createDocumentFragment().appendChild(Y.createElement("div")),t=Y.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),X.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";X.focusinBubbles="onfocusin"in e;var Ce=/^key/,_e=/^(?:mouse|pointer|contextmenu)|click/,Se=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,s,n,i){var o,r,a,l,c,d,u,h,p,g,f,m=fe.get(e);if(m)for(s.handler&&(o=s,s=o.handler,i=o.selector),s.guid||(s.guid=J.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(t){return typeof J!==Te&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(ue)||[""]).length;c--;)a=De.exec(t[c])||[],p=f=a[1],g=(a[2]||"").split(".").sort(),p&&(u=J.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=J.event.special[p]||{},d=J.extend({type:p,origType:f,data:n,handler:s,guid:s.guid,selector:i,needsContext:i&&J.expr.match.needsContext.test(i),namespace:g.join(".")},o),(h=l[p])||(h=l[p]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,g,r)||e.addEventListener&&e.addEventListener(p,r,!1)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=s.guid)),i?h.splice(h.delegateCount++,0,d):h.push(d),J.event.global[p]=!0)},remove:function(e,t,s,n,i){var o,r,a,l,c,d,u,h,p,g,f,m=fe.hasData(e)&&fe.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(ue)||[""]).length;c--;)if(a=De.exec(t[c])||[],p=f=a[1],g=(a[2]||"").split(".").sort(),p){for(u=J.event.special[p]||{},h=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=h.length;o--;)d=h[o],!i&&f!==d.origType||s&&s.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(h.splice(o,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,g,m.handle)||J.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)J.event.remove(e,p+t[c],s,n,!0);J.isEmptyObject(l)&&(delete m.handle,fe.remove(e,"events"))}},trigger:function(t,s,n,i){var o,r,a,l,c,d,u,h=[n||Y],p=G.call(t,"type")?t.type:t,g=G.call(t,"namespace")?t.namespace.split("."):[];if(r=a=n=n||Y,3!==n.nodeType&&8!==n.nodeType&&!Se.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),s=null==s?[t]:J.makeArray(s,[t]),u=J.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(n,s))){if(!i&&!u.noBubble&&!J.isWindow(n)){for(l=u.delegateType||p,Se.test(l+p)||(r=r.parentNode);r;r=r.parentNode)h.push(r),a=r;a===(n.ownerDocument||Y)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(r=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||p,(d=(fe.get(r,"events")||{})[t.type]&&fe.get(r,"handle"))&&d.apply(r,s),(d=c&&r[c])&&d.apply&&J.acceptData(r)&&(t.result=d.apply(r,s),!1===t.result&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),s)||!J.acceptData(n)||c&&J.isFunction(n[p])&&!J.isWindow(n)&&((a=n[c])&&(n[c]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,a&&(n[c]=a)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,s,n,i,o,r=[],a=z.call(arguments),l=(fe.get(this,"events")||{})[e.type]||[],c=J.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(r=J.event.handlers.call(this,e,l),t=0;(i=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,s=0;(o=i.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,void 0!==(n=((J.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var s,n,i,o,r=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(n=[],s=0;a>s;s++)o=t[s],i=o.selector+" ",void 0===n[i]&&(n[i]=o.needsContext?J(i,this).index(l)>=0:J.find(i,this,null,[l]).length),n[i]&&n.push(o);n.length&&r.push({elem:l,handlers:n})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var s,n,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(s=e.target.ownerDocument||Y,n=s.documentElement,i=s.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,s,n,i=e.type,o=e,r=this.fixHooks[i];for(r||(this.fixHooks[i]=r=_e.test(i)?this.mouseHooks:Ce.test(i)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new J.Event(o),t=n.length;t--;)s=n[t],e[s]=o[s];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,s,n){var i=J.extend(new J.Event,s,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(i,null,t):J.event.dispatch.call(t,i),i.isDefaultPrevented()&&s.preventDefault()}},J.removeEvent=function(e,t,s){e.removeEventListener&&e.removeEventListener(t,s,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?c:d):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var s,n=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==n&&!J.contains(n,i))&&(e.type=o.origType,s=o.handler.apply(this,arguments),e.type=t),s}}}),X.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var s=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=fe.access(n,t);i||n.addEventListener(e,s,!0),fe.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=fe.access(n,t)-1;i?fe.access(n,t,i):(n.removeEventListener(e,s,!0),fe.remove(n,t))}}}),J.fn.extend({on:function(e,t,s,n,i){var o,r;if("object"==typeof e){"string"!=typeof t&&(s=s||t,t=void 0);for(r in e)this.on(r,t,s,e[r],i);return this}if(null==s&&null==n?(n=t,s=t=void 0):null==n&&("string"==typeof t?(n=s,s=void 0):(n=s,s=t,t=void 0)),!1===n)n=d;else if(!n)return this;return 1===i&&(o=n,n=function(e){return J().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,s,t)})},one:function(e,t,s,n){return this.on(e,t,s,n,1)},off:function(e,t,s){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(s=t,t=void 0),!1===s&&(s=d),this.each(function(){J.event.remove(this,e,s,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var s=this[0];return s?J.event.trigger(e,t,s,!0):void 0}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ee=/<([\w:]+)/,Ie=/<|&#?\w+;/,Me=/<(?:script|style|link)/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^$|\/(?:java|ecma)script/i,Re=/^true\/(.*)/,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,J.extend({clone:function(e,t,s){var n,i,o,r,a=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(r=w(a),o=w(e),n=0,i=o.length;i>n;n++)v(o[n],r[n]);if(t)if(s)for(o=o||w(e),r=r||w(a),n=0,i=o.length;i>n;n++)m(o[n],r[n]);else m(e,a);return(r=w(a,"script")).length>0&&f(r,!l&&w(e,"script")),a},buildFragment:function(e,t,s,n){for(var i,o,r,a,l,c=t.createDocumentFragment(),d=[],u=0,h=e.length;h>u;u++)if((i=e[u])||0===i)if("object"===J.type(i))J.merge(d,i.nodeType?[i]:i);else if(Ie.test(i)){for(o=o||c.appendChild(t.createElement("div")),r=(Ee.exec(i)||["",""])[1].toLowerCase(),a=Be[r]||Be._default,o.innerHTML=a[1]+i.replace(Oe,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;J.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(i));for(c.textContent="",u=0;i=d[u++];)if(o=w(c.appendChild(i),"script"),(!n||-1===J.inArray(i,n))&&(J.contains(i.ownerDocument,i)&&f(o),s))for(l=0;i=o[l++];)Ae.test(i.type||"")&&s.push(i);return c},cleanData:function(e){for(var t,s,n,i,o=J.event.special,r=0;void 0!==(s=e[r]);r++){if(J.acceptData(s)&&(i=s[fe.expando])&&(t=fe.cache[i])){if(t.events)for(n in t.events)o[n]?J.event.remove(s,n):J.removeEvent(s,n,t.handle);fe.cache[i]&&delete fe.cache[i]}delete me.cache[s[me.expando]]}}}),J.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||h(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var s,n=e?J.filter(e,this):this,i=0;null!=(s=n[i]);i++)t||1!==s.nodeType||J.cleanData(w(s)),s.parentNode&&(t&&J.contains(s.ownerDocument,s)&&f(w(s,"script")),s.parentNode.removeChild(s));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},s=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!Be[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Oe,"<$1></$2>");try{for(;n>s;s++)1===(t=this[s]||{}).nodeType&&(J.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(w(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var s,n,i,o,r,a,l=0,c=this.length,d=this,u=c-1,h=e[0],f=J.isFunction(h);if(f||c>1&&"string"==typeof h&&!X.checkClone&&Pe.test(h))return this.each(function(s){var n=d.eq(s);f&&(e[0]=h.call(this,s,n.html())),n.domManip(e,t)});if(c&&(s=J.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=(i=J.map(w(s,"script"),p)).length;c>l;l++)r=s,l!==u&&(r=J.clone(r,!0,!0),o&&J.merge(i,w(r,"script"))),t.call(this[l],r,l);if(o)for(a=i[i.length-1].ownerDocument,J.map(i,g),l=0;o>l;l++)r=i[l],Ae.test(r.type||"")&&!fe.access(r,"globalEval")&&J.contains(a,r)&&(r.src?J._evalUrl&&J._evalUrl(r.src):J.globalEval(r.textContent.replace(Ne,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var s,n=[],i=J(e),o=i.length-1,r=0;o>=r;r++)s=r===o?this:this.clone(!0),J(i[r])[t](s),W.apply(n,s.get());return this.pushStack(n)}});var Fe,Le={},He=/^margin/,je=new RegExp("^("+be+")(?!px)[a-z%]+$","i"),Ue=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(r,null);s="1%"!==t.top,n="4px"===t.width,i.removeChild(o)}var s,n,i=Y.documentElement,o=Y.createElement("div"),r=Y.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),e.getComputedStyle&&J.extend(X,{pixelPosition:function(){return t(),s},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,s=r.appendChild(Y.createElement("div"));return s.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",r.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(s,null).marginRight),i.removeChild(o),t}}))}(),J.swap=function(e,t,s,n){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];i=s.apply(e,n||[]);for(o in t)e.style[o]=r[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,qe=new RegExp("^("+be+")(.*)$","i"),We=new RegExp("^([+-])=("+be+")","i"),Ke={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var s=k(e,"opacity");return""===s?"1":s}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,s,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,r,a=J.camelCase(t),l=e.style;return t=J.cssProps[a]||(J.cssProps[a]=T(l,a)),r=J.cssHooks[t]||J.cssHooks[a],void 0===s?r&&"get"in r&&void 0!==(i=r.get(e,!1,n))?i:l[t]:("string"===(o=typeof s)&&(i=We.exec(s))&&(s=(i[1]+1)*i[2]+parseFloat(J.css(e,t)),o="number"),void(null!=s&&s===s&&("number"!==o||J.cssNumber[a]||(s+="px"),X.clearCloneStyle||""!==s||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(s=r.set(e,s,n))||(l[t]=s))))}},css:function(e,t,s,n){var i,o,r,a=J.camelCase(t);return t=J.cssProps[a]||(J.cssProps[a]=T(e.style,a)),(r=J.cssHooks[t]||J.cssHooks[a])&&"get"in r&&(i=r.get(e,!0,s)),void 0===i&&(i=k(e,t,n)),"normal"===i&&t in $e&&(i=$e[t]),""===s||s?(o=parseFloat(i),!0===s||J.isNumeric(o)?o||0:i):i}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,s,n){return s?ze.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Ke,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,s,n){var i=n&&Ue(e);return C(0,s,n?_(e,t,n,"border-box"===J.css(e,"boxSizing",!1,i),i):0)}}}),J.cssHooks.marginRight=x(X.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},k,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(s){for(var n=0,i={},o="string"==typeof s?s.split(" "):[s];4>n;n++)i[e+ye[n]+t]=o[n]||o[n-2]||o[0];return i}},He.test(e)||(J.cssHooks[e+t].set=C)}),J.fn.extend({css:function(e,t){return ge(this,function(e,t,s){var n,i,o={},r=0;if(J.isArray(t)){for(n=Ue(e),i=t.length;i>r;r++)o[t[r]]=J.css(e,t[r],!1,n);return o}return void 0!==s?J.style(e,t,s):J.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?J(this).show():J(this).hide()})}}),J.Tween=O,O.prototype={constructor:O,init:function(e,t,s,n,i,o){this.elem=e,this.prop=s,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[s]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,s=O.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),s&&s.set?s.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=O.prototype.init,J.fx.step={};var Ge,Xe,Ye=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),Je=/queueHooks$/,Ze=[function(e,t,s){var n,i,o,r,a,l,c,d=this,u={},h=e.style,p=e.nodeType&&ke(e),g=fe.get(e,"fxshow");s.queue||(null==(a=J._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,J.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(s.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=J.css(e,"display"))?fe.get(e,"olddisplay")||y(e.nodeName):c)&&"none"===J.css(e,"float")&&(h.display="inline-block")),s.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=s.overflow[0],h.overflowX=s.overflow[1],h.overflowY=s.overflow[2]}));for(n in t)if(i=t[n],Ye.exec(i)){if(delete t[n],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;p=!0}u[n]=g&&g[n]||J.style(e,n)}else c=void 0;if(J.isEmptyObject(u))"inline"===("none"===c?y(e.nodeName):c)&&(h.display=c);else{g?"hidden"in g&&(p=g.hidden):g=fe.access(e,"fxshow",{}),o&&(g.hidden=!p),p?J(e).show():d.done(function(){J(e).hide()}),d.done(function(){var t;fe.remove(e,"fxshow");for(t in u)J.style(e,t,u[t])});for(n in u)r=M(p?g[n]:0,n,d),n in g||(g[n]=r.start,p&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}],et={"*":[function(e,t){var s=this.createTween(e,t),n=s.cur(),i=Qe.exec(t),o=i&&i[3]||(J.cssNumber[e]?"":"px"),r=(J.cssNumber[e]||"px"!==o&&+n)&&Qe.exec(J.css(s.elem,e)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],i=i||[],r=+n||1;do{a=a||".5",r/=a,J.style(s.elem,e,r+o)}while(a!==(a=s.cur()/n)&&1!==a&&--l)}return i&&(r=s.start=+r||+n||0,s.unit=o,s.end=i[1]?r+(i[1]+1)*i[2]:+i[2]),s}]};J.Animation=J.extend(A,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var s,n=0,i=e.length;i>n;n++)s=e[n],et[s]=et[s]||[],et[s].unshift(t)},prefilter:function(e,t){t?Ze.unshift(e):Ze.push(e)}}),J.speed=function(e,t,s){var n=e&&"object"==typeof e?J.extend({},e):{complete:s||!s&&t||J.isFunction(e)&&e,duration:e,easing:s&&t||t&&!J.isFunction(t)&&t};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,s,n){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,s,n)},animate:function(e,t,s,n){var i=J.isEmptyObject(e),o=J.speed(t,s,n),r=function(){var t=A(this,J.extend({},e),o);(i||fe.get(this,"finish"))&&t.stop(!0)};return r.finish=r,i||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(e,t,s){var n=function(e){var t=e.stop;delete e.stop,t(s)};return"string"!=typeof e&&(s=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=J.timers,r=fe.get(this);if(i)r[i]&&r[i].stop&&n(r[i]);else for(i in r)r[i]&&r[i].stop&&Je.test(i)&&n(r[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(s),t=!1,o.splice(i,1));(t||!s)&&J.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,s=fe.get(this),n=s[e+"queue"],i=s[e+"queueHooks"],o=J.timers,r=n?n.length:0;for(s.finish=!0,J.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete s.finish})}}),J.each(["toggle","show","hide"],function(e,t){var s=J.fn[t];J.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?s.apply(this,arguments):this.animate(I(t,!0),e,n,i)}}),J.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,s,n){return this.animate(t,e,s,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,s=J.timers;for(Ge=J.now();t<s.length;t++)(e=s[t])()||s[t]!==e||s.splice(t--,1);s.length||J.fx.stop(),Ge=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Xe||(Xe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Xe),Xe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,s){var n=setTimeout(t,e);s.stop=function(){clearTimeout(n)}})},function(){var e=Y.createElement("input"),t=Y.createElement("select"),s=t.appendChild(Y.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=s.selected,t.disabled=!0,X.optDisabled=!s.disabled,(e=Y.createElement("input")).value="t",e.type="radio",X.radioValue="t"===e.value}();var tt,st=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return ge(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,s){var n,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Te?J.prop(e,t,s):(1===o&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?tt:void 0)),void 0===s?n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=J.find.attr(e,t))?void 0:i:null!==s?n&&"set"in n&&void 0!==(i=n.set(e,s,t))?i:(e.setAttribute(t,s+""),s):void J.removeAttr(e,t))},removeAttr:function(e,t){var s,n,i=0,o=t&&t.match(ue);if(o&&1===e.nodeType)for(;s=o[i++];)n=J.propFix[s]||s,J.expr.match.bool.test(s)&&(e[n]=!1),e.removeAttribute(s)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&J.nodeName(e,"input")){var s=e.value;return e.setAttribute("type",t),s&&(e.value=s),t}}}}}),tt={set:function(e,t,s){return!1===t?J.removeAttr(e,s):e.setAttribute(s,s),s}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var s=st[t]||J.find.attr;st[t]=function(e,t,n){var i,o;return n||(o=st[t],st[t]=i,i=null!=s(e,t,n)?t.toLowerCase():null,st[t]=o),i}});var nt=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return ge(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,s){var n,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!J.isXMLDoc(e))&&(t=J.propFix[t]||t,i=J.propHooks[t]),void 0!==s?i&&"set"in i&&void 0!==(n=i.set(e,s,t))?n:e[t]=s:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||nt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,s,n,i,o,r,a="string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ue)||[];c>l;l++)if(s=this[l],n=1===s.nodeType&&(s.className?(" "+s.className+" ").replace(it," "):" ")){for(o=0;i=t[o++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");r=J.trim(n),s.className!==r&&(s.className=r)}return this},removeClass:function(e){var t,s,n,i,o,r,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ue)||[];c>l;l++)if(s=this[l],n=1===s.nodeType&&(s.className?(" "+s.className+" ").replace(it," "):"")){for(o=0;i=t[o++];)for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");r=e?J.trim(n):"",s.className!==r&&(s.className=r)}return this},toggleClass:function(e,t){var s=typeof e;return"boolean"==typeof t&&"string"===s?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(s){J(this).toggleClass(e.call(this,s,this.className,t),t)}:function(){if("string"===s)for(var t,n=0,i=J(this),o=e.match(ue)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(s===Te||"boolean"===s)&&(this.className&&fe.set(this,"__className__",this.className),this.className=this.className||!1===e?"":fe.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",s=0,n=this.length;n>s;s++)if(1===this[s].nodeType&&(" "+this[s].className+" ").replace(it," ").indexOf(t)>=0)return!0;return!1}});var ot=/\r/g;J.fn.extend({val:function(e){var t,s,n,i=this[0];return arguments.length?(n=J.isFunction(e),this.each(function(s){var i;1===this.nodeType&&(null==(i=n?e.call(this,s,J(this).val()):e)?i="":"number"==typeof i?i+="":J.isArray(i)&&(i=J.map(i,function(e){return null==e?"":e+""})),(t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=J.valHooks[i.type]||J.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(s=t.get(i,"value"))?s:"string"==typeof(s=i.value)?s.replace(ot,""):null==s?"":s:void 0}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,s,n=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,r=o?null:[],a=o?i+1:n.length,l=0>i?a:o?i:0;a>l;l++)if(!(!(s=n[l]).selected&&l!==i||(X.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&J.nodeName(s.parentNode,"optgroup"))){if(t=J(s).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var s,n,i=e.options,o=J.makeArray(t),r=i.length;r--;)n=i[r],(n.selected=J.inArray(n.value,o)>=0)&&(s=!0);return s||(e.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},X.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,s){return arguments.length>0?this.on(t,null,e,s):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,s){return this.on(e,null,t,s)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,s,n){return this.on(t,e,s,n)},undelegate:function(e,t,s){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",s)}});var rt=J.now(),at=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,s;if(!e||"string"!=typeof e)return null;try{s=new DOMParser,t=s.parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var lt,ct,dt=/#.*$/,ut=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,ft=/^\/\//,mt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wt={},vt={},bt="*/".concat("*");try{ct=location.href}catch(e){(ct=Y.createElement("a")).href="",ct=ct.href}lt=mt.exec(ct.toLowerCase())||[],J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct,type:"GET",isLocal:pt.test(lt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,J.ajaxSettings),t):B(J.ajaxSettings,e)},ajaxPrefilter:R(wt),ajaxTransport:R(vt),ajax:function(e,t){function s(e,t,s,r){var l,d,w,v,y,x=t;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,o=r||"",k.readyState=e>0?4:0,l=e>=200&&300>e||304===e,s&&(v=F(u,k,s)),v=L(u,v,k,l),l?(u.ifModified&&((y=k.getResponseHeader("Last-Modified"))&&(J.lastModified[i]=y),(y=k.getResponseHeader("etag"))&&(J.etag[i]=y)),204===e||"HEAD"===u.type?x="nocontent":304===e?x="notmodified":(x=v.state,d=v.data,w=v.error,l=!w)):(w=x,(e||!x)&&(x="error",0>e&&(e=0))),k.status=e,k.statusText=(t||x)+"",l?g.resolveWith(h,[d,x,k]):g.rejectWith(h,[k,x,w]),k.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[k,u,l?d:w]),f.fireWith(h,[k,x]),c&&(p.trigger("ajaxComplete",[k,u]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,r,a,l,c,d,u=J.ajaxSetup({},t),h=u.context||u,p=u.context&&(h.nodeType||h.swq)?J(h):J.event,g=J.Deferred(),f=J.Callbacks("once memory"),m=u.statusCode||{},w={},v={},b=0,y="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!r)for(r={};t=ht.exec(o);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var s=e.toLowerCase();return b||(e=v[s]=v[s]||e,w[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||y;return n&&n.abort(t),s(0,t),this}};if(g.promise(k).complete=f.add,k.success=k.done,k.error=k.fail,u.url=((e||u.url||ct)+"").replace(dt,"").replace(ft,lt[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=J.trim(u.dataType||"*").toLowerCase().match(ue)||[""],null==u.crossDomain&&(l=mt.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===lt[1]&&l[2]===lt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(lt[3]||("http:"===lt[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=J.param(u.data,u.traditional)),N(wt,u,t,k),2===b)return k;(c=u.global)&&0==J.active++&&J.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!gt.test(u.type),i=u.url,u.hasContent||(u.data&&(i=u.url+=(at.test(i)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=ut.test(i)?i.replace(ut,"$1_="+rt++):i+(at.test(i)?"&":"?")+"_="+rt++)),u.ifModified&&(J.lastModified[i]&&k.setRequestHeader("If-Modified-Since",J.lastModified[i]),J.etag[i]&&k.setRequestHeader("If-None-Match",J.etag[i])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&k.setRequestHeader("Content-Type",u.contentType),k.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+bt+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)k.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(!1===u.beforeSend.call(h,k,u)||2===b))return k.abort();y="abort";for(d in{success:1,error:1,complete:1})k[d](u[d]);if(n=N(vt,u,t,k)){k.readyState=1,c&&p.trigger("ajaxSend",[k,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){k.abort("timeout")},u.timeout));try{b=1,n.send(w,s)}catch(e){if(!(2>b))throw e;s(-1,e)}}else s(-1,"No Transport");return k},getJSON:function(e,t,s){return J.get(e,t,s,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,s,n,i){return J.isFunction(s)&&(i=i||n,n=s,s=void 0),J.ajax({url:e,type:t,dataType:i,data:s,success:n})}}),J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),s=t.contents();s.length?s.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(s){J(this).wrapAll(t?e.call(this,s):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var yt=/%20/g,kt=/\[\]$/,xt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var s,n=[],i=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.swq&&!J.isPlainObject(e))J.each(e,function(){i(this.name,this.value)});else for(s in e)H(s,e[s],t,i);return n.join("&").replace(yt,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&Ct.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!xe.test(e))}).map(function(e,t){var s=J(this).val();return null==s?null:J.isArray(s)?J.map(s,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:s.replace(xt,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var _t=0,St={},Dt={0:200,1223:204},Ot=J.ajaxSettings.xhr();e.ActiveXObject&&J(e).on("unload",function(){for(var e in St)St[e]()}),X.cors=!!Ot&&"withCredentials"in Ot,X.ajax=Ot=!!Ot,J.ajaxTransport(function(e){var t;return X.cors||Ot&&!e.crossDomain?{send:function(s,n){var i,o=e.xhr(),r=++_t;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(i in s)o.setRequestHeader(i,s[i]);t=function(e){return function(){t&&(delete St[r],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?n(o.status,o.statusText):n(Dt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=St[r]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,s;return{send:function(n,i){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",s=function(e){t.remove(),s=null,e&&i("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){s&&s()}}}});var Et=[],It=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Et.pop()||J.expando+"_"+rt++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,s,n){var i,o,r,a=!1!==t.jsonp&&(It.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(It,"$1"+i):!1!==t.jsonp&&(t.url+=(at.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||J.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){r=arguments},n.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=s.jsonpCallback,Et.push(i)),r&&J.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),J.parseHTML=function(e,t,s){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(s=t,t=!1),t=t||Y;var n=oe.exec(e),i=!s&&[];return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,i),i&&i.length&&J(i).remove(),J.merge([],n.childNodes))};var Mt=J.fn.load;J.fn.load=function(e,t,s){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var n,i,o,r=this,a=e.indexOf(" ");return a>=0&&(n=J.trim(e.slice(a)),e=e.slice(0,a)),J.isFunction(t)?(s=t,t=void 0):t&&"object"==typeof t&&(i="POST"),r.length>0&&J.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,r.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(s&&function(e,t){r.each(s,o||[e.responseText,t,e])}),this},J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Pt=e.document.documentElement;J.offset={setOffset:function(e,t,s){var n,i,o,r,a,l,c=J.css(e,"position"),d=J(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=J.css(e,"top"),l=J.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(n=d.position(),r=n.top,i=n.left):(r=parseFloat(o)||0,i=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,s,a)),null!=t.top&&(u.top=t.top-a.top+r),null!=t.left&&(u.left=t.left-a.left+i),"using"in t?t.using.call(e,u):d.css(u)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,s,n=this[0],i={top:0,left:0},o=n&&n.ownerDocument;return o?(t=o.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==Te&&(i=n.getBoundingClientRect()),s=j(o),{top:i.top+s.pageYOffset-t.clientTop,left:i.left+s.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,s=this[0],n={top:0,left:0};return"fixed"===J.css(s,"position")?t=s.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(s,"marginTop",!0),left:t.left-n.left-J.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pt;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Pt})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,s){var n="pageYOffset"===s;J.fn[t]=function(i){return ge(this,function(t,i,o){var r=j(t);return void 0===o?r?r[s]:t[i]:void(r?r.scrollTo(n?e.pageXOffset:o,n?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=x(X.pixelPosition,function(e,s){return s?(s=k(e,t),je.test(s)?J(e).position()[t]+"px":s):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(s,n){J.fn[n]=function(n,i){var o=arguments.length&&(s||"boolean"!=typeof n),r=s||(!0===n||!0===i?"margin":"border");return ge(this,function(t,s,n){var i;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?J.css(t,s,r):J.style(t,s,n,r)},t,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("swq",[],function(){return J});e.swQ,e.swQ;return typeof t===Te&&(e.swQ=e.swQ=J),J}),function(e){window.swQuery=window.swQ=e,swQuery.easing.jswing=swQuery.easing.swing,swQuery.extend(swQuery.easing,{def:"easeOutQuad",swing:function(e,t,s,n,i){return swQuery.easing[swQuery.easing.def](e,t,s,n,i)},easeInQuad:function(e,t,s,n,i){return n*(t/=i)*t+s},easeOutQuad:function(e,t,s,n,i){return-n*(t/=i)*(t-2)+s},easeInOutQuad:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t+s:-n/2*(--t*(t-2)-1)+s},easeInCubic:function(e,t,s,n,i){return n*(t/=i)*t*t+s},easeOutCubic:function(e,t,s,n,i){return n*((t=t/i-1)*t*t+1)+s},easeInOutCubic:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t+s:n/2*((t-=2)*t*t+2)+s},easeInQuart:function(e,t,s,n,i){return n*(t/=i)*t*t*t+s},easeOutQuart:function(e,t,s,n,i){return-n*((t=t/i-1)*t*t*t-1)+s},easeInOutQuart:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t*t+s:-n/2*((t-=2)*t*t*t-2)+s},easeInQuint:function(e,t,s,n,i){return n*(t/=i)*t*t*t*t+s},easeOutQuint:function(e,t,s,n,i){return n*((t=t/i-1)*t*t*t*t+1)+s},easeInOutQuint:function(e,t,s,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+s:n/2*((t-=2)*t*t*t*t+2)+s},easeInSine:function(e,t,s,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+s},easeOutSine:function(e,t,s,n,i){return n*Math.sin(t/i*(Math.PI/2))+s},easeInOutSine:function(e,t,s,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+s},easeInExpo:function(e,t,s,n,i){return 0==t?s:n*Math.pow(2,10*(t/i-1))+s},easeOutExpo:function(e,t,s,n,i){return t==i?s+n:n*(1-Math.pow(2,-10*t/i))+s},easeInOutExpo:function(e,t,s,n,i){return 0==t?s:t==i?s+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+s:n/2*(2-Math.pow(2,-10*--t))+s},easeInCirc:function(e,t,s,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+s},easeOutCirc:function(e,t,s,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+s},easeInOutCirc:function(e,t,s,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+s:n/2*(Math.sqrt(1-(t-=2)*t)+1)+s},easeInElastic:function(e,t,s,n,i){var o=1.70158,r=0,a=n;if(0==t)return s;if(1==(t/=i))return s+n;if(r||(r=.3*i),a<Math.abs(n)){a=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/a);return-a*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/r)+s},easeOutElastic:function(e,t,s,n,i){var o=1.70158,r=0,a=n;if(0==t)return s;if(1==(t/=i))return s+n;if(r||(r=.3*i),a<Math.abs(n)){a=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/r)+n+s},easeInOutElastic:function(e,t,s,n,i){var o=1.70158,r=0,a=n;if(0==t)return s;if(2==(t/=i/2))return s+n;if(r||(r=i*(.3*1.5)),a<Math.abs(n)){a=n;o=r/4}else o=r/(2*Math.PI)*Math.asin(n/a);return t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/r)*-.5+s:a*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/r)*.5+n+s},easeInBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),n*(t/=i)*t*((o+1)*t-o)+s},easeOutBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),n*((t=t/i-1)*t*((o+1)*t+o)+1)+s},easeInOutBack:function(e,t,s,n,i,o){return void 0==o&&(o=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+s:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+s},easeInBounce:function(e,t,s,n,i){return n-swQuery.easing.easeOutBounce(e,i-t,0,n,i)+s},easeOutBounce:function(e,t,s,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+s:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+s:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+s:n*(7.5625*(t-=2.625/2.75)*t+.984375)+s},easeInOutBounce:function(e,t,s,n,i){return t<i/2?.5*swQuery.easing.easeInBounce(e,2*t,0,n,i)+s:.5*swQuery.easing.easeOutBounce(e,2*t-i,0,n,i)+.5*n+s}})}(swQ),function(e){var t,s;e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},s={},(t=e.uaMatch(navigator.userAgent)).browser&&(s[t.browser]=!0,s.version=t.version),s.chrome?s.webkit=!0:s.webkit&&(s.safari=!0),e.browser=s}(swQ),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){return function e(t,s,n){function i(r,a){if(!s[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=s[r]={exports:{}};t[r][0].call(c.exports,function(e){var s=t[r][1][e];return i(s||e)},c,c.exports,e,t,s,n)}return s[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,s){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,s){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var s,n=i(e),o=n.source,c=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",o),s=r(o,t)):(l[c]||(a("new io instance for %s",o),l[c]=r(o,t)),s=l[c]),s.socket(n.path)}var i=e("./url"),o=e("socket.io-parser"),r=e("./manager"),a=e("debug")("socket.io-client");t.exports=s=n;var l=s.managers={};s.protocol=o.protocol,s.connect=n,s.Manager=e("./manager"),s.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(e,t,s){function n(e,t){if(!(this instanceof n))return new n(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e("./url");var i=e("engine.io-client"),o=e("./socket"),r=e("component-emitter"),a=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),d=(e("object-component"),e("debug")("socket.io-client:manager")),u=e("indexof");t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},r(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},n.prototype.open=n.prototype.connect=function(e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var n=l(t,"open",function(){s.onopen(),e&&e()}),o=l(t,"error",function(t){if(d("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}s.maybeReconnectOnOpen()});if(!1!==this._timeout){var r=this._timeout;d("connect attempt will timeout after %d",r);var a=setTimeout(function(){d("connect attempt timed out after %d",r),n.destroy(),t.close(),t.emit("error","timeout"),s.emitAll("connect_timeout",r)},r);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(n),this.subs.push(o),this},n.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose")))},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){d("error",e),this.emitAll("error",e)},n.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var s=this;t.on("connect",function(){~u(s.connected,t)||s.connected.push(t)})}return t},n.prototype.destroy=function(e){var t=u(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},n.prototype.packet=function(e){d("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var s=0;s<e.length;s++)t.engine.write(e[s]);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){d("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(++this.attempts>this._reconnectionAttempts)d("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),d("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var s=setTimeout(function(){e.skipReconnect||(d("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.skipReconnect||e.open(function(t){t?(d("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(d("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(s)}})}},n.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:36,"object-component":37,"socket.io-parser":40}],4:[function(e,t,s){t.exports=function(e,t,s){return e.on(t,s),{destroy:function(){e.removeListener(t,s)}}}},{}],5:[function(e,t,s){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=e("socket.io-parser"),o=e("component-emitter"),r=e("to-array"),a=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),d=e("has-binary");t.exports=n;var u={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},h=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",l(this,"onopen")),a(e,"packet",l(this,"onpacket")),a(e,"close",l(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=r(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(u.hasOwnProperty(e))return h.apply(this,arguments),this;var t=r(arguments),s=i.EVENT;d(t)&&(s=i.BINARY_EVENT);var n={type:s,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,s=!1;return function(){if(!s){s=!0;var n=r(arguments);c("sending ack %j",n);var o=d(n)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:n})}}},n.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data),this.acks[e.id].apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,"socket.io-parser":40,"to-array":44}],6:[function(e,t,s){(function(s){var n=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var o=e,t=t||s.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),o=n(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/",o.id=o.protocol+"://"+o.host+":"+o.port,o.href=o.protocol+"://"+o.host+(t&&t.port==o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(e,t,s){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var s=n.call(arguments,2);return function(){return t.apply(e,s.concat(n.call(arguments)))}}},{}],8:[function(e,t,s){function n(e){if(e)return i(e)}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function s(){n.off(e,s),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},s.fn=t,this.on(e,s),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s=this._callbacks[e];if(!s)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<s.length;i++)if((n=s[i])===t||n.fn===t){s.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks[e];if(s)for(var n=0,i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,s){function n(e){return n.enabled(e)?function(t){t=i(t);var s=new Date,o=s-(n[e]||s);n[e]=s,t=e+" "+t+" +"+n.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(e){return e instanceof Error?e.stack||e.message:e}t.exports=n,n.names=[],n.skips=[],n.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),s=t.length,i=0;i<s;i++)"-"===(e=t[i].replace("*",".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$"))},n.disable=function(){n.enable("")},n.humanize=function(e){return e>=36e5?(e/36e5).toFixed(1)+"h":e>=6e4?(e/6e4).toFixed(1)+"m":e>=1e3?(e/1e3|0)+"s":e+"ms"},n.enabled=function(e){for(var t=0,s=n.skips.length;t<s;t++)if(n.skips[t].test(e))return!1;for(var t=0,s=n.names.length;t<s;t++)if(n.names[t].test(e))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(e){}},{}],10:[function(e,t,s){t.exports=e("./lib/")},{"./lib/":11}],11:[function(e,t,s){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(e,t,s){(function(s){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=d(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:s.location&&"https:"==location.protocol,t.host){var i=t.host.split(":");t.hostname=i.shift(),i.length&&(t.port=i.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(s.location?location.hostname:"localhost"),this.port=t.port||(s.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function i(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}var o=e("./transports"),r=e("component-emitter"),a=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),d=e("parseuri"),u=e("parsejson"),h=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,r(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=i(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this})},n.prototype.open=function(){if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(e){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;u=u||t}u||(a('probe transport "%s" opened',e),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(t){if(!u)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",d),!d)return;n.priorWebsocketSuccess="websocket"==d.name,a('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){u||"closed"!=h.readyState&&(a("changing transport and sending upgrade packet"),c(),h.setTransport(d),d.send([{type:"upgrade"}]),h.emit("upgrade",d),d=null,h.upgrading=!1,h.flush())})}else{a('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=d.name,h.emit("upgradeError",s)}}))}function s(){u||(u=!0,c(),d.close(),d=null)}function i(t){var n=new Error("probe error: "+t);n.transport=d.name,s(),a('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",n)}function o(){i("transport closed")}function r(){i("socket closed")}function l(e){d&&e.name!=d.name&&(a('"%s" works - aborting "%s"',e.name,d.name),s())}function c(){d.removeListener("open",t),d.removeListener("error",i),d.removeListener("close",o),h.removeListener("close",r),h.removeListener("upgrading",l)}a('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),u=!1,h=this;n.priorWebsocketSuccess=!1,d.once("open",t),d.once("error",i),d.once("close",o),this.once("close",r),this.once("upgrading",l),d.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,s){if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(s),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function s(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?s():e()}):this.upgrading?s():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var s=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){s.writeBuffer=[],s.callbackBuffer=[],s.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],s=0,n=e.length;s<n;s++)~l(this.transports,e[s])&&t.push(e[s]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(e,t,s){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=n,o(n.prototype),n.timestamps=0,n.prototype.onError=function(e,t){var s=new Error(e);return s.type="TransportError",s.description=t,this.emit("error",s),this},n.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(e,t,s){(function(t){var n=e("xmlhttprequest"),i=e("./polling-xhr"),o=e("./polling-jsonp"),r=e("./websocket");s.polling=function(e){var s=!1,r=!1,a=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,c=location.port;c||(c=l?443:80),s=e.hostname!=location.hostname||c!=e.port,r=e.secure!=l}if(e.xdomain=s,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},s.websocket=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(e,t,s){(function(s){function n(){}function i(e){o.call(this,e),this.query=this.query||{},a||(s.___eio||(s.___eio=[]),a=s.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,s.document&&s.addEventListener&&s.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)})}var o=e("./polling"),r=e("component-inherit");t.exports=i;var a,l=/\n/g,c=/\\n/g;r(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function s(){n(),t()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,r=document.createElement("form"),a=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=d,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&s()}:this.iframe.onload=s}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(e,t,s){(function(s){function n(){}function i(e){if(l.call(this,e),s.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=s.location.hostname||n!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function r(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest"),l=e("./polling"),c=e("component-emitter"),d=e("component-inherit"),u=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,d(i,l),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},i.prototype.doWrite=function(e,t){var s="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:s}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},i.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e=this.xhr=new a({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(u("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},u("xhr data %s",this.data),e.send(this.data)}catch(e){return void setTimeout(function(){t.onError(e)},0)}s.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if(void 0!==this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}s.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==s.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},s.document&&(o.requestsCount=0,o.requests={},s.attachEvent?s.attachEvent("onunload",r):s.addEventListener&&s.addEventListener("beforeunload",r))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(e,t,s){function n(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),r=e("engine.io-parser"),a=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=n;var c=null!=new(e("xmlhttprequest"))({xdomain:!1}).responseType;a(n,i),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){l("paused"),s.readyState="paused",e()}var s=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||t()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;l("polling got data %s",e);r.decodePayload(e,this.socket.binaryType,function(e,s,n){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){s=this;this.writable=!1;var t=function(){s.writable=!0,s.emit("drain")},s=this;r.encodePayload(e,this.supportsBinary,function(e){s.doWrite(e,t)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",s="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(s=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+s+this.path+e}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(e,t,s){function n(e){e&&e.forceBase64&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("engine.io-parser"),r=e("parseqs"),a=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=n,a(n,i),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent};this.ws=new c(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){var t=this;this.writable=!1;for(var s=0,n=e.length;s<n;s++)o.encodePacket(e[s],this.supportsBinary,function(e){try{t.ws.send(e)}catch(e){l("websocket closed before onclose event")}});setTimeout(function(){t.writable=!0,t.emit("drain")},0)},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",s="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(s=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),(e=r.encode(e)).length&&(e="?"+e),t+"://"+this.hostname+s+this.path+e},n.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===n.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(e,t,s){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,s=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!s&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":34}],20:[function(e,t,s){t.exports=function(e,t){var s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}},{}],21:[function(e,t,s){(function(t){function n(e,t,n){if(!t)return s.encodeBase64Packet(e,n);var i=e.data,o=new Uint8Array(i),r=new Uint8Array(1+i.byteLength);r[0]=p[e.type];for(var a=0;a<o.length;a++)r[a+1]=o[a];return n(r.buffer)}function i(e,t,n){if(!t)return s.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){e.data=i.result,s.encodePacket(e,t,!0,n)},i.readAsArrayBuffer(e.data)}function o(e,t,n){if(!t)return s.encodeBase64Packet(e,n);if(h)return i(e,t,n);var o=new Uint8Array(1);return o[0]=p[e.type],n(new m([o.buffer,e.data]))}function r(e,t,s){for(var n=new Array(e.length),i=d(e.length,s),o=0;o<e.length;o++)!function(e,s,i){t(s,function(t,s){n[e]=s,i(t,n)})}(o,e[o],i)}var a=e("./keys"),l=e("arraybuffer.slice"),c=e("base64-arraybuffer"),d=e("after"),u=e("utf8"),h=navigator.userAgent.match(/Android/i);s.protocol=3;var p=s.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},g=a(p),f={type:"error",data:"parser error"},m=e("blob");s.encodePacket=function(e,s,i,r){"function"==typeof s&&(r=s,s=!1),"function"==typeof i&&(r=i,i=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return n(e,s,r);if(m&&a instanceof t.Blob)return o(e,s,r);var l=p[e.type];return void 0!==e.data&&(l+=i?u.encode(String(e.data)):String(e.data)),r(""+l)},s.encodeBase64Packet=function(e,n){var i="b"+s.packets[e.type];if(m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}var r;try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),l=new Array(a.length),c=0;c<a.length;c++)l[c]=a[c];r=String.fromCharCode.apply(null,l)}return i+=t.btoa(r),n(i)},s.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return s.decodeBase64Packet(e.substr(1),t);if(n)try{e=u.decode(e)}catch(e){return f}i=e.charAt(0);return Number(i)==i&&g[i]?e.length>1?{type:g[i],data:e.substring(1)}:{type:g[i]}:f}var i=new Uint8Array(e)[0],o=l(e,1);return m&&"blob"===t&&(o=new m([o])),{type:g[i],data:o}},s.decodeBase64Packet=function(e,s){var n=g[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=c.decode(e.substr(1));return"blob"===s&&m&&(i=new m([i])),{type:n,data:i}},s.encodePayload=function(e,t,n){function i(e){return e.length+":"+e}return"function"==typeof t&&(n=t,t=null),t?m&&!h?s.encodePayloadAsBlob(e,n):s.encodePayloadAsArrayBuffer(e,n):e.length?void r(e,function(e,n){s.encodePacket(e,t,!0,function(e){n(null,i(e))})},function(e,t){return n(t.join(""))}):n("0:")},s.decodePayload=function(e,t,n){if("string"!=typeof e)return s.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var i;if(""==e)return n(f,0,1);for(var o,r,a="",l=0,c=e.length;l<c;l++){var d=e.charAt(l);if(":"!=d)a+=d;else{if(""==a||a!=(o=Number(a)))return n(f,0,1);if(r=e.substr(l+1,o),a!=r.length)return n(f,0,1);if(r.length){if(i=s.decodePacket(r,t,!0),f.type==i.type&&f.data==i.data)return n(f,0,1);if(!1===n(i,l+o,c))return}l+=o,a=""}}return""!=a?n(f,0,1):void 0},s.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));r(e,function(e,t){s.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,s){var n=s.reduce(function(e,t){var s;return s="string"==typeof t?t.length:t.byteLength,e+s.toString().length+s+2},0),i=new Uint8Array(n),o=0;return s.forEach(function(e){var t="string"==typeof e,s=e;if(t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);s=n.buffer}i[o++]=t?0:1;for(var a=s.byteLength.toString(),r=0;r<a.length;r++)i[o++]=parseInt(a[r]);i[o++]=255;for(var n=new Uint8Array(s),r=0;r<n.length;r++)i[o++]=n[r]}),t(i.buffer)})},s.encodePayloadAsBlob=function(e,t){r(e,function(e,t){s.encodePacket(e,!0,!0,function(e){var s=new Uint8Array(1);if(s[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,s[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),r=new Uint8Array(o.length+1),i=0;i<o.length;i++)r[i]=parseInt(o[i]);if(r[o.length]=255,m){var a=new m([s.buffer,r.buffer,e]);t(null,a)}})},function(e,s){return t(new m(s))})},s.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var i=e,o=[],r=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],d="",u=1;255!=a[u];u++){if(d.length>310){r=!0;break}d+=a[u]}if(r)return n(f,0,1);i=l(i,2+d.length),d=parseInt(d);var h=l(i,0,d);if(c)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(e){var p=new Uint8Array(h);h="";for(u=0;u<p.length;u++)h+=String.fromCharCode(p[u])}o.push(h),i=l(i,d)}var g=o.length;o.forEach(function(e,i){n(s.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(e,t,s){t.exports=Object.keys||function(e){var t=[],s=Object.prototype.hasOwnProperty;for(var n in e)s.call(e,n)&&t.push(n);return t}},{}],23:[function(e,t,s){function n(){}t.exports=function(e,t,s){function i(e,n){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=s):0!==i.count||o||t(null,n)}var o=!1;return s=s||n,i.count=e,0===e?t():i}},{}],24:[function(e,t,s){t.exports=function(e,t,s){var n=e.byteLength;if(t=t||0,s=s||n,e.slice)return e.slice(t,s);if(t<0&&(t+=n),s<0&&(s+=n),s>n&&(s=n),t>=n||t>=s||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(s-t),r=t,a=0;r<s;r++,a++)o[a]=i[r];return o.buffer}},{}],25:[function(e,t,s){!function(e){"use strict";s.encode=function(t){var s,n=new Uint8Array(t),i=n.length,o="";for(s=0;s<i;s+=3)o+=e[n[s]>>2],o+=e[(3&n[s])<<4|n[s+1]>>4],o+=e[(15&n[s+1])<<2|n[s+2]>>6],o+=e[63&n[s+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},s.decode=function(t){var s,n,i,o,r,a=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var d=new ArrayBuffer(a),u=new Uint8Array(d);for(s=0;s<l;s+=4)n=e.indexOf(t[s]),i=e.indexOf(t[s+1]),o=e.indexOf(t[s+2]),r=e.indexOf(t[s+3]),u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|o>>2,u[c++]=(3&o)<<6|63&r;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(e,t,s){(function(e){function s(e,t){t=t||{};for(var s=new n,i=0;i<e.length;i++)s.append(e[i]);return t.type?s.getBlob(t.type):s.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{return 2==new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;t.exports=i?e.Blob:o?s:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,s){(function(e){!function(n){function i(e){for(var t,s,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(s=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&s)+65536):(n.push(t),i--):n.push(t);return n}function o(e){for(var t,s=e.length,n=-1,i="";++n<s;)(t=e[n])>65535&&(i+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=m(t);return i}function r(e,t){return m(e>>t&63|128)}function a(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=r(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=r(e,12),t+=r(e,6)),t+=m(63&e|128)}function l(){if(f>=g)throw Error("Invalid byte index");var e=255&p[f];if(f++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,t,s,n,i;if(f>g)throw Error("Invalid byte index");if(f==g)return!1;if(e=255&p[f],f++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|(t=l()))>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=l(),s=l(),(i=(15&e)<<12|t<<6|s)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=l(),s=l(),n=l(),(i=(15&e)<<18|t<<12|s<<6|n)>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}var d="object"==typeof s&&s,u="object"==typeof t&&t&&t.exports==d&&t,h="object"==typeof e&&e;h.global!==h&&h.window!==h||(n=h);var p,g,f,m=String.fromCharCode,w={version:"2.0.0",encode:function(e){for(var t=i(e),s=t.length,n=-1,o="";++n<s;)o+=a(t[n]);return o},decode:function(e){p=i(e),g=p.length,f=0;for(var t,s=[];!1!==(t=c());)s.push(t);return o(s)}};if(d&&!d.nodeType)if(u)u.exports=w;else{var v={}.hasOwnProperty;for(var b in w)v.call(w,b)&&(d[b]=w[b])}else n.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,s){(function(e){var s=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(r,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):s.test(t.replace(n,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,s){s.encode=function(e){var t="";for(var s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t},s.decode=function(e){for(var t={},s=e.split("&"),n=0,i=s.length;n<i;n++){var o=s[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],30:[function(e,t,s){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,s=e.indexOf("["),o=e.indexOf("]");-1!=s&&-1!=o&&(e=e.substring(0,s)+e.substring(s,o).replace(/:/g,";")+e.substring(o,e.length));for(var r=n.exec(e||""),a={},l=14;l--;)a[i[l]]=r[l]||"";return-1!=s&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],31:[function(e,t,s){function n(e,t,s){return t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],32:[function(e,t,s){(function(s){var n=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(s.Buffer&&s.Buffer.isBuffer(e)||s.ArrayBuffer&&e instanceof ArrayBuffer||s.Blob&&e instanceof Blob||s.File&&e instanceof File)return!0;if(n(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(e,t,s){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(e,t,s){var n=e("global");try{t.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(e){t.exports=!1}},{global:35}],35:[function(e,t,s){t.exports=function(){return this}()},{}],36:[function(e,t,s){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var s=0;s<e.length;++s)if(e[s]===t)return s;return-1}},{}],37:[function(e,t,s){var n=Object.prototype.hasOwnProperty;s.keys=Object.keys||function(e){var t=[];for(var s in e)n.call(e,s)&&t.push(s);return t},s.values=function(e){var t=[];for(var s in e)n.call(e,s)&&t.push(e[s]);return t},s.merge=function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);return e},s.length=function(e){return s.keys(e).length},s.isEmpty=function(e){return 0==s.length(e)}},{}],38:[function(e,t,s){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=n.exec(e||""),s={},o=14;o--;)s[i[o]]=t[o]||"";return s}},{}],39:[function(e,t,s){(function(t){var n=e("isarray"),i=e("./is-buffer");s.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:s.length};return s.push(e),o}if(n(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=t(e[a]);return r}if("object"==typeof e&&!(e instanceof Date)){r={};for(var l in e)r[l]=t(e[l]);return r}return e}var s=[],o=e.data,r=e;return r.data=t(o),r.attachments=s.length,{packet:r,buffers:s}},s.reconstructPacket=function(e,t){function s(e){if(e&&e._placeholder)return t[e.num];if(n(e)){for(var i=0;i<e.length;i++)e[i]=s(e[i]);return e}if(e&&"object"==typeof e){for(var o in e)e[o]=s(e[o]);return e}return e}return e.data=s(e.data),e.attachments=void 0,e},s.removeBlobs=function(e,s){function o(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){r++;var d=new FileReader;d.onload=function(){c?c[l]=this.result:a=this.result,--r||s(a)},d.readAsArrayBuffer(e)}else if(n(e))for(var u=0;u<e.length;u++)o(e[u],u,e);else if(e&&"object"==typeof e&&!i(e))for(var h in e)o(e[h],h,e)}var r=0,a=e;o(a),r||s(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(e,t,s){function n(){}function i(e){var t="",n=!1;return t+=e.type,s.BINARY_EVENT!=e.type&&s.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=u.stringify(e.data)),d("encoded %j as %s",e,t),t}function o(e,t){p.removeBlobs(e,function(e){var s=p.deconstructPacket(e),n=i(s.packet),o=s.buffers;o.unshift(n),t(o)})}function r(){this.reconstructor=null}function a(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==s.types[t.type])return c();if(s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n&&","!=(o=e.charAt(n))&&(t.nsp+=o,n+1!=e.length););else t.nsp="/";var i=e.charAt(n+1);if(""!=i&&Number(i)==i){for(t.id="";++n;){var o=e.charAt(n);if(null==o||Number(o)!=o){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=u.parse(e.substr(n))}catch(e){return c()}return d("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:s.ERROR,data:"parser error"}}var d=e("debug")("socket.io-parser"),u=e("json3"),h=(e("isarray"),e("component-emitter")),p=e("./binary"),g=e("./is-buffer");s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=n,s.Decoder=r,n.prototype.encode=function(e,t){d("encoding packet %j",e),s.BINARY_EVENT==e.type||s.BINARY_ACK==e.type?o(e,t):t([i(e)])},h(r.prototype),r.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type?(this.reconstructor=new l(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},r.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(e,t,s){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,s){t.exports=e(33)},{}],43:[function(e,t,s){!function(e){function t(e){if(t[e]!==o)return t[e];var s;if("bug-string-char-index"==e)s="a"!="a"[0];else if("json"==e)s=t("json-stringify")&&t("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=l.stringify,d="function"==typeof a&&c;if(d){(n=function(){return 1}).toJSON=n;try{d="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(r)===o&&a(o)===o&&a()===o&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([o])&&"null"==a(null)&&"[null,null,null]"==a([o,r,null])&&a({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(e){d=!1}}s=d}if("json-parse"==e){var u=l.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var h=5==(n=u(i)).a.length&&1===n.a[0];if(h){try{h=!u('"\t"')}catch(e){}if(h)try{h=1!==u("01")}catch(e){}if(h)try{h=1!==u("1.")}catch(e){}}}}catch(e){h=!1}s=h}}return t[e]=!!s}var n,i,o,r={}.toString,a="object"==typeof JSON&&JSON,l="object"==typeof s&&s&&!s.nodeType&&s;l&&a?(l.stringify=a.stringify,l.parse=a.parse):l=e.JSON=a||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(e){}if(!t("json")){var d=t("bug-string-char-index");if(!c)var u=Math.floor,h=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return h[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var t,s={};return(s.__proto__=null,s.__proto__={toString:1},s).toString!=r?n=function(e){var t=this.__proto__,s=e in(this.__proto__=null,this);return this.__proto__=t,s}:(t=s.constructor,n=function(e){var s=(this.constructor||t).prototype;return e in this&&!(e in s&&this[e]===s[e])}),s=null,n.call(this,e)});var g={boolean:1,number:1,string:1,undefined:1},f=function(e,t){var s=typeof e[t];return"object"==s?!!e[t]:!g[s]};if(i=function(e,t){var s,o,a,l=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,o=new s;for(a in o)n.call(o,a)&&l++;return s=o=null,l?i=2==l?function(e,t){var s,i={},o="[object Function]"==r.call(e);for(s in e)o&&"prototype"==s||n.call(i,s)||!(i[s]=1)||!n.call(e,s)||t(s)}:function(e,t){var s,i,o="[object Function]"==r.call(e);for(s in e)o&&"prototype"==s||!n.call(e,s)||(i="constructor"===s)||t(s);(i||n.call(e,s="constructor"))&&t(s)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(e,t){var s,i,a="[object Function]"==r.call(e),l=!a&&"function"!=typeof e.constructor&&f(e,"hasOwnProperty")?e.hasOwnProperty:n;for(s in e)a&&"prototype"==s||!l.call(e,s)||t(s);for(i=o.length;s=o[--i];l.call(e,s)&&t(s));}),i(e,t)},!t("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w=function(e,t){return("000000"+(t||0)).slice(-e)},v=function(e){var t,s='"',n=0,i=e.length,o=i>10&&d;for(o&&(t=e.split(""));n<i;n++){var r=e.charCodeAt(n);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:s+=m[r];break;default:if(r<32){s+="\\u00"+w(2,r.toString(16));break}s+=o?t[n]:d?e.charAt(n):e[n]}}return s+'"'},b=function(e,t,s,a,l,c,d){var h,g,f,m,y,k,x,T,C,_,S,D,O,E,I,M;try{h=t[e]}catch(e){}if("object"==typeof h&&h)if("[object Date]"!=(g=r.call(h))||n.call(h,"toJSON"))"function"==typeof h.toJSON&&("[object Number]"!=g&&"[object String]"!=g&&"[object Array]"!=g||n.call(h,"toJSON"))&&(h=h.toJSON(e));else if(h>-1/0&&h<1/0){if(p){for(y=u(h/864e5),f=u(y/365.2425)+1970-1;p(f+1,0)<=y;f++);for(m=u((y-p(f,0))/30.42);p(f,m+1)<=y;m++);y=1+y-p(f,m),x=u((k=(h%864e5+864e5)%864e5)/36e5)%24,T=u(k/6e4)%60,C=u(k/1e3)%60,_=k%1e3}else f=h.getUTCFullYear(),m=h.getUTCMonth(),y=h.getUTCDate(),x=h.getUTCHours(),T=h.getUTCMinutes(),C=h.getUTCSeconds(),_=h.getUTCMilliseconds();h=(f<=0||f>=1e4?(f<0?"-":"+")+w(6,f<0?-f:f):w(4,f))+"-"+w(2,m+1)+"-"+w(2,y)+"T"+w(2,x)+":"+w(2,T)+":"+w(2,C)+"."+w(3,_)+"Z"}else h=null;if(s&&(h=s.call(t,e,h)),null===h)return"null";if("[object Boolean]"==(g=r.call(h)))return""+h;if("[object Number]"==g)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==g)return v(""+h);if("object"==typeof h){for(E=d.length;E--;)if(d[E]===h)throw TypeError();if(d.push(h),S=[],I=c,c+=l,"[object Array]"==g){for(O=0,E=h.length;O<E;O++)D=b(O,h,s,a,l,c,d),S.push(D===o?"null":D);M=S.length?l?"[\n"+c+S.join(",\n"+c)+"\n"+I+"]":"["+S.join(",")+"]":"[]"}else i(a||h,function(e){var t=b(e,h,s,a,l,c,d);t!==o&&S.push(v(e)+":"+(l?" ":"")+t)}),M=S.length?l?"{\n"+c+S.join(",\n"+c)+"\n"+I+"}":"{"+S.join(",")+"}":"{}";return d.pop(),M}};l.stringify=function(e,t,s){var n,i,o,a;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==(a=r.call(t)))i=t;else if("[object Array]"==a){o={};for(var l,c=0,d=t.length;c<d;l=t[c++],("[object String]"==(a=r.call(l))||"[object Number]"==a)&&(o[l]=1));}if(s)if("[object Number]"==(a=r.call(s))){if((s-=s%1)>0)for(n="",s>10&&(s=10);n.length<s;n+=" ");}else"[object String]"==a&&(n=s.length<=10?s:s.slice(0,10));return b("",(l={},l[""]=e,l),i,o,n,"",[])}}if(!t("json-parse")){var y,k,x=String.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},C=function(){throw y=k=null,SyntaxError()},_=function(){for(var e,t,s,n,i,o=k,r=o.length;y<r;)switch(i=o.charCodeAt(y)){case 9:case 10:case 13:case 32:y++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=d?o.charAt(y):o[y],y++,e;case 34:for(e="@",y++;y<r;)if((i=o.charCodeAt(y))<32)C();else if(92==i)switch(i=o.charCodeAt(++y)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=T[i],y++;break;case 117:for(t=++y,s=y+4;y<s;y++)(i=o.charCodeAt(y))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||C();e+=x("0x"+o.slice(t,y));break;default:C()}else{if(34==i)break;for(i=o.charCodeAt(y),t=y;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++y);e+=o.slice(t,y)}if(34==o.charCodeAt(y))return y++,e;C();default:if(t=y,45==i&&(n=!0,i=o.charCodeAt(++y)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(y+1))>=48&&i<=57&&C(),n=!1;y<r&&(i=o.charCodeAt(y))>=48&&i<=57;y++);if(46==o.charCodeAt(y)){for(s=++y;s<r&&(i=o.charCodeAt(s))>=48&&i<=57;s++);s==y&&C(),y=s}if(101==(i=o.charCodeAt(y))||69==i){for(43!=(i=o.charCodeAt(++y))&&45!=i||y++,s=y;s<r&&(i=o.charCodeAt(s))>=48&&i<=57;s++);s==y&&C(),y=s}return+o.slice(t,y)}if(n&&C(),"true"==o.slice(y,y+4))return y+=4,!0;if("false"==o.slice(y,y+5))return y+=5,!1;if("null"==o.slice(y,y+4))return y+=4,null;C()}return"$"},S=function(e){var t,s;if("$"==e&&C(),"string"==typeof e){if("@"==(d?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=_());s||(s=!0))s&&(","==e?"]"==(e=_())&&C():C()),","==e&&C(),t.push(S(e));return t}if("{"==e){for(t={};"}"!=(e=_());s||(s=!0))s&&(","==e?"}"==(e=_())&&C():C()),","!=e&&"string"==typeof e&&"@"==(d?e.charAt(0):e[0])&&":"==_()||C(),t[e.slice(1)]=S(_());return t}C()}return e},D=function(e,t,s){var n=O(e,t,s);n===o?delete e[t]:e[t]=n},O=function(e,t,s){var n,o=e[t];if("object"==typeof o&&o)if("[object Array]"==r.call(o))for(n=o.length;n--;)D(o,n,s);else i(o,function(e){D(o,e,s)});return s.call(e,t,o)};l.parse=function(e,t){var s,n;return y=0,k=""+e,s=S(_()),"$"!=_()&&C(),y=k=null,t&&"[object Function]"==r.call(t)?O((n={},n[""]=s,n),"",t):s}}}}(this)},{}],44:[function(e,t,s){t.exports=function(e,t){for(var s=[],n=(t=t||0)||0;n<e.length;n++)s[n-t]=e[n];return s}},{}]},{},[1])(1)}),function(e,t){function s(s,n){function i(e){return le.preferFlash&&ne&&!le.ignoreFlash&&le.flash[e]!==t&&le.flash[e]}function o(e){return function(t){var s=this._s;return s&&s._a?e.call(this,t):null}}this.setupOptions={url:s||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var r,a,l,c,d,u,h,p,g,f,m,w,v,b,y,k,x,T,C,_,S,D,O,E,I,M,P,A,R,N,B,F,L,H,j,U,z,q,W,K,$,V,G,X,Y,Q,J,Z,ee,te,se,ne,ie,oe,re,ae,le=this,ce=null,de=null,ue=navigator.userAgent,he=e.location.href.toString(),pe=document,ge=[],fe=!1,me=!1,we=!1,ve=!1,be=!1,ye=null,ke=null,xe=!1,Te=!1,Ce=0,_e=null,Se=[],De=null,Oe=Array.prototype.slice,Ee=!1,Ie=0,Me=ue.match(/(ipad|iphone|ipod)/i),Pe=ue.match(/android/i),Ae=ue.match(/msie/i),Re=ue.match(/webkit/i),Ne=ue.match(/safari/i)&&!ue.match(/chrome/i),Be=ue.match(/opera/i),Fe=ue.match(/firefox/i),Le=ue.match(/(mobile|pre\/|xoom)/i)||Me||Pe,He=!he.match(/usehtml5audio/i)&&!he.match(/sm2\-ignorebadua/i)&&Ne&&!ue.match(/silk/i)&&ue.match(/OS X 10_6_([3-7])/i),je=pe.hasFocus!==t?pe.hasFocus():null,Ue=Ne&&(pe.hasFocus===t||!pe.hasFocus()),ze=!Ue,qe=/(mp3|mp4|mpa|m4a|m4b)/i,We=pe.location?pe.location.protocol.match(/http/i):null,Ke=We?"":"http://",$e=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Ve="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Ge=RegExp("\\.("+Ve.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!We;var Xe;try{Xe=Audio!==t&&(Be&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(e){Xe=!1}this.hasHTML5=Xe,this.setup=function(e){var s=!le.url;return e!==t&&we&&De&&le.ok(),g(e),e&&(s&&O&&e.url!==t&&le.beginDelayedInit(),!O&&e.url!==t&&"complete"===pe.readyState&&setTimeout(S,1)),le},this.supported=this.ok=function(){return De?we&&!ve:le.useHTML5Audio&&le.hasHTML5},this.getMovie=function(t){return a(t)||pe[t]||e[t]},this.createSound=function(e,s){function n(){return i=j(i),le.sounds[i.id]=new r(i),le.soundIDs.push(i.id),le.sounds[i.id]}var i,o=null;if(!we||!le.ok())return!1;if(s!==t&&(e={id:e,url:s}),i=p(e),i.url=$(i.url),void 0===i.id&&(i.id=le.setupOptions.idPrefix+Ie++),z(i.id,!0))return le.sounds[i.id];if(X(i))(o=n())._setup_html5(i);else{if(le.html5Only||le.html5.usingFlash&&i.url&&i.url.match(/data\:/i))return n();8<u&&null===i.isMovieStar&&(i.isMovieStar=!(!i.serverURL&&!(i.type&&i.type.match($e)||i.url&&i.url.match(Ge)))),i=U(i,void 0),o=n(),8===u?de._createSound(i.id,i.loops||1,i.usePolicyFile):(de._createSound(i.id,i.url,i.usePeakData,i.useWaveformData,i.useEQData,i.isMovieStar,!!i.isMovieStar&&i.bufferTime,i.loops||1,i.serverURL,i.duration||null,i.autoPlay,!0,i.autoLoad,i.usePolicyFile),i.serverURL||(o.connected=!0,i.onconnect&&i.onconnect.apply(o))),!i.serverURL&&(i.autoLoad||i.autoPlay)&&o.load(i)}return!i.serverURL&&i.autoPlay&&o.play(),o},this.destroySound=function(e,t){if(!z(e))return!1;var s,n=le.sounds[e];for(n._iO={},n.stop(),n.unload(),s=0;s<le.soundIDs.length;s++)if(le.soundIDs[s]===e){le.soundIDs.splice(s,1);break}return t||n.destruct(!0),delete le.sounds[e],!0},this.load=function(e,t){return!!z(e)&&le.sounds[e].load(t)},this.unload=function(e){return!!z(e)&&le.sounds[e].unload()},this.onposition=this.onPosition=function(e,t,s,n){return!!z(e)&&le.sounds[e].onposition(t,s,n)},this.clearOnPosition=function(e,t,s){return!!z(e)&&le.sounds[e].clearOnPosition(t,s)},this.start=this.play=function(e,t){var s=null,n=t&&!(t instanceof Object);if(!we||!le.ok())return!1;if(z(e,n))n&&(t={url:t});else{if(!n)return!1;n&&(t={url:t}),t&&t.url&&(t.id=e,s=le.createSound(t).play())}return null===s&&(s=le.sounds[e].play(t)),s},this.setPosition=function(e,t){return!!z(e)&&le.sounds[e].setPosition(t)},this.stop=function(e){return!!z(e)&&le.sounds[e].stop()},this.stopAll=function(){for(var e in le.sounds)le.sounds.hasOwnProperty(e)&&le.sounds[e].stop()},this.pause=function(e){return!!z(e)&&le.sounds[e].pause()},this.pauseAll=function(){var e;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].pause()},this.resume=function(e){return!!z(e)&&le.sounds[e].resume()},this.resumeAll=function(){var e;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].resume()},this.togglePause=function(e){return!!z(e)&&le.sounds[e].togglePause()},this.setPan=function(e,t){return!!z(e)&&le.sounds[e].setPan(t)},this.setVolume=function(e,t){return!!z(e)&&le.sounds[e].setVolume(t)},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return!!z(e)&&le.sounds[e].mute();for(t=le.soundIDs.length-1;0<=t;t--)le.sounds[le.soundIDs[t]].mute();return le.muted=!0},this.muteAll=function(){le.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return!!z(e)&&le.sounds[e].unmute();for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].unmute();return le.muted=!1,!0},this.unmuteAll=function(){le.unmute()},this.toggleMute=function(e){return!!z(e)&&le.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return de&&8!==u&&(e=parseInt(de._getMemoryUse(),10)),e},this.disable=function(s){var n;if(s===t&&(s=!1),ve)return!1;for(ve=!0,n=le.soundIDs.length-1;0<=n;n--)R(le.sounds[le.soundIDs[n]]);return h(s),te.remove(e,"load",v),!0},this.canPlayMIME=function(e){var t;return le.hasHTML5&&(t=Y({type:e})),!t&&De&&(t=e&&le.ok()?!!(8<u&&e.match($e)||e.match(le.mimePattern)):null),t},this.canPlayURL=function(e){var t;return le.hasHTML5&&(t=Y({url:e})),!t&&De&&(t=e&&le.ok()?!!e.match(le.filePattern):null),t},this.canPlayLink=function(e){return!(e.type===t||!e.type||!le.canPlayMIME(e.type))||le.canPlayURL(e.href)},this.getSoundById=function(e,t){return e?le.sounds[e]:null},this.onready=function(t,s){if("function"!=typeof t)throw F("needFunction","onready");return s||(s=e),m("onready",t,s),w(),!0},this.ontimeout=function(t,s){if("function"!=typeof t)throw F("needFunction","ontimeout");return s||(s=e),m("ontimeout",t,s),w({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(e,t){return!0},this._debug=function(){},this.reboot=function(t,s){var n,i,o;for(n=le.soundIDs.length-1;0<=n;n--)le.sounds[le.soundIDs[n]].destruct();if(de)try{Ae&&(ke=de.innerHTML),ye=de.parentNode.removeChild(de)}catch(e){}if(ke=ye=De=de=null,le.enabled=O=we=xe=Te=fe=me=ve=Ee=le.swfLoaded=!1,le.soundIDs=[],le.sounds={},Ie=0,t)ge=[];else for(n in ge)if(ge.hasOwnProperty(n))for(i=0,o=ge[n].length;i<o;i++)ge[n][i].fired=!1;return le.html5={usingFlash:null},le.flash={},le.html5Only=!1,le.ignoreFlash=!1,e.setTimeout(function(){_(),s||le.beginDelayedInit()},20),le},this.reset=function(){return le.reboot(!0,!0)},this.getMoviePercent=function(){return de&&"PercentLoaded"in de?de.PercentLoaded():null},this.beginDelayedInit=function(){be=!0,S(),setTimeout(function(){return!Te&&(I(),C(),Te=!0)},20),b()},this.destruct=function(){le.disable(!0)},r=function(e){var s,n,i,o,r,a,l,c,d,h,g,f=this,m=!1,w=[],v=0,b=null;n=s=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=p(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=!this.url,this.id3={},this._debug=function(){},this.load=function(e){var s;if(e!==t?f._iO=p(e,f.options):(e=f.options,f._iO=e,b&&b!==f.url&&(f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=$(f._iO.url),!(s=f.instanceOptions=f._iO).url&&!f.url)return f;if(s.url===f.url&&0!==f.readyState&&2!==f.readyState)return 3===f.readyState&&s.onload&&ae(f,function(){s.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},X(s))f._setup_html5(s)._called_load||(f._html5_canplay=!1,f.url!==s.url&&(f._a.src=s.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0,s.autoPlay&&f.play());else{if(le.html5Only||f._iO.url&&f._iO.url.match(/data\:/i))return f;try{f.isHTML5=!1,f._iO=U(j(s)),s=f._iO,8===u?de._load(f.id,s.url,s.stream,s.autoPlay,s.usePolicyFile):de._load(f.id,s.url,!!s.stream,!!s.autoPlay,s.loops||1,!!s.autoLoad,s.usePolicyFile)}catch(e){M({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=s.url,f},this.unload=function(){return 0!==f.readyState&&(f.isHTML5?(a(),f._a&&(f._a.pause(),b=J(f._a))):8===u?de._unload(f.id,"about:blank"):de._unload(f.id),i()),f},this.destruct=function(e){f.isHTML5?(a(),f._a&&(f._a.pause(),J(f._a),Ee||r(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,de._destroySound(f.id)),e||le.destroySound(f.id,!0)},this.start=this.play=function(e,s){var n,i,o,r,a;if(i=!0,i=null,s=s===t||s,e||(e={}),f.url&&(f._iO.url=f.url),f._iO=p(f._iO,f.options),f._iO=p(e,f._iO),f._iO.url=$(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||f.setAutoPlay(!0),f;if(X(f._iO)&&(f._setup_html5(f._iO),l()),1===f.playState&&!f.paused&&((n=f._iO.multiShot)||(f.isHTML5&&f.setPosition(f._iO.position),i=f)),null!==i)return i;if(e.url&&e.url!==f.url&&(f.readyState||f.isHTML5||8!==u||!g?f.load(f._iO):g=!1),f.loaded||(0===f.readyState?(f.isHTML5||le.html5Only?f.isHTML5?f.load(f._iO):i=f:(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState&&(i=f)),null!==i)return i;if(!f.isHTML5&&9===u&&0<f.position&&f.position===f.duration&&(e.position=0),f.paused&&0<=f.position&&(!f._iO.serverURL||0<f.position))f.resume();else{if(f._iO=p(e,f._iO),null!==f._iO.from&&null!==f._iO.to&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(n=function(){f._iO=p(e,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(f.load({oncanplay:n}),i=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(f.load({onload:n}),i=!1),null!==i)return i;f._iO=h()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!Ee||!f.isHTML5&&8<u&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&c(f),f.playState=1,f.paused=!1,f.position=f._iO.position===t||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=U(j(f._iO))),f._iO.onplay&&s&&(f._iO.onplay.apply(f),m=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?2>f.instanceCount?(l(),i=f._setup_html5(),f.setPosition(f._iO.position),i.play()):(o=new Audio(f._iO.url),r=function(){te.remove(o,"onended",r),f._onfinish(f),J(o),o=null},a=function(){te.remove(o,"canplay",a);try{o.currentTime=f._iO.position/1e3}catch(e){}o.play()},te.add(o,"ended",r),f._iO.position?te.add(o,"canplay",a):o.play()):(i=de._start(f.id,f._iO.loops||1,9===u?f.position:f.position/1e3,f._iO.multiShot||!1),9===u&&!i&&f._iO.onplayerror&&f._iO.onplayerror.apply(f))}return f},this.stop=function(e){var t=f._iO;return 1===f.playState&&(f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),d(),t.to&&f.clearOnPosition(t.to),f.isHTML5?f._a&&(e=f.position,f.setPosition(0),f.position=e,f._a.pause(),f.playState=0,f._onTimer(),a()):(de._stop(f.id,e),t.serverURL&&f.unload()),f.instanceCount=0,f._iO={},t.onstop&&t.onstop.apply(f)),f},this.setAutoPlay=function(e){f._iO.autoPlay=e,f.isHTML5||(de._setAutoPlay(f.id,e),e&&!f.instanceCount&&1===f.readyState&&f.instanceCount++)},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var s=f.isHTML5?Math.max(e,0):Math.min(f.duration||f._iO.duration,Math.max(e,0));if(f.position=s,e=f.position/1e3,f._resetOnPosition(f.position),f._iO.position=s,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==e)try{f._a.currentTime=e,(0===f.playState||f.paused)&&f._a.pause()}catch(e){}}else if(e)return f;f.paused&&f._onTimer(!0)}}else e=9===u?f.position:e,f.readyState&&2!==f.readyState&&de._setPosition(f.id,e,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(e){return f.paused||0===f.playState&&1!==f.readyState?f:(f.paused=!0,f.isHTML5?(f._setup_html5().pause(),a()):(e||e===t)&&de._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var e=f._iO;return f.paused?(f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&f.setPosition(f.position),de._pause(f.id,e.multiShot)),!m&&e.onplay?(e.onplay.apply(f),m=!0):e.onresume&&e.onresume.apply(f),f):f},this.togglePause=function(){return 0===f.playState?(f.play({position:9!==u||f.isHTML5?f.position/1e3:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(e,s){return e===t&&(e=0),s===t&&(s=!1),f.isHTML5||de._setPan(f.id,e),f._iO.pan=e,s||(f.pan=e,f.options.pan=e),f},this.setVolume=function(e,s){return e===t&&(e=100),s===t&&(s=!1),f.isHTML5?f._a&&(f._a.volume=Math.max(0,Math.min(1,e/100))):de._setVolume(f.id,le.muted&&!f.muted||f.muted?0:e),f._iO.volume=e,s||(f.volume=e,f.options.volume=e),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):de._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var e=f._iO.volume!==t;return f.isHTML5?f._a&&(f._a.muted=!1):de._setVolume(f.id,e?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onposition=this.onPosition=function(e,s,n){return w.push({position:parseInt(e,10),method:s,scope:n!==t?n:f,fired:!1}),f},this.clearOnPosition=function(e,t){var s;if(e=parseInt(e,10),isNaN(e))return!1;for(s=0;s<w.length;s++)e!==w[s].position||t&&t!==w[s].method||(w[s].fired&&v--,w.splice(s,1))},this._processOnPosition=function(){var e,t;if(!(e=w.length)||!f.playState||v>=e)return!1;for(e-=1;0<=e;e--)!(t=w[e]).fired&&f.position>=t.position&&(t.fired=!0,v++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,s;if(!(t=w.length))return!1;for(t-=1;0<=t;t--)(s=w[t]).fired&&e<=s.position&&(s.fired=!1,v--);return!0},h=function(){var e,t,s=f._iO,n=s.from,i=s.to;return t=function(){f.clearOnPosition(i,t),f.stop()},e=function(){null===i||isNaN(i)||f.onPosition(i,t)},null!==n&&!isNaN(n)&&(s.position=n,s.multiShot=!1,e()),s},c=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.onPosition(parseInt(e,10),t[e])},d=function(){var e,t=f._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&f.clearOnPosition(parseInt(e,10))},l=function(){f.isHTML5&&q(f)},a=function(){f.isHTML5&&W(f)},(i=function(e){e||(w=[],v=0),m=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}})(),this._onTimer=function(e){var t,i=!1,o={};if(f._hasTimer||e)return f._a&&(e||(0<f.playState||1===f.readyState)&&!f.paused)&&((t=f._get_html5_duration())!==s&&(s=t,f.duration=t,i=!0),f.durationEstimate=f.duration,(t=1e3*f._a.currentTime||0)!==n&&(n=t,i=!0),(i||e)&&f._whileplaying(t,o,o,o,o)),i},this._get_html5_duration=function(){var e=f._iO;return(e=f._a&&f._a.duration?1e3*f._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,t){e.loop=1<t?"loop":""},this._setup_html5=function(e){e=p(f._iO,e);var t,s=Ee?ce:f._a,n=decodeURI(e.url);if(Ee?n===decodeURI(se)&&(t=!0):n===decodeURI(b)&&(t=!0),s){if(s._s)if(Ee)s._s&&s._s.playState&&!t&&s._s.stop();else if(!Ee&&n===decodeURI(b))return f._apply_loop(s,e.loops),s;t||(i(!1),s.src=e.url,se=b=f.url=e.url,s._called_load=!1)}else f._a=e.autoLoad||e.autoPlay?new Audio(e.url):Be&&10>opera.version()?new Audio(null):new Audio,s=f._a,s._called_load=!1,Ee&&(ce=s);return f.isHTML5=!0,f._a=s,s._s=f,o(),f._apply_loop(s,e.loops),e.autoLoad||e.autoPlay?f.load():(s.autobuffer=!1,s.preload="auto"),s},o=function(){if(f._a._added_events)return!1;var e;f._a._added_events=!0;for(e in re)re.hasOwnProperty(e)&&f._a&&f._a.addEventListener(e,re[e],!1);return!0},r=function(){var e;f._a._added_events=!1;for(e in re)re.hasOwnProperty(e)&&f._a&&f._a.removeEventListener(e,re[e],!1)},this._onload=function(e){var t=!!e||!f.isHTML5&&8===u&&f.duration;return f.loaded=t,f.readyState=t?3:2,f._onbufferchange(0),f._iO.onload&&ae(f,function(){f._iO.onload.apply(f,[t])}),!0},this._onbufferchange=function(e){return!(0===f.playState||e&&f.isBuffering||!e&&!f.isBuffering)&&(f.isBuffering=1===e,f._iO.onbufferchange&&f._iO.onbufferchange.apply(f),!0)},this._onsuspend=function(){return f._iO.onsuspend&&f._iO.onsuspend.apply(f),!0},this._onfailure=function(e,t,s){f.failures++,f._iO.onfailure&&1===f.failures&&f._iO.onfailure(f,e,t,s)},this._onfinish=function(){var e=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(d(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},a(),f.isHTML5&&(f.position=0)),(!f.instanceCount||f._iO.multiShotEvents)&&e&&ae(f,function(){e.apply(f)}))},this._whileloading=function(e,t,s,n){var i=f._iO;f.bytesLoaded=e,f.bytesTotal=t,f.duration=Math.floor(s),f.bufferLength=n,f.durationEstimate=f.isHTML5||i.isMovieStar?f.duration:i.duration?f.duration>i.duration?f.duration:i.duration:parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&i.whileloading&&i.whileloading.apply(f)},this._whileplaying=function(e,s,n,i,o){var r=f._iO;return!isNaN(e)&&null!==e&&(f.position=Math.max(0,e),f._processOnPosition(),!f.isHTML5&&8<u&&(r.usePeakData&&s!==t&&s&&(f.peakData={left:s.leftPeak,right:s.rightPeak}),r.useWaveformData&&n!==t&&n&&(f.waveformData={left:n.split(","),right:i.split(",")}),r.useEQData&&o!==t&&o&&o.leftEQ&&(e=o.leftEQ.split(","),f.eqData=e,f.eqData.left=e,o.rightEQ!==t&&o.rightEQ&&(f.eqData.right=o.rightEQ.split(",")))),1===f.playState&&(!f.isHTML5&&8===u&&!f.position&&f.isBuffering&&f._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(f)),!0)},this._oncaptiondata=function(e){f.captiondata=e,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[e])},this._onmetadata=function(e,t){var s,n,i={};for(s=0,n=e.length;s<n;s++)i[e[s]]=t[s];f.metadata=i,f._iO.onmetadata&&f._iO.onmetadata.apply(f)},this._onid3=function(e,t){var s,n,i=[];for(s=0,n=e.length;s<n;s++)i[e[s]]=t[s];f.id3=p(f.id3,i),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(e){e=1===e,(f.connected=e)&&(f.failures=0,z(f.id)&&(f.getAutoPlay()?f.play(t,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[e]))},this._ondataerror=function(e){0<f.playState&&f._iO.ondataerror&&f._iO.ondataerror.apply(f)}},E=function(){return pe.body||pe._docElement||pe.getElementsByTagName("div")[0]},a=function(e){return pe.getElementById(e)},p=function(e,s){var n,i,o=e||{};n=s===t?le.defaultOptions:s;for(i in n)n.hasOwnProperty(i)&&o[i]===t&&(o[i]="object"!=typeof n[i]||null===n[i]?n[i]:p(o[i],n[i]));return o},ae=function(t,s){t.isHTML5||8!==u?s():e.setTimeout(s,0)},f={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(e,s){var n,i=!0,o=s!==t,r=le.setupOptions;for(n in e)if(e.hasOwnProperty(n))if("object"!=typeof e[n]||null===e[n]||e[n]instanceof Array||e[n]instanceof RegExp)o&&f[s]!==t?le[s][n]=e[n]:r[n]!==t?(le.setupOptions[n]=e[n],le[n]=e[n]):f[n]===t?i=!1:le[n]instanceof Function?le[n].apply(le,e[n]instanceof Array?e[n]:[e[n]]):le[n]=e[n];else{if(f[n]!==t)return g(e[n],n);i=!1}return i},te=function(){function t(e){var t=(e=Oe.call(e)).length;return n?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function s(e,t){var s=e.shift(),o=[i[t]];n?s[o](e[0],e[1]):s[o].apply(s,e)}var n=e.attachEvent,i={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){s(t(arguments),"add")},remove:function(){s(t(arguments),"remove")}}}(),re={abort:o(function(){}),canplay:o(function(){var e,s=this._s;if(s._html5_canplay)return!0;if(s._html5_canplay=!0,s._onbufferchange(0),e=s._iO.position===t||isNaN(s._iO.position)?null:s._iO.position/1e3,s.position&&this.currentTime!==e)try{this.currentTime=e}catch(e){}s._iO._oncanplay&&s._iO._oncanplay()}),canplaythrough:o(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:o(function(){this._s._onfinish()}),error:o(function(){this._s._onload(!1)}),loadeddata:o(function(){var e=this._s;!e._loaded&&!Ne&&(e.duration=e._get_html5_duration())}),loadedmetadata:o(function(){}),loadstart:o(function(){this._s._onbufferchange(1)}),play:o(function(){this._s._onbufferchange(0)}),playing:o(function(){this._s._onbufferchange(0)}),progress:o(function(e){var t,s,n=this._s,i=0,i=e.target.buffered;t=e.loaded||0;var o=e.total||1;if(n.buffered=[],i&&i.length){for(t=0,s=i.length;t<s;t++)n.buffered.push({start:1e3*i.start(t),end:1e3*i.end(t)});i=1e3*(i.end(0)-i.start(0)),t=Math.min(1,i/(1e3*e.target.duration))}isNaN(t)||(n._onbufferchange(0),n._whileloading(t,o,n._get_html5_duration()),t&&o&&t===o&&re.canplaythrough.call(this,e))}),ratechange:o(function(){}),suspend:o(function(e){var t=this._s;re.progress.call(this,e),t._onsuspend()}),stalled:o(function(){}),timeupdate:o(function(){this._s._onTimer()}),waiting:o(function(){this._s._onbufferchange(1)})},X=function(e){return!(!e||!(e.type||e.url||e.serverURL))&&(!(e.serverURL||e.type&&i(e.type))&&(e.type?Y({type:e.type}):Y({url:e.url})||le.html5Only||e.url.match(/data\:/i)))},J=function(e){var t;return e&&(t=Ne&&!Me?null:Fe?"about:blank":null,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),Ee&&(se=null),t},Y=function(e){if(!le.useHTML5Audio||!le.hasHTML5)return!1;var s=e.url||null;e=e.type||null;var n,o=le.audioFormats;if(e&&le.html5[e]!==t)return le.html5[e]&&!i(e);if(!Q){Q=[];for(n in o)o.hasOwnProperty(n)&&(Q.push(n),o[n].related&&(Q=Q.concat(o[n].related)));Q=RegExp("\\.("+Q.join("|")+")(\\?.*)?$","i")}return(n=s?s.toLowerCase().match(Q):null)&&n.length?n=n[1]:e&&(s=e.indexOf(";"),n=(-1!==s?e.substr(0,s):e).substr(6)),n&&le.html5[n]!==t?s=le.html5[n]&&!i(n):(e="audio/"+n,s=le.html5.canPlayType({type:e}),s=(le.html5[n]=s)&&le.html5[e]&&!i(e)),s},ee=function(){function e(e){var t,s,n=t=!1;if(!o||"function"!=typeof o.canPlayType)return t;if(e instanceof Array){for(t=0,s=e.length;t<s;t++)(le.html5[e[t]]||o.canPlayType(e[t]).match(le.html5Test))&&(n=!0,le.html5[e[t]]=!0,le.flash[e[t]]=!!e[t].match(qe));t=n}else e=!(!o||"function"!=typeof o.canPlayType)&&o.canPlayType(e),t=!(!e||!e.match(le.html5Test));return t}if(!le.useHTML5Audio||!le.hasHTML5)return De=le.html5.usingFlash=!0,!1;var s,n,i,o=Audio!==t?Be&&10>opera.version()?new Audio(null):new Audio:null,r={};i=le.audioFormats;for(s in i)if(i.hasOwnProperty(s)&&(n="audio/"+s,r[s]=e(i[s].type),r[n]=r[s],s.match(qe)?(le.flash[s]=!0,le.flash[n]=!0):(le.flash[s]=!1,le.flash[n]=!1),i[s]&&i[s].related))for(n=i[s].related.length-1;0<=n;n--)r["audio/"+i[s].related[n]]=r[s],le.html5[i[s].related[n]]=r[s],le.flash[i[s].related[n]]=r[s];return r.canPlayType=o?e:null,le.html5=p(le.html5,r),le.html5.usingFlash=G(),De=le.html5.usingFlash,!0},T={},F=function(){},j=function(e){return 8===u&&1<e.loops&&e.stream&&(e.stream=!1),e},U=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},l=function(){return!1},R=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l)},N=function(e){e===t&&(e=!1),(ve||e)&&le.disable(e)},B=function(e){if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+le.movieURL,le.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},k=function(){8!==(u=parseInt(le.flashVersion,10))&&9!==u&&(le.flashVersion=u=8);var e=le.debugMode||le.debugFlash?"_debug.swf":".swf";le.useHTML5Audio&&!le.html5Only&&le.audioFormats.mp4.required&&9>u&&(le.flashVersion=u=9),le.version=le.versionNumber+(le.html5Only?" (HTML5-only mode)":9===u?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<u?(le.defaultOptions=p(le.defaultOptions,le.flash9Options),le.features.buffering=!0,le.defaultOptions=p(le.defaultOptions,le.movieStarOptions),le.filePatterns.flash9=RegExp("\\.(mp3|"+Ve.join("|")+")(\\?.*)?$","i"),le.features.movieStar=!0):le.features.movieStar=!1,le.filePattern=le.filePatterns[8!==u?"flash9":"flash8"],le.movieURL=(8===u?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),le.features.peakData=le.features.waveformData=le.features.eqData=8<u},P=function(e,t){if(!de)return!1;de._setPolling(e,t)},A=function(){},z=this.getSoundById,H=function(){var e=[];return le.debugMode&&e.push("sm2_debug"),le.debugFlash&&e.push("flash_debug"),le.useHighPerformance&&e.push("high_performance"),e.join(" ")},L=function(){F("fbHandler");var e=le.getMoviePercent(),t={type:"FLASHBLOCK"};if(le.html5Only)return!1;le.ok()?le.oMC&&(le.oMC.className=[H(),"movieContainer","swf_loaded"+(le.didFlashBlock?" swf_unblocked":"")].join(" ")):(De&&(le.oMC.className=H()+" movieContainer "+(null===e?"swf_timedout":"swf_error")),le.didFlashBlock=!0,w({type:"ontimeout",ignoreInit:!0,error:t}),M(t))},m=function(e,s,n){ge[e]===t&&(ge[e]=[]),ge[e].push({method:s,scope:n||null,fired:!1})},w=function(e){if(e||(e={type:le.ok()?"onready":"ontimeout"}),!we&&e&&!e.ignoreInit||"ontimeout"===e.type&&(le.ok()||ve&&!e.ignoreInit))return!1;var t,s={success:e&&e.ignoreInit?le.ok():!ve},n=e&&e.type?ge[e.type]||[]:[],i=[],s=[s],o=De&&!le.ok();for(e.error&&(s[0].error=e.error),e=0,t=n.length;e<t;e++)!0!==n[e].fired&&i.push(n[e]);if(i.length)for(e=0,t=i.length;e<t;e++)i[e].scope?i[e].method.apply(i[e].scope,s):i[e].method.apply(this,s),o||(i[e].fired=!0);return!0},v=function(){e.setTimeout(function(){le.useFlashBlock&&L(),w(),"function"==typeof le.onload&&le.onload.apply(e),le.waitForWindowLoad&&te.add(e,"load",v)},1)},ie=function(){if(ne!==t)return ne;var s,n=!1,i=navigator,o=i.plugins,r=e.ActiveXObject;if(o&&o.length)(i=i.mimeTypes)&&i["application/x-shockwave-flash"]&&i["application/x-shockwave-flash"].enabledPlugin&&i["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(r!==t&&!ue.match(/MSAppHost/i)){try{s=new r("ShockwaveFlash.ShockwaveFlash")}catch(e){s=null}n=!!s}return ne=n},G=function(){var e,t,s=le.audioFormats;if(Me&&ue.match(/os (1|2|3_0|3_1)/i)?(le.hasHTML5=!1,le.html5Only=!0,le.oMC&&(le.oMC.style.display="none")):!le.useHTML5Audio||le.html5&&le.html5.canPlayType||(le.hasHTML5=!1),le.useHTML5Audio&&le.hasHTML5)for(t in V=!0,s)s.hasOwnProperty(t)&&s[t].required&&(le.html5.canPlayType(s[t].type)?le.preferFlash&&(le.flash[t]||le.flash[s[t].type])&&(e=!0):(V=!1,e=!0));return le.ignoreFlash&&(e=!1,V=!0),le.html5Only=le.hasHTML5&&le.useHTML5Audio&&!e,!le.html5Only},$=function(e){var t,s,n=0;if(e instanceof Array){for(t=0,s=e.length;t<s;t++)if(e[t]instanceof Object){if(le.canPlayMIME(e[t].type)){n=t;break}}else if(le.canPlayURL(e[t])){n=t;break}e[n].url&&(e[n]=e[n].url),e=e[n]}return e},q=function(e){e._hasTimer||(e._hasTimer=!0,!Le&&le.html5PollingInterval&&(null===_e&&0===Ce&&(_e=setInterval(K,le.html5PollingInterval)),Ce++))},W=function(e){e._hasTimer&&(e._hasTimer=!1,!Le&&le.html5PollingInterval&&Ce--)},K=function(){var e;if(null!==_e&&!Ce)return clearInterval(_e),_e=null,!1;for(e=le.soundIDs.length-1;0<=e;e--)le.sounds[le.soundIDs[e]].isHTML5&&le.sounds[le.soundIDs[e]]._hasTimer&&le.sounds[le.soundIDs[e]]._onTimer()},M=function(s){s=s!==t?s:{},"function"==typeof le.onerror&&le.onerror.apply(e,[{type:s.type!==t?s.type:null}]),s.fatal!==t&&s.fatal&&le.disable()},oe=function(){if(!He||!ie())return!1;var e,t,s=le.audioFormats;for(t in s)if(s.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(le.html5[t]=!1,s[t]&&s[t].related))for(e=s[t].related.length-1;0<=e;e--)le.html5[s[t].related[e]]=!1},this._setSandboxType=function(e){},this._externalInterfaceOK=function(e){if(le.swfLoaded)return!1;le.swfLoaded=!0,Ue=!1,He&&oe(),setTimeout(d,Ae?100:1)},I=function(e,s){function n(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(fe&&me)return!1;if(le.html5Only)return k(),le.oMC=a(le.movieID),d(),me=fe=!0,!1;var i,o,r,l=s||le.url,c=le.altURL||l,u=E(),h=H(),p=null,p=(p=pe.getElementsByTagName("html")[0])&&p.dir&&p.dir.match(/rtl/i);if(e=e===t?le.id:e,k(),le.url=B(We?l:c),s=le.url,le.wmode=!le.wmode&&le.useHighPerformance?"transparent":le.wmode,null!==le.wmode&&(ue.match(/msie 8/i)||!Ae&&!le.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Se.push(T.spcWmode),le.wmode=null),u={name:e,id:e,src:s,quality:"high",allowScriptAccess:le.allowScriptAccess,bgcolor:le.bgColor,pluginspage:Ke+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:le.wmode,hasPriority:"true"},le.debugFlash&&(u.FlashVars="debug=1"),le.wmode||delete u.wmode,Ae)l=pe.createElement("div"),o=['<object id="'+e+'" data="'+s+'" type="'+u.type+'" title="'+u.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ke+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',n("movie",s),n("AllowScriptAccess",le.allowScriptAccess),n("quality",u.quality),le.wmode?n("wmode",le.wmode):"",n("bgcolor",le.bgColor),n("hasPriority","true"),le.debugFlash?n("FlashVars",u.FlashVars):"","</object>"].join("");else for(i in l=pe.createElement("embed"),u)u.hasOwnProperty(i)&&l.setAttribute(i,u[i]);if(A(),h=H(),u=E())if(le.oMC=a(le.movieID)||pe.createElement("div"),le.oMC.id)r=le.oMC.className,le.oMC.className=(r?r+" ":"movieContainer")+(h?" "+h:""),le.oMC.appendChild(l),Ae&&(i=le.oMC.appendChild(pe.createElement("div")),i.className="sm2-object-box",i.innerHTML=o),me=!0;else{if(le.oMC.id=le.movieID,le.oMC.className="movieContainer "+h,i=h=null,le.useFlashBlock||(le.useHighPerformance?h={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(h={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},p&&(h.left=Math.abs(parseInt(h.left,10))+"px"))),Re&&(le.oMC.style.zIndex=1e4),!le.debugFlash)for(r in h)h.hasOwnProperty(r)&&(le.oMC.style[r]=h[r]);try{Ae||le.oMC.appendChild(l),u.appendChild(le.oMC),Ae&&(i=le.oMC.appendChild(pe.createElement("div")),i.className="sm2-object-box",i.innerHTML=o),me=!0}catch(e){throw Error(F("domError")+" \n"+e.toString())}}return fe=!0},C=function(){return le.html5Only?(I(),!1):!(de||!le.url)&&((de=le.getMovie(le.id))||(ye?(Ae?le.oMC.innerHTML=ke:le.oMC.appendChild(ye),ye=null,fe=!0):I(le.id,le.url),de=le.getMovie(le.id)),"function"==typeof le.oninitmovie&&setTimeout(le.oninitmovie,1),!0)},b=function(){setTimeout(y,1e3)},y=function(){var t,s=!1;return!(!le.url||xe)&&(xe=!0,te.remove(e,"load",b),!(Ue&&!je)&&(we||0<(t=le.getMoviePercent())&&100>t&&(s=!0),void setTimeout(function(){if(t=le.getMoviePercent(),s)return xe=!1,e.setTimeout(b,1),!1;!we&&ze&&(null===t?le.useFlashBlock||0===le.flashLoadTimeout?le.useFlashBlock&&L():!le.useFlashBlock&&V?e.setTimeout(function(){le.setup({preferFlash:!1}).reboot(),le.didFlashBlock=!0,le.beginDelayedInit()},1):w({type:"ontimeout",ignoreInit:!0}):0!==le.flashLoadTimeout&&N(!0))},le.flashLoadTimeout)))},x=function(){return je||!Ue?(te.remove(e,"focus",x),!0):(je=ze=!0,xe=!1,b(),te.remove(e,"focus",x),!0)},h=function(t){if(we)return!1;if(le.html5Only)return we=!0,v(),!0;var s,n=!0;return le.useFlashBlock&&le.flashLoadTimeout&&!le.getMoviePercent()||(we=!0,ve&&(s={type:!ne&&De?"NO_FLASH":"INIT_TIMEOUT"})),(ve||t)&&(le.useFlashBlock&&le.oMC&&(le.oMC.className=H()+" "+(null===le.getMoviePercent()?"swf_timedout":"swf_error")),w({type:"ontimeout",error:s,ignoreInit:!0}),M(s),n=!1),ve||(le.waitForWindowLoad&&!be?te.add(e,"load",v):v()),n},c=function(){var e,s=le.setupOptions;for(e in s)s.hasOwnProperty(e)&&(le[e]===t?le[e]=s[e]:le[e]!==s[e]&&(le.setupOptions[e]=le[e]))},d=function(){if(we)return!1;if(le.html5Only)return we||(te.remove(e,"load",le.beginDelayedInit),le.enabled=!0,h()),!0;C();try{de._externalInterfaceTest(!1),P(!0,le.flashPollingInterval||(le.useHighPerformance?10:50)),le.debugMode||de._disableDebug(),le.enabled=!0,le.html5Only||te.add(e,"unload",l)}catch(e){return M({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),N(!0),h(),!1}return h(),te.remove(e,"load",le.beginDelayedInit),!0},S=function(){return!O&&(O=!0,c(),A(),!ne&&le.hasHTML5&&le.setup({useHTML5Audio:!0,preferFlash:!1}),ee(),!ne&&De&&(Se.push(T.needFlash),le.setup({flashLoadTimeout:1})),pe.removeEventListener&&pe.removeEventListener("DOMContentLoaded",S,!1),C(),!0)},Z=function(){return"complete"===pe.readyState&&(S(),pe.detachEvent("onreadystatechange",Z)),!0},D=function(){be=!0,te.remove(e,"load",D)},(_=function(){Le&&(le.setupOptions.useHTML5Audio=!0,le.setupOptions.preferFlash=!1,Me||Pe&&!ue.match(/android\s2\.3/i))&&(Me&&(le.ignoreFlash=!0),Ee=!0)})(),ie(),te.add(e,"focus",x),te.add(e,"load",b),te.add(e,"load",D),pe.addEventListener?pe.addEventListener("DOMContentLoaded",S,!1):pe.attachEvent?pe.attachEvent("onreadystatechange",Z):M({type:"NO_DOM2_EVENTS",fatal:!0})}var n=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(n=new s),e.SoundManager=s,e.soundManager=n}(window),function(e,t,s){!function(){var n,i,o,r="sw-datepicker",a=!1,l={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},c={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},d=function(e,i){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},l,i,this.$el.data()),n==s&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()};(o=d).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){a||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".sw-datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".sw-datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(e).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=t.fn.datepicker.language[e],this.loc||(this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[e])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var s=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(s("aa"))||this.loc.timeFormat.match(s("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){a=!0,n.append('<div class="sw-datepickers-container" id="sw-datepickers-container"></div>'),i=t("#sw-datepickers-container")},_buildBaseHtml:function(){var e,s=t('<div class="sw-datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?s.insertAfter(this.$el):i:s.appendTo(this.$el),this.$datepicker=t('<div class="sw-datepicker"><i class="sw-datepicker--pointer"></i><nav class="sw-datepicker--nav"></nav><div class="sw-datepicker--content"></div></div>').appendTo(e),this.$content=t(".sw-datepicker--content",this.$datepicker),this.$nav=t(".sw-datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,s=o.getParsedDate(t[0]),n=this,i=new Date(s.year,s.month,s.date,s.hours,s.minutes);e=t.map(function(e){return n.formatDate(n.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(i=t.map(function(e){var t=o.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)})),this._prevOnSelectValue=e,this.opts.onSelect(e,i,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var s,n=e,i=this._getWordBoundaryRegExp,r=this.loc,a=o.getLeadingZeroNum,l=o.getDecade(t),c=o.getParsedDate(t),d=c.fullHours,u=c.hours,h=e.match(i("aa"))||e.match(i("AA")),p="am",g=this._replacer;switch(this.opts.timepicker&&this.timepicker&&h&&(s=this.timepicker._getValidHoursFromDate(t,h),d=a(s.hours),u=s.hours,p=s.dayPeriod),!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/aa/.test(n):n=g(n,i("aa"),p);case/AA/.test(n):n=g(n,i("AA"),p.toUpperCase());case/dd/.test(n):n=g(n,i("dd"),c.fullDate);case/d/.test(n):n=g(n,i("d"),c.date);case/DD/.test(n):n=g(n,i("DD"),r.days[c.day]);case/D/.test(n):n=g(n,i("D"),r.daysShort[c.day]);case/mm/.test(n):n=g(n,i("mm"),c.fullMonth);case/m/.test(n):n=g(n,i("m"),c.month+1);case/MM/.test(n):n=g(n,i("MM"),this.loc.months[c.month]);case/M/.test(n):n=g(n,i("M"),r.monthsShort[c.month]);case/ii/.test(n):n=g(n,i("ii"),c.fullMinutes);case/i/.test(n):n=g(n,i("i"),c.minutes);case/hh/.test(n):n=g(n,i("hh"),d);case/h/.test(n):n=g(n,i("h"),u);case/yyyy/.test(n):n=g(n,i("yyyy"),c.year);case/yyyy1/.test(n):n=g(n,i("yyyy1"),l[0]);case/yyyy2/.test(n):n=g(n,i("yyyy2"),l[1]);case/yy/.test(n):n=g(n,i("yy"),c.year.toString().slice(-2))}return n},_replacer:function(e,t,s){return e.replace(t,function(e,t,n,i){return t+s+i})},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,s=t.opts,n=t.parsedDate,i=t.selectedDates.length,r="";if(Array.isArray(e))e.forEach(function(e){t.selectDate(e)});else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=n.month&&s.moveToOtherMonthsOnSelect&&(r=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&s.moveToOtherYearsOnSelect&&(r=new Date(e.getFullYear(),0,1)),r&&(t.silent=!0,t.date=r,t.silent=!1,t.nav._render()),s.multipleDates&&!s.range){if(i===s.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else s.range?2==i?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==i?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,o.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),s.onSelect&&t._triggerOnChange(),s.autoClose&&!this.timepickerIsActive&&(s.multipleDates||s.range?s.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,s=this;if(e instanceof Date)return t.some(function(n,i){if(o.isSame(n,e))return t.splice(i,1),s.selectedDates.length?s.lastSelectedDate=s.selectedDates[s.selectedDates.length-1]:(s.minRange="",s.maxRange="",s.lastSelectedDate=""),s.views[s.currentView]._render(),s._setInputValue(),s.opts.onSelect&&s._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,s){var n=arguments.length,i=this.lastSelectedDate;return 2==n?this.opts[e]=s:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(i&&this.timepicker._handleDate(i),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),i&&(i.setHours(this.timepicker.hours),i.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){var s=!1;return this.selectedDates.some(function(n){if(o.isSame(n,e,t))return s=n,!0}),s},_setInputValue:function(){var e,t=this,s=t.opts,n=t.loc.dateFormat,i=s.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(n,e)});s.altField&&t.$altField.length&&(e=this.selectedDates.map(function(e){return t.formatDate(i,e)}),e=e.join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var s=e.getTime(),n=o.getParsedDate(e),i=o.getParsedDate(this.minDate),r=o.getParsedDate(this.maxDate),a=new Date(n.year,n.month,i.date).getTime(),l=new Date(n.year,n.month,r.date).getTime(),c={day:s>=this.minTime&&s<=this.maxTime,month:a>=this.minTime&&l<=this.maxTime,year:n.year>=i.year&&n.year<=r.year};return t?c[t]:c.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,i=e.data("month")==s?t.month:e.data("month"),o=e.data("date")||1;return new Date(n,i,o)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],s="sw-datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(s+=" active"),this.$datepicker.removeAttr("class").addClass(s)},setPosition:function(e){e=e||this.opts.position;var t,s,n=this._getDimensions(this.$el),i=this._getDimensions(this.$datepicker),o=e.split(" "),r=this.opts.offset,a=o[0],l=o[1];switch(a){case"top":t=n.top-i.height-r;break;case"right":s=n.left+n.width+r;break;case"bottom":t=n.top+n.height+r;break;case"left":s=n.left-i.width-r}switch(l){case"top":t=n.top;break;case"right":s=n.left+n.width-i.width;break;case"bottom":t=n.top+n.height-i.height;break;case"left":s=n.left;break;case"center":/left|right/.test(a)?t=n.top+n.height/2-i.height/2:s=n.left+n.width/2-i.width/2}this.$datepicker.css({left:s,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var s="up"==t?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[s]},_handleHotKey:function(e){var t,s,n,i=o.getParsedDate(this._getFocusedDate()),r=this.opts,a=!1,l=!1,c=!1,d=i.year,u=i.month,h=i.date;switch(e){case"ctrlRight":case"ctrlUp":u+=1,a=!0;break;case"ctrlLeft":case"ctrlDown":u-=1,a=!0;break;case"shiftRight":case"shiftUp":l=!0,d+=1;break;case"shiftLeft":case"shiftDown":l=!0,d-=1;break;case"altRight":case"altUp":c=!0,d+=10;break;case"altLeft":case"altDown":c=!0,d-=10;break;case"ctrlShiftUp":this.up()}n=o.getDaysCount(new Date(d,u)),s=new Date(d,u,h),n<h&&(h=n),s.getTime()<this.minTime?s=this.minDate:s.getTime()>this.maxTime&&(s=this.maxDate),this.focused=s,t=o.getParsedDate(s),a&&r.onChangeMonth&&r.onChangeMonth(t.month,t.year),l&&r.onChangeYear&&r.onChangeYear(t.year),c&&r.onChangeDecade&&r.onChangeDecade(this.curDecade)},_registerKey:function(e){this.keys.some(function(t){return t==e})||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,s=this,n=this.keys.sort();for(var i in c)e=c[i],n.length==e.length&&e.every(function(e,t){return e==n[t]})&&(s._trigger("hotKey",i),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var s=o.getParsedDate(this._getFocusedDate()),n=s.year,i=s.month,r=s.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(r-=1),"month"==t&&(i-=1),"year"==t&&(n-=1);break;case 38:"day"==t&&(r-=7),"month"==t&&(i-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(r+=1),"month"==t&&(i+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(r+=7),"month"==t&&(i+=3),"year"==t&&(n+=4)}var a=new Date(n,i,r);a.getTime()<this.minTime?a=this.minDate:a.getTime()>this.maxTime&&(a=this.maxDate),this.focused=a}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,s){s=s||this.cellType;var n,i=o.getParsedDate(e),r='.sw-datepicker--cell[data-year="'+i.year+'"]';switch(s){case"month":r='[data-month="'+i.month+'"]';break;case"day":r+='[data-month="'+i.month+'"][data-date="'+i.date+'"]'}return(n=this.views[this.currentView].$el.find(r)).length?n:t("")},destroy:function(){var e=this;e.$el.off(".adp").data("sw-datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".sw-datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var s=this._isSelected(this.focused,this.cellType);if(!s)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(s,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var s=t(e.target).closest(".sw-datepicker--cell"),n=this._getDateFromCell(s);this.silent=!0,this.focused&&(this.focused=""),s.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){t(e.target).closest(".sw-datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,s){var n=new Date,i=!1;this.selectedDates.length&&(i=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(s),i||this._getCell(n).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new t.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=o.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=o.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},o.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},o.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},o.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,function(e,s){if(t[s]||0===t[s])return t[s]})},o.isSame=function(e,t,s){if(!e||!t)return!1;var n=o.getParsedDate(e),i=o.getParsedDate(t),r=s||"day";return{day:n.date==i.date&&n.month==i.month&&n.year==i.year,month:n.month==i.month&&n.year==i.year,year:n.year==i.year}[r]},o.less=function(e,t,s){return!(!e||!t)&&t.getTime()<e.getTime()},o.bigger=function(e,t,s){return!(!e||!t)&&t.getTime()>e.getTime()},o.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},o.resetTime=function(e){if("object"==typeof e)return e=o.getParsedDate(e),new Date(e.year,e.month,e.date)},t.fn.datepicker=function(e){return this.each(function(){if(t.data(this,r)){var s=t.data(this,r);s.opts=t.extend(!0,s.opts,e),s.update()}else t.data(this,r,new d(this,e))})},t.fn.datepicker.Constructor=d,t.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t(function(){t(".sw-datepicker-here").datepicker()})}(),function(){var e={days:'<div class="sw-datepicker--days sw-datepicker--body"><div class="sw-datepicker--days-names"></div><div class="sw-datepicker--cells sw-datepicker--cells-days"></div></div>',months:'<div class="sw-datepicker--months sw-datepicker--body"><div class="sw-datepicker--cells sw-datepicker--cells-months"></div></div>',years:'<div class="sw-datepicker--years sw-datepicker--body"><div class="sw-datepicker--cells sw-datepicker--cells-years"></div></div>'},n=t.fn.datepicker,i=n.Constructor;n.Body=function(e,s,n){this.d=e,this.type=s,this.opts=n,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".sw-datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(e[this.type]).appendTo(this.d.$content),this.$names=t(".sw-datepicker--days-names",this.$el),this.$cells=t(".sw-datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,i){return t=t!=s?t:e,n=n||"",(i=i!=s?i:0)>7?n:7==t?this._getDayNamesHtml(e,0,n,++i):(n+='<div class="sw-datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++i))},_getCellContents:function(e,t){var s="sw-datepicker--cell sw-datepicker--cell-"+t,n=new Date,o=this.d,r=i.resetTime(o.minRange),a=i.resetTime(o.maxRange),l=o.opts,c=i.getParsedDate(e),d={},u=c.date;switch(t){case"day":o.isWeekend(c.day)&&(s+=" -weekend-"),c.month!=this.d.parsedDate.month&&(s+=" -other-month-",l.selectOtherMonths||(s+=" -disabled-"),l.showOtherMonths||(u=""));break;case"month":u=o.loc[o.opts.monthsField][c.month];break;case"year":var h=o.curDecade;u=c.year,(c.year<h[0]||c.year>h[1])&&(s+=" -other-decade-",l.selectOtherYears||(s+=" -disabled-"),l.showOtherYears||(u=""))}return l.onRenderCell&&(d=l.onRenderCell(e,t)||{},u=d.html?d.html:u,s+=d.classes?" "+d.classes:""),l.range&&(i.isSame(r,e,t)&&(s+=" -range-from-"),i.isSame(a,e,t)&&(s+=" -range-to-"),1==o.selectedDates.length&&o.focused?((i.bigger(r,e)&&i.less(o.focused,e)||i.less(a,e)&&i.bigger(o.focused,e))&&(s+=" -in-range-"),i.less(a,e)&&i.isSame(o.focused,e)&&(s+=" -range-from-"),i.bigger(r,e)&&i.isSame(o.focused,e)&&(s+=" -range-to-")):2==o.selectedDates.length&&i.bigger(r,e)&&i.less(a,e)&&(s+=" -in-range-")),i.isSame(n,e,t)&&(s+=" -current-"),o.focused&&i.isSame(e,o.focused,t)&&(s+=" -focus-"),o._isSelected(e,t)&&(s+=" -selected-"),o._isInRange(e,t)&&!d.disabled||(s+=" -disabled-"),{html:u,classes:s}},_getDaysHtml:function(e){for(var t,s,n=i.getDaysCount(e),o=new Date(e.getFullYear(),e.getMonth(),1).getDay(),r=new Date(e.getFullYear(),e.getMonth(),n).getDay(),a=o-this.d.loc.firstDay,l=6-r+this.d.loc.firstDay,c="",d=1-(a=a<0?a+7:a),u=n+(l=l>6?l-7:l);d<=u;d++)s=e.getFullYear(),t=e.getMonth(),c+=this._getDayHtml(new Date(s,t,d));return c},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",s=i.getParsedDate(e),n=0;n<12;)t+=this._getMonthHtml(new Date(s.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){var t=(i.getParsedDate(e),i.getDecade(e)),s="",n=t[0]-1;for(n;n<=t[1]+1;n++)s+=this._getYearHtml(new Date(n,0));return s},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var e,s,n,i=this;t(".sw-datepicker--cell",this.$cells).each(function(o,r){s=t(this),n=i.d._getDateFromCell(t(this)),e=i._getCellContents(n,i.d.cellType),s.attr("class",e.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,s=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year,i=this.d;{if(i.view==this.opts.minView){var o=new Date(n,s,t),r=this.d._isSelected(o,this.d.cellType);return r?void i._handleAlreadySelectedDates.bind(i,r,o)():void i._trigger("clickCell",o)}i.down(new Date(n,s,t))}},_onClickCell:function(e){var s=t(e.target).closest(".sw-datepicker--cell");s.hasClass("-disabled-")||this._handleClick.bind(this)(s)}}}(),function(){var e=t.fn.datepicker,s=e.Constructor;e.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},e.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".sw-datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".sw-datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".sw-datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),n=s.template('<div class="sw-datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="sw-datepicker--nav-title">#{title}</div><div class="sw-datepicker--nav-action" data-action="next">#{nextHtml}</div>',t.extend({title:e},this.opts));this.d.$nav.html(n),"years"==this.d.view&&t(".sw-datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var n={action:e,label:this.d.loc[e]},i=s.template('<span class="sw-datepicker--button" data-action="#{action}">#{label}</span>',n);t("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="sw-datepicker--buttons"></div>'),this.$buttonsContainer=t(".sw-datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,n=e.year,i=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(n,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(n,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(n-1,t,i),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+1,t,i),"year")||this._disableNav("next");break;case"years":var o=s.getDecade(this.d.date);this.d._isInRange(new Date(o[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(o[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var s=t(e.target).closest("[data-action]").data("action");this.d[s]()},_onClickNavTitle:function(e){if(!t(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var e=t.fn.datepicker,s=e.Constructor;e.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},e.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=s.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||e.minHours>23?0:e.minHours,this.minMinutes=e.minMinutes<0||e.minMinutes>59?0:e.minMinutes,this.maxHours=e.maxHours<0||e.maxHours>23?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||e.maxMinutes>59?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=s.getLeadingZeroNum,n={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},i=s.template('<div class="sw-datepicker--time"><div class="sw-datepicker--time-current">   <span class="sw-datepicker--time-current-hours">#{hourVisible}</span>   <span class="sw-datepicker--time-current-colon">:</span>   <span class="sw-datepicker--time-current-minutes">#{minValue}</span></div><div class="sw-datepicker--time-sliders">   <div class="sw-datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="sw-datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',n);this.$timepicker=t(i).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$hoursText=t(".sw-datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".sw-datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="sw-datepicker--time-current-ampm">').appendTo(t(".sw-datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=s.getLeadingZeroNum(this.displayHours),t=s.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(s.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):s.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var n=e,i=e;e instanceof Date&&(n=s.getParsedDate(e),i=n.hours);var o="am";if(t||this.d.ampm)switch(!0){case 0==i:i=12;break;case 12==i:o="pm";break;case i>11:i-=12,o="pm"}return{hours:i,dayPeriod:o}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var s=t(e.target),n=s.attr("name");this.d.timepickerIsActive=!0,this[n]=s.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var s=t(e.target).attr("name");t(".sw-datepicker--time-current-"+s,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var s=t(e.target).attr("name");this.d.inFocus||t(".sw-datepicker--time-current-"+s,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,swQ),function(e){function t(e){return JSON.stringify?JSON.stringify(e):JSON.encode?JSON.encode(e):e.toString()}function s(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})}function n(e,t){if("string"!=typeof e&&(e=e.toString()),-1!==e.indexOf("://"))return e;var s="";switch(t){case"viber":s="viber://chat?number="+e;break;case"telegram":s="@"===e.substr(0,1)?"https://t.me/"+e.substring(1):"https://t.me/"+e;break;case"whatsapp":s="https://api.whatsapp.com/send?phone="+e;break;case"vk":s="https://vk.com/"+e;break;case"instagram":s="https://instagram.com/"+e;break;case"link":default:s=e}return s}e.ajaxSetup({async:!0}),e.fn.SW=function(e){if("object"!=typeof e&&e){if("string"==typeof e)return}else if(e.hasOwnProperty("swKey")&&e.hasOwnProperty("swDomainKey")){if("object"==typeof window.swQ.fn.SWD)return;if(void 0!==window.__STREAMWOOD_MUTEX_QP3)return;return window.__STREAMWOOD_MUTEX_QP3=!0,window.swQ.fn.SWD=new i(e),window.swQ.fn.SWD}return this};var i=function(t){this.setLanguages(),this.setConsts(),this.setSettings(),this.setStrings(),this.setSounds(),this.setCallbacks(),e.extend(t,{sessionId:this.getSessionId()||!1,opened:this.getCookie(this.strings.opened),clientName:this.getCookie(this.strings.clientName)||this.settings.clientName,superVisorMode:"true"===this.getCookie(this.strings.isConnection),rating:!0,cursorPosition:{x:0,y:0}}),e.extend(this.settings,t),this.client_server_offset=0,this.initTimeouts(),this.initIntervals(),this.init(),this.Storage=new r,this.page_ident=this.pageIdentGen()};i.prototype.runTrigger=function(e){var t=this,s=Array.prototype.slice.call(arguments,1);this.settings.appEvents.hasOwnProperty(e)&&"function"==typeof this.settings.appEvents[e]&&setTimeout(function(){t.settings.appEvents[e].apply(t,s)},1)},i.prototype.initClientExitTimer=function(e){if(this.settings.design.client_exit_show){switch(this.settings.design.client_exit_show){case 1:case"1":case"recall":if(!this.recallIsEnabled())return;break;case"generator":if(!this.generatorIsEnabled())return}var t=this;this.setTimeout("ClientExitTimer",function(){t.initClientExitEvents.call(t)},e)}},i.prototype.removeClientExitEvents=function(){e("body").off("mouseleave.streamwood"),this.productSetShowTime("client_exit"),this.initClientExitTimer(this.productTimeToShow("client_exit"))},i.prototype.initClientExitEvents=function(){var t=this;e("body").on("mouseleave.streamwood",function(s){if(s.pageY-e(document).scrollTop()<=10&&!t.settings.recallOpened){switch(t.settings.design.client_exit_show){case 1:case"1":case"recall":if(t.settings.recallOpened)return;t.settings.recallSource="leaving",t.showRecall();break;case"generator":if(t.settings.generatorOpened)return;t.showGenerator()}t.removeClientExitEvents.call(t)}})},i.prototype.detachEvents=function(){e(document).off("click.streamwood","a").off("click.streamwood").off("mousemove.streamwood").off("scroll.streamwood").off("show","**").off("hidden","**").off("urlchanged.streamwood"),e(window).off("resize.streamwood").off("hashchange.streamwood").off("load.streamwood")},i.prototype.initEvents=function(){var t=this;this.initClientExitTimer(this.productTimeToShow("client_exit"));var s=document.URL,n=function(e,t){var s=new URL(e),n=new URL(t),i=new URL(s);i.hash="";var o=new URL(n);if(o.hash="",i.toString()!==o.toString())return!1;if(s.hash!==n.hash)switch(n.hash){case"#streamwood-call":case"#streamwood-generator":case"#streamwood-registrator":return n.hash}return!1},i=function(e,s){if("#streamwood-generator"==s){var n=t.settings.design["generator-widget-ancors"];if(Array.isArray(n))return!!n.includes(e)}else if("#streamwood-registrator"==s){var i=t.settings.design["registrator-widget-ancors"];if(Array.isArray(i))return!!i.includes(e)}else if("#streamwood-call"==s)return!1};e(document).on("click.streamwood","a",function(o){var r=e(this);setTimeout(function(){var e=document.URL;if(s!==e){var o=n(s,e);if(s=document.URL,o&&!i(e,o))return!0;var a=new Event("urlchanged");document.dispatchEvent(a)}else{var l=r.closest('a[href*="#"]');if(l.length){var c=l.attr("href"),d=new URL(c,window.location.href).hash;window.location.hash===d&&t.showWidgetByHash(d)}}},300)}).on("urlchanged.streamwood",function(){t.settings.design.ignore_urlchanged||(t.settings.flag_urlchanged=1,t.reload())}).on("mousemove.streamwood",function(e){t.settings.cursorPosition={x:e.pageX,y:e.pageY}}).on("click.streamwood",function(e){t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendClickPosition",x:e.pageX,y:e.pageY}])}).on("scroll.streamwood",function(){if(t.settings.generatorOpened){var s=e(".stream-wood-generator:visible,.stream-wood-generator-2:visible");0!==s.length&&"mobile"!==t.settings.device&&t.setElementTop(s)}t.settings.recallOpened&&t.reposRecall(),t.settings.registratorOpened&&t.reposRegistrator();var n=e(".stream-wood-zalike-window-head").height(),i=e(".stream-wood-zalike-window").height(),o=i-n,r=e(window).scrollTop(),a=e(document).height(),l=e(window).height();r==a-l?t.settings.zalikeAnimating||parseInt(e(".stream-wood-zalike-window").css("bottom"))==-i||(t.settings.zalikeAnimating=!0,e(".stream-wood-zalike-window").animate({bottom:-i},500,function(){t.settings.zalikeAnimating=!1})):0<a-l-r&&(t.settings.zalikeAnimating||parseInt(e(".stream-wood-zalike-window").css("bottom"))==-o||(t.settings.zalikeAnimating=!0,e(".stream-wood-zalike-window").animate({bottom:-o},500,function(){t.settings.zalikeAnimating=!1})))}).on("show",".stream-wood-chat",function(){t.hideBtn(),t.slideDownNoReply(),t.slideDownInvitation(),t.hideRecall()}).on("hidden",".stream-wood-chat",function(){t.showRecallButton(),t.showRegistratorButton(),t.revertChatButtonState()}).on("show",".stream-wood-invitation",function(){t.hideBtn(),t.slideDownNoReply(),t.hideChat(),t.hideRecall(),t.hideRecallButton()}).on("hidden",".stream-wood-invitation",function(){t.showRecallButton(),t.showRegistratorButton(),t.revertChatButtonState()}).on("show",".stream-wood-noreply",function(){t.hideChat(),t.hideBtn(),t.slideDownInvitation(),t.hideRecall()}).on("hidden",".stream-wood-noreply",function(){t.showRecallButton(),t.showRegistratorButton(),t.revertChatButtonState()}).on("show",".stream-wood-registrator",function(){t.multibuttonHide(),t.multibuttonHideV2(),t.hideBtn(),t.hideChat(),t.slideDownInvitation(),t.slideDownNoReply(),t.hideRecallButton(),t.hideRegistratorButton()}).on("hidden",".stream-wood-registrator",function(){t.multibuttonShow(),t.multibuttonShowV2(),t.showRecallButton(),t.showRegistratorButton(),t.revertChatButtonState()}).on("show",".stream-wood-generator,.stream-wood-generator-2",function(){t.multibuttonHide(),t.multibuttonHideV2(),t.hideRecall(),t.hideRegistrator(),t.hideBtn(),t.hideChat(),t.slideDownInvitation(),t.slideDownNoReply(),t.hideRecallButton(),t.hideRegistratorButton()}).on("hidden",".stream-wood-generator,.stream-wood-generator-2",function(){t.multibuttonShow(),t.multibuttonShowV2(),t.showRegistratorButton(),t.showRecallButton(),t.revertChatButtonState()}).on("show",".stream-wood-recall-3",function(){t.multibuttonHide(),t.multibuttonHideV2(),t.hideGenerator(),t.hideRegistrator(),t.hideBtn(),t.hideChat(),t.slideDownInvitation(),t.slideDownNoReply(),t.hideRecallButton(),t.hideRegistratorButton()}).on("hidden",".stream-wood-recall-3",function(){t.multibuttonShow(),t.multibuttonShowV2(),t.showRecallButton(),t.showRegistratorButton(),t.revertChatButtonState()}),e(window).on("resize.streamwood",function(){t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendWindowSize",width:e(document).width(),height:e(document).height(),clientName:t.settings.clientName}]),t.settings.recallOpened&&t.reposRecall(),t.settings.registratorOpened&&t.reposRegistrator();var s=e(".stream-wood-generator:visible,.stream-wood-generator-2:visible");0!==s.length&&t.setElementTop(s),e(".dark-cover-all").height(e(document).height()),t.webpushCheckMobileHide()?e(".webpush-wrap").hide():e(".webpush-wrap").show()}).on("hashchange.streamwood",function(e){var s=new URL(e.originalEvent.newURL),n=s.href,o=s.hash;if(i(n,o))return!0;t.showWidgetByHash(o)}).on("load.streamwood",function(e){t.showWidgetByHash(this.location.hash)}),1==t.settings.flag_urlchanged&&(t.settings.flag_urlchanged,t.showWidgetByHash(window.location.hash))},i.prototype.init=function(){var s=this,n=this.getUrlParts();if(n.hasOwnProperty("nodeId")&&(this.settings.nodeId=n.nodeId||0),n.hasOwnProperty("superVisor")&&1==n.superVisor)this.settings.inFrame=!0;else{var i=this.getDocVars(),o=i.url;/mtproxy\.yandex\.net/.test(o)?this.IOinit():e.ajax({url:this.settings.serverUrl+"/api/",dataType:"jsonp",data:{Action:"load",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:i.url,swReferrer:i.referrer,findOperatorId:this.settings.findOperatorId,findDepartmentId:this.settings.findDepartmentId,findOperatorType:this.settings.findOperatorType,userData:this.settings.userData,Params:t(this.getUrlParts())},success:function(e){e&&e.Success&&(s.removeNodes(),s.load.apply(s,[e]),s.initEvents.call(s),s.runTrigger.apply(s,["onafterload"]))}})}},i.prototype.load=function(t){var s=this;if(t.Success){var n,i,r,a,l,c,d,u;0!=t.Data.settings.servertime&&void 0!==t.Data.settings.servertime?s.setClientServerOffset(t.Data.settings.servertime):s.setClientServerOffset(parseInt(Date.now()/1e3)),s.setSite(t.Data.host),void 0!==t.Data.settings.locale&&this.languages.hasOwnProperty(t.Data.settings.locale)?this.language=t.Data.settings.locale:this.language="ru",this.settings.foreverChat&&(this.settings.hideCloseBtn=1,this.settings.chatOpened=!0),n=this.getSessionId(),this.updateSession(t.Data.sessionId),this.setFirstLoadTime(),this.setInterval("iAmOnline",function(){s.iAmOnline.call(s)},6e4),this.showError();var h=t.Data.clientName||"Гость";if((this.settings.clientName||"Гость")!=h&&(this.settings.clientName=h),this.setCookie(this.strings.clientName,this.settings.clientName),this.createSwBtn(),this.createChat(),"1"==this.getCookie(this.strings.soundOff)&&this.disableSound(),this.reposChat(),t.Data.settings["zalike-show"]&&this.createZalike(),this.settings.crm=t.Data.crm||{cookie:[],getparam:[]},t.Data.settings){this.settings.design=t.Data.settings,this.settings.phonePrefix=this.getPhonePrefixByCountry(this.settings.design["phone-formats"][0]),this.settings.hideAnchor=this.settings.design["anchor-hide"]||this.settings.hideAnchor,this.settings.hideOfflineAnchor=this.settings.design["anchor-offline-hide"]||this.settings.hideOfflineAnchor;var p;p=this.settings.design["anchor-logo-image"]?this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/logo."+this.settings.design["anchor-logo-image"]:this.settings.serverUrl+"/img/icons/logo-default.png",e(".stream-wood-btn").addClass("sw-btn-image").append(e("<div>").addClass("logo-img").append(e('<img class="logo-btn-img" width="33" height="33" alt="">').attr("src",p)))}if(this.createInvitation(),n==this.getSessionId()?this.sendUpdatedStat():this.sendUpdatedStat(!0),this.scrollChatDown(),this.pageIdentAdd(this.page_ident),this.pageIdentGetMainPage()?this.pageIdentObserve():this.pageIdentSetMainPage(this.page_ident),this.settings.ipAddr=t.Data.ipAddr||this.settings.ipAddr,this.settings.nodeId=t.Data.nodeId||0,this.settings.device=t.Data.device,this.settings.tariff=t.Data.tariff,t.Data.departments&&(this.settings.departments=t.Data.departments),t.Data.generator_departments&&(this.settings.generatorDepartments=t.Data.generator_departments),t.Data.registrator_departments&&(this.settings.registratorDepartments=t.Data.registrator_departments),this.managerIsOnline(t.Data.manager))t.Data.hasOwnProperty("messages")&&t.Data.messages.length>0?(this.setManager(t.Data.manager),this.setMessages(t.Data.messages)):(this.settings.rating=!1,this.setManagerNoMessages(t.Data.manager),this.createFirstMessageForm(),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end().find(".sw-send-btn").unbind("click").click(function(){return!1!==s.startDialogContactChooser.call(s)&&(e(".stream-wood-chat .sw-message").val()?(s.showError.call(s),s.setManager.apply(s,[s.settings.manager]),s.sendFirstMessage.call(s)):e(".stream-wood-chat .sw-message").focus(),!1)}),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-chat")));else if(this.settings.departments&&this.getOnlineManagerFromDepartments()&&"1"==this.settings.design.selectType||t.Data.managers&&"2"==this.settings.design.selectType){var g;if(this.settings.rating=!1,l="<dt><span>"+this.languages[this.language].swDepText+'</span><span class="compact"></span></dt><dd>',c=this.languages[this.language].swHelloText,this.settings.departments&&"1"==this.settings.design.selectType){switch(g=this.settings.departments,this.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":r=this.languages[this.language].swChangeManagerText;break;default:r=this.languages[this.language].swChangeDepText}f=this.getOnlineManagerFromDepartments();this.settings.invitationManager=f}else if(t.Data.managers){this.settings.managers=g=t.Data.managers,r=this.languages[this.language].swChangeManagerText;var f=this.arrayFind(this.settings.managers,function(e){return s.managerIsOnline(e)});this.settings.invitationManager=f}switch(this.updateBtn(f||{}),e(".stream-wood-chat .sw-manager").addClass("sw-manager-select").append(e('<p class="sw-title">').text(c)).append(e('<p class="sw-info">').text(r)),u=this.createFirstMessageForm(),i=0,d="checked",this.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":l+="<select name=\"sw-select-department\" class=\"sw-select-manager\" onchange=\"swQ('.stream-wood-chat .sw-select-manager-c').hide();swQ('.stream-wood-chat .sw-select-manager-c input').attr('checked',false);swQ('#mgs_'+this.value).show();swQ('#mgs_'+this.value+' input:first').attr('checked',true);\">",e(this.settings.departments).each(function(){l+='<option value="'+i+'">'+this.name+"</option>",i++}),l+="</select></dd>";var m="";i=0,d="checked",e(this.settings.departments).each(function(){m+='<dl class="sw-select-manager sw-select-manager-c"',0!==i&&(m+=' style="display:none"'),m+=' id="mgs_'+i+'"><dt><span>Отдел</span><span class="compact"></span></dt><dd>';var t=0;e(this.managers).each(function(){this.img=this.getManagerAvatarSrc(this);var e='<img src="'+this.img+'" width="24" height="24" alt=""> ';this.status==s.consts.SW_MANAGER_STATUS_ONLINE||this.from_mobile>0?m+='<label class="sw-manager-img"><input type="radio" name="sw-select-manager" '+d+' value="'+t+'">'+(e+='<img class="sw-status" src="/img/blank.gif" width="10" height="10" alt="">')+this.name+" "+(this.surname||"")+"</option></label>":m+='<label class="sw-manager-img">'+(e+='<img class="sw-status sw-status-offline" src="/img/blank.gif" width="10" height="10" alt="">')+this.name+" "+(this.surname||"")+"</option></label>",t++}),m+="</dd></dl>",d="",i++}),u.find(".sw-newmessage").prepend(m);break;default:1==this.settings.design.operatorShowType?(i=0,e(g).each(function(){i>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager" '+d+' value="'+i+'">'+this.name+" "+(this.surname||"")+"</label>",i++})):(i=0,l+='<select name="sw-select-manager" class="sw-select-manager">',e(g).each(function(){l+='<option value="'+i+'">'+this.name+" "+(this.surname||"")+"</option>",i++}),l+="</select>"),l+="</dd>"}g&&u.find(".sw-newmessage").prepend(e('<dl class="sw-select-manager">').html(l)),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end().find(".sw-send-btn").unbind("click").click(function(){var t=e.trim(e(".stream-wood-chat .sw-message").val());if(e(".stream-wood-chat .sw-message").val()&&0!==t.length){s.showError.call(s);var n;switch(s.settings.swDomainKey){case"894eb64ae457d8d5e251775ba3cec316":n=s.settings.departments[e(".sw-select-manager select").val()].managers[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()];break;default:if(!1===s.startDialogContactChooser.call(s))return!1;if(1==s.settings.design.operatorShowType)s.settings.departments?n=s.settings.departments[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()].manager:s.settings.managers&&(n=s.settings.managers[e('.sw-select-manager input[name="sw-select-manager"]:checked').val()]);else{var i=e(".stream-wood-chat .sw-select-manager select").val();s.settings.departments?s.settings.departments[i].manager?n=s.settings.departments[i].manager:s.settings.departments[i].managers&&(n=s.settings.departments[i].managers[0]):s.settings.managers&&(n=s.settings.managers[i])}}n?(s.setManager.apply(s,[n]),s.sendFirstMessage.call(s)):(s.setNoManager.apply(s),s.slideUpNoReply.call(s))}else e(".stream-wood-chat .sw-message").focus();return!1}),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-chat"))}else{this.setCookie(this.strings.isConnection,"false"),this.settings.superVisorMode=!1,this.settings.rating=!1,this.settings.feedback=!0,this.setNoManager(),e(".stream-wood-chat .sw-sound").hide(),this.settings.design.offlineSelect&&(l="<dt><span>",1==this.settings.design.selectType?(l+=this.languages[this.language].swDepText,this.settings.offline=t.Data.offline_departments):2==this.settings.design.selectType&&(l+=this.languages[this.language].swManagerText,this.settings.offline=t.Data.offline_managers),l+='</span><span class="compact"></span></dt><dd>',i=0,d="checked",1==this.settings.design.operatorShowType?e(this.settings.offline).each(function(e,t){i>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager" '+d+' value="'+this.id+'">'+this.name+"</label>",i++}):(l+='<select name="sw-select-manager" class="sw-offline-select-manager">',1==s.settings.design.selectType?l+='<option value="0">&lt;&lt;выбрать отдел&gt;&gt;</option>':2==s.settings.design.selectType&&(l+='<option value="0">&lt;&lt;выбрать менеджера&gt;&gt;</option>'),e(this.settings.offline).each(function(e,t){1==s.settings.design.selectType?l+='<option value="'+this.id+'">'+this.name+"</option>":2==s.settings.design.selectType&&(l+='<option value="'+this.id+'">'+this.name+" "+(this.surname||"")+"</option>"),i++}),l+="</select>"),l+="</dd>"),this.createFormMessage(e(".stream-wood-chat"),l),e(".stream-wood-chat").find(".sw-send-group").find("span").hide().end().find(".sw-send-btn-text").show().end().end(),this.appendContactInfoProperties(e(".stream-wood-chat")),e(".stream-wood-chat .sw-send-btn").unbind("click").click(function(e){s.sendButtonClick.apply(s,[e])});v=!+this.settings.design.agree_required;+this.settings.design.no_personal_data||o.personal_data(this.settings.design.personal_data_text,v).appendTo(".stream-wood-chat .sw-message-group"),+this.settings.design.advertising_agree&&o.advertising_agree(this.settings.design.advertising_agree_url,v,this.settings.design.advertising_agree_text).appendTo(".stream-wood-chat .sw-message-group")}if("be9c66bcf836bf336a6dc8ac4ee48872"===this.settings.swKey&&$("body").append("<style>.pb-widget.open { z-index: 2147483640 !important; }</style> "),e(".sw-newmessage textarea").keypress(function(t){"1"!=s.settings.design.sendMessageType&&(s.settings.design.sendMessageType||!t.ctrlKey)||13!==t.keyCode&&13!==t.which&&10!==t.keyCode&&10!==t.which||e(".stream-wood-chat .sw-send-btn").click()}),!this.settings.design["collector-hide"]){var w=e(o.noreply);w.appendTo("body"),a=this.settings.design["collector-title"]||this.languages[this.language].swNoReplyText,r=this.settings.design["collector-text"]||this.languages[this.language].swNoReplyContactsText,this.settings.design.offlineSelect&&(1==this.settings.design.selectType?(l="<dt><span>"+this.languages[this.language].swDepText+'</span><span class="compact"></span></dt><dd class="department">',this.settings.offline=t.Data.offline_departments):2==this.settings.design.selectType&&(l="<dt><span>"+this.languages[this.language].swManagerText+'</span><span class="compact"></span></dt><dd class="department">',this.settings.offline=t.Data.offline_managers),i=0,d="checked",1==this.settings.design.operatorShowType?e(this.settings.offline).each(function(){i>0&&(d=""),l+='<label><input type="radio" name="sw-select-manager-noreply" '+d+' value="'+this.id+'">'+this.name+"</option></label>",i++}):(l+='<select name="sw-select-manager-noreply" class="sw-select-manager">',e(this.settings.offline).each(function(){var e=this.name;2==s.settings.design.selectType&&(e+=" "+(this.surname||"")),l+='<option value="'+this.id+'">'+e+"</option>",i++}),l+="</select>"),l+="</dd>"),w.find(".sw-title").text(a),w.find(".sw-info").text(r),this.settings.offline||(l=""),this.createFormMessage(w,l),this.appendContactInfoProperties(w),w.find(".sw-send-btn").unbind("click").click(function(){s.noReplySendButtonClick.call(s)}),w.find(".sw-cancel-btn").unbind("click").click(function(){s.slideDownNoReply.call(s)});var v=!+this.settings.design.agree_required;+this.settings.design.no_personal_data||o.personal_data(this.settings.design.personal_data_text,v).appendTo(".stream-wood-noreply .sw-message-group"),+this.settings.design.advertising_agree&&o.advertising_agree(this.settings.design.advertising_agree_url,v,this.settings.design.advertising_agree_text).appendTo(".stream-wood-noreply .sw-message-group");var b=this.Storage.get(this.strings.firstMessage);b&&!t.Data.messages&&(this.Storage.delete(this.strings.firstMessage),b=null),this.settings.feedback||b&&this.noreplyInitTimer(b),this.reposNoReply()}if(this.generatorIsEnabled()&&(+this.settings.design["generator-new-version"]?this.createNewVersionGenerator():this.createGenerator()),this.recallIsEnabled()&&this.createRecallVersion3(),this.multibuttonIsEnabled()?"mobile"===this.settings.device&&this.settings.design["multibutton-button-mobile-position-active"]&&2==this.settings.design["multibutton-button-mobile-version"]?(this.multibuttonCreateV2(),this.onEvent("loaded",this.multibuttonInitEventsV2),this.multibuttonShowV2()):(this.multibuttonCreate(),this.onEvent("loaded",this.multibuttonInitEvents),this.multibuttonShow()):this.settings.design["multibutton-flag-forbidden-url"]&&(this.settings.design["multibutton-hide-chat-button"]&&(this.settings.hideAnchor=!0,this.hideBtn()),this.settings.design["multibutton-hide-registrator-button"]&&this.onEvent("loaded",function(){e(".strmwd-registrator-btn").remove()}),this.settings.design["multibutton-hide-recall-button"]&&this.onEvent("loaded",function(){e(".stream-wood-recall-btn").remove()})),this.webpushIsEnabled()&&"subscribed"!==s.Storage.get("webpush_subscription")&&s.webpushServiceWorkerCheck()&&!s.webpushCheckMobileHide()&&(e(document).on("click",".stream-wood-webpush-close",function(){return s.webpushModalHide(),!1}),e(document).on("click",".webpush-wrap button",function(){return s.webpushModalHide(),s.Storage.set("webpush_subscription","subscribed"),window.open(s.settings.design["webpush-url"],"_blank","width=630,height=730,top=200,left=200"),s.runTrigger.apply(s,["onafterwebpushclick"]),s.goalIsAchieved("webpush"),!1}),this.webpushInitTimer()),void 0!==this.settings.design["calltracking-on"]&&1==this.settings.design["calltracking-on"]&&this.calltrackingShowPhoneNumber(),this.unibuttonIsEnabled()&&(e(document).on("click",".streamwood-unibutton",function(t){e.ajax({url:s.settings.serverUrl+"/api/",data:{Action:"unibuttonClick",swDomainKey:s.settings.swDomainKey,swKey:s.settings.swKey,swSessionId:s.getSessionId(),swUrl:document.URL},dataType:"jsonp",success:function(){s.goalIsAchieved("unibutton"),s.runTrigger.apply(s,["onafterunibuttonclick"])}})}),e(document).on("click",".streamwood-unibutton .streamwood-unibutton-close",function(e){return e.preventDefault(),e.stopPropagation(),s.unibuttonHide(),!1}),this.unibuttonInitTimer()),this.registratorIsEnabled()&&this.createRegistrator(),e(o.dark_cover_all).height(e(document).height()).hide().appendTo(document.body),this.settings.hideAll)return;if("mobile"!==this.settings.device||this.settings.design.noMobileOptimize)this.setInvitationInfo(),this.invitationInitTimer(),this.settings.design["feedback-invitation-show"]&&(this.settings.design["feedback-invitation-hide"]=0),this.feedbackInitTimer();else{var y=e(".stream-wood-btn");e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply,.stream-wood-btn .logo-img").remove(),y.removeClass("sw-btn-image sw-btn-position-right sw-btn-position-left sw-btn-position-top").css({left:"",right:"",marginRight:""}).addClass("sw-btn-position-bottom"),this.settings.design["anchor-position"]="bottom",y.addClass("stream-wood-mobile-btn").find(".sw-title").addClass("mobile-title").end().find(".sw-status").addClass("mobile-status");var k=this.getMobileHref();y.attr("target","_blank").attr("href",k).unbind("click").click(function(e){e.preventDefault(),s.openMobileChat()}),this.setCookie(this.strings.innerWidth,window.innerWidth),this.setCookie(this.strings.innerHeight,window.innerHeight),this.settings.hideAnchor?this.hideBtn():(this.showBtn(),this.mobileResize())}this.consultantIsEnabled()||(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply,.stream-wood-btn").remove(),this.invitationStopTimer(),this.feedbackStopTimer(),this.hideBtn()),this.settings.feedback||this.IOinit(),this.settings.needBeep&&(this.settings.needBeep=!1,this.playBeep())}else t.Errors?(e.each(t.Errors,function(e,t){s.showError(t+"")}),this.hideBtn(),this.hideChat(),this.showSystemError()):(this.showError("Ошибка в запросе к api методу load"),this.hideBtn(),this.hideChat(),this.showSystemError());var x=this.getCookie(this.strings.rating);x&&0==x?e(".stream-wood-chat .sw-send-group").find(".good").hide().end().find(".bad").addClass("bad-press").attr("title","Изменить оценку").unbind("click").click(function(){if(s.settings.manager)return e(".stream-wood-chat .sw-send-group .bad").removeClass("bad-press"),e(".stream-wood-chat .sw-send-group .good").show(),s.deleteCookie.apply(s,[s.strings.rating]),!1}):x&&1==x&&e(".stream-wood-chat .sw-send-group").find(".bad").hide().end().find(".good").addClass("good-press").attr("title","Изменить оценку").unbind("click").click(function(){if(s.settings.manager)return e(".stream-wood-chat .sw-send-group .good").removeClass("good-press"),e(".stream-wood-chat .sw-send-group .bad").show(),s.deleteCookie.apply(s,[s.strings.rating]),!1}),this.settings.rating||e(".stream-wood-chat .sw-send-group").find(".good,.bad,.sw-upload").hide().end().find(".sw-send-btn").removeClass("sw-send-btn-rating-on"),this.applySettings(),this.settings.chatOpened?(this.slideUp(),this.hideBtn()):this.showBtn(),this.triggerEvent("loaded")},i.prototype.openMobileChat=function(){var e=this,s=this.getMobileHref(),n={crmCookie:t(e.getCookiesForCrm()),crmParam:t(e.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href},i=document.createElement("form");i.style.display="none",i.setAttribute("method","POST"),i.setAttribute("target","streamwood-chat"),i.setAttribute("action",s),Object.keys(n).forEach(function(e){var t=document.createElement("input");t.setAttribute("name",e),t.setAttribute("value",n[e]),i.appendChild(t)}),document.body.appendChild(i),window.open("","streamwood-chat"),i.submit(),document.body.removeChild(i),this.deleteInterval.apply(this,["iAmOnline"])},i.prototype.getMobileHref=function(){var e=this.settings.serverUrl+"/mobile?";return e+="swDomainKey="+this.settings.swDomainKey,e+="&swKey="+this.settings.swKey,e+="&swSessionId="+this.settings.sessionId,e+="&swUrl="+encodeURIComponent(window.location)},i.prototype.getPhonePrefixByCountry=function(e){switch(e){case"kz":case"ru":default:return 7}},i.prototype.showWidgetByHash=function(e){switch(e){case"#streamwood-call":this.settings.recallSource="hash",this.showRecall();break;case"#streamwood-generator":this.generatorIsEnabled()&&this.showGenerator();break;case"#streamwood-registrator":this.registratorIsEnabled()&&this.showRegistrator()}},i.prototype.arrayFind=function(e,t){var s=!1;return e?[].find?e.find(t,this):(e.forEach(function(e){!s&&t.call(this,e)&&(s=e)},this),s):s},i.prototype.getCalltouchSession=function(){var e=window.call_value;if(void 0===e)for(var t=0;t<10;t++)if(void 0!==window["call_value_"+t]){e=window["call_value_"+t];break}return e},i.prototype.getOnlineManagerFromDepartments=function(){var e,t=this;return!this.settings.design.forever_offline&&((e=this.arrayFind(this.settings.departments,function(e){return e.manager&&t.managerIsOnline(e.manager)}))?e=e.manager:this.settings.departments.forEach(function(s){e=t.arrayFind(s.managers,function(e){return t.managerIsOnline(e)})}),e)},i.prototype.removeNodes=function(){e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-btn,.stream-wood-noreply,.stream-wood-registrator,.strmwd-registrator-btn,.stream-wood-generator,.stream-wood-generator-2,.stream-wood-recall-3,.stream-wood-recall-btn,.stream-wood-multibutton-container,.stream-wood-multibutton,.stream-wood-multibutton-menu,.stream_wood_multiv2_container,.dark-cover-all").unbind("*").remove()},i.prototype.unload=function(){this.hideBlur(),this.detachEvents(),this.removeNodes(),this.deleteAllTimeouts.call(this),this.deleteAllIntervals.call(this)},i.prototype.reload=function(e){var t=this;this.setTimeout("reload",function(){t.hideGenerator(),t.hideRegistrator(),t.unload(),t.init()},parseInt(e))},i.prototype.showError=function(t,s,n){void 0===n&&(n=".stream-wood-chat"),"object"!=typeof n&&(n=e(n)),s?(n.find(".sw-"+s+"-error").empty(),t?(n.find(".sw-"+s+"-error").append(e("<p>").html(t)).show(),n.find(".sw-"+s+"-loader").hide()):n.find(".sw-"+s+"-error").hide()):(n.find(".sw-error-main").empty(),t?(n.find(".sw-error-main").append(e("<p>").html(t)).show(),n.find(".sw-loader").hide()):n.find(".sw-"+s+"-error").hide())},i.prototype.getDocVars=function(){return this._getDocVarsCache={url:"string"==typeof document.URL?document.URL:"",title:"string"==typeof document.title?document.title:"",referrer:"string"==typeof document.referrer?document.referrer:""},document.referrer&&this.setCookie(this.strings.referrer,document.referrer),this._getDocVarsCache},i.prototype.getCookiesForCrm=function(){var t=this,s={};return this.settings.crm.cookie.length&&e.each(this.settings.crm.cookie,function(){s[this]=t.getCookie(this)||""}),s},i.prototype.getParamsForCrm=function(){var t=this,s={};return this.settings.crm.getparam.length&&e.each(this.settings.crm.getparam,function(){s[this]=t.getUriParamByName(this)||""}),s},i.prototype.getUrlParts=function(){var e={},t=window.location.search.substring(1);if(t.length>0)for(var s=t.split("&"),n=0;n<s.length;n++){var i=s[n].split("=");try{e[i[0]]=decodeURIComponent(i[1])}catch(e){}}return e},i.prototype.sendUpdatedStat=function(t){var s=parseInt(this.getCookie(this.strings.timePage)||1),n=parseInt(this.getCookie(this.strings.timeAll)||1);this.deleteCookie(this.strings.timePage);var i=0;this.getCookie(this.strings.noNewVisit)||t||(i=1);var o=new Date;o.setHours(o.getHours()+16),this.setCookie(this.strings.noNewVisit,1,o);var r=this.getDocVars();e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"updateStat",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:r.url,swReferrer:r.referrer,swTitle:r.title,swNewVisit:i,swTimePage:s,swTimeAll:n})},i.prototype.updateTimeAll=function(){var e=new Date;e.setDate(e.getDate()+1),this.setCookie(this.strings.timeAll,parseInt(this.getCookie(this.strings.timeAll))+1||1,e),this.setCookie(this.strings.timePage,parseInt(this.getCookie(this.strings.timePage))+1||1,e)},i.prototype.pageIdentAdd=function(t){var s=this,n=new Date;n.setFullYear(n.getFullYear()+1);var i=this.getCookie(this.strings.currentOpenedPages),o=i?i+"."+t:t;this.setCookie(this.strings.currentOpenedPages,o,n),this.setInterval("incrementPageTime",function(){s.incrementPageTime.apply(s,[t])},1e3),e(window).on("beforeunload",function(){s.pageIdentRemove.apply(s,[t]),s.deleteInterval.apply(s,["incrementPageTime"])});var r=document.cookie.match(/sw_openedpage_([a-z]+)=\d+/gi);r&&setTimeout(function(){var t=document.cookie.match(/sw_openedpage_[a-z]+=\d+/gi);e(r).each(function(e,n){if(-1!=t.indexOf(n)){var i=n.substr(0,19);s.deleteCookie(i)}})},5e3)},i.prototype.incrementPageTime=function(e){var t=new Date,s=parseInt((new Date).getTime()/1e3);t.setFullYear(t.getFullYear()+1),this.setCookie("sw_openedpage_"+e,s,t)},i.prototype.pageIdentRemove=function(e){var t=[],s=(this.getCookie(this.strings.currentOpenedPages)||"").split(".");if(this.deleteCookie("sw_openedpage_"+e),0===s.length)return this.deleteCookie(this.strings.currentOpenedPages);for(var n in s)s.hasOwnProperty(n)&&s[n]!==e&&t.push(s[n]);if(t.length>0){var i=new Date;i.setFullYear(i.getFullYear()+1),this.setCookie(this.strings.currentOpenedPages,t.join("."),i),this.pageIdentSetUpdateMainPage(t[0])}else this.deleteCookie(this.strings.currentOpenedPages),this.deleteCookie(this.strings.mainPage),this.deleteCookie(this.strings.updateMainPage)},i.prototype.pageIdentSetMainPage=function(e){var t=this,s=new Date;s.setFullYear(s.getFullYear()+1),this.setCookie(this.strings.mainPage,e,s),this.setInterval("updateTimeAll",function(){t.updateTimeAll.call(t)},1e3)},i.prototype.pageIdentObserve=function(){var e=this;this.setInterval("pageIdentObserve",function(){e.getCookie(e.strings.updateMainPage)===e.page_ident&&(e.pageIdentSetMainPage.apply(e,[e.page_ident]),e.deleteInterval.apply(e,["pageIdentObserve"]),e.deleteCookie.apply(e,[e.strings.updateMainPage]));var t=parseInt((new Date).getTime()/1e3),s=e.getCookie.apply(e,[e.strings.mainPage]),n=e.getCookie.apply(e,["sw_openedpage_"+s]);((n=parseInt(n))+3<t||isNaN(n))&&e.pageIdentRemove.apply(e,[s])},1e3)},i.prototype.pageIdentSetUpdateMainPage=function(e){if(e.length>0){var t=new Date;t.setFullYear(t.getFullYear()+1),this.setCookie(this.strings.updateMainPage,e,t)}else this.deleteCookie(this.strings.updateMainPage)},i.prototype.pageIdentGetMainPage=function(){return this.getCookie(this.strings.mainPage)},i.prototype.pageIdentGen=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=0;s<5;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},i.prototype.getDateToGenerator=function(e){switch(parseInt(this.settings.design["generator-countdown-type"])){case 1:var t=e.getDate()+parseInt(this.settings.design["generator-count-days"]);e=new Date(e.getFullYear(),e.getMonth(),t);break;case 2:e.setHours(e.getHours()+parseInt(this.settings.design["generator-count-hours"]));break;case 3:var s=this.settings.design["generator-end-date"].split("-");e=new Date(parseInt(s[0]),parseInt(s[1])-1,parseInt(s[2]))}return e},i.prototype.getDateToGeneratorNew=function(e){switch(parseInt(this.settings.design["generator-countdown-type"])){case 1:var t=e.getDate()+parseInt(this.settings.design["generator-count-days"]);e=new Date(e.getFullYear(),e.getMonth(),t);break;case 2:e.setHours(e.getHours()+parseInt(this.settings.design["generator-count-hours"]));break;case 3:var s=this.settings.design["generator-exacttime"].split(" "),n=s[0].split("-"),i=s[1].split(":");e=new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2]),parseInt(i[0]),parseInt(i[1]))}return e},i.prototype.setRating=function(t){if(this.settings.manager){var s,n,i,o="",r=e(".stream-wood-chat .sw-send-group");if((t=e(t)).hasClass("good")?(s=r.find(".bad"),n=t,o="good-press",i=1):t.hasClass("bad")&&(s=r.find(".good"),n=t,o="bad-press",i=0),n.hasClass(o))n.removeClass(o),s.show(),this.deleteCookie(this.strings.rating);else{var a=e(".stream-wood-chat .sw-messages-list");n.addClass(o).attr("title",this.languages[this.language].swChangeRatingText),s.hide(),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append(e("<p>").addClass("sw-name-d").text(this.languages[this.language].swSendResultText)).appendTo(a),this.scrollChatDown(),this.setCookie(this.strings.rating,i),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"setRating",swManagerId:this.settings.manager.id,swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swRating:i})}return!1}},i.prototype.sendFirstMessage=function(){var t=e(".stream-wood-chat .sw-name").val();t=t.split('"').join("");var s=e.trim(e(".stream-wood-chat .sw-message").val());if(t||(t="Гость"),!e(".stream-wood-chat .sw-message").val()||0===s.length)return e(".stream-wood-chat .sw-message").focus(),!1;if(this.setCookie(this.strings.clientName,t),this.settings.clientName=t,this.settings.message=s,void 0!==this.settings.design.sendContact){var n=e(".stream-wood-chat .sw-contact-type").val(),i=e(".stream-wood-chat .sw-email").val(),o=e(".stream-wood-chat .sw-phone").val();this.settings.swContactType=n,this.settings.swEmail=i,this.settings.swPhone=o}e(".stream-wood-chat .sw-name").val()&&(this.settings.clientName=e(".stream-wood-chat .sw-name").val()),this.setManager(this.settings.manager);var r=[],a=new Date;s=this.stripTags(s),r.push({message:s,d:a.getDate(),m:a.getMonth()+1,y:a.getFullYear(),hour:a.getHours(),min:a.getMinutes(),wait:!0}),e(".stream-wood-chat .sw-newmessage").remove(),this.setMessages(r),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.trySendFirstMessage(),this.settings.design["collector-hide"]||(this.noreplyInitTimer(s),this.Storage.set(this.strings.firstMessage,s)),this.goalIsAchieved("chat")},i.prototype.trySendFirstMessage=function(){var s=this;if(this.settings.swSocketInitialized){if(this.settings.message){var n=this.settings.sessionId,i=this.settings.message;e.browser.msie&&parseInt(e.browser.version)<9&&"windows-1251"===(document.charset||document.characterSet)&&(i=this.utf8_encode(i));var o={swClientName:this.settings.clientName,message:i,managerId:this.settings.manager.id,managerKey:this.settings.manager.key,hostKey:this.settings.swDomainKey,firstMessage:!0,ip:this.settings.ipAddr};this.settings.manager.from_mobile>0?e.ajax({type:"POST",url:this.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+this.settings.swDomainKey+"&swKey="+this.settings.swKey+"&swSessionId="+n+"&callback=?",data:o,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):window.swc_socket&&this.IOemit("swSendMessageFromSession",o),this.deleteTimeout("swTypeTimer");var r={swClientName:this.settings.clientName,swFormType:"chat",swMessage:i,swClientData:this.getClientData()},a=s.getCalltouchSession();a&&(r.calltouchSession=a),this.settings.design.sendContact&&(r=e.extend(this.feedbackDefaultParams(),r),this.managerIsOnline(this.settings.manager)||(this.feedbackRequest(r),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait"))),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"firstMessage",swManagerId:this.settings.manager.id,swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:n,Params:t(r),crmUri:window.location.href}),this.runTrigger.apply(this,["onfirstmessagesend",r])}}else this.setTimeout("swTypeTimer",function(){s.trySendFirstMessage.call(s)},250)},i.prototype.setTitle=function(){var t=this;this.settings.title||e(".stream-wood-chat .sw-message:focus").length||(this.settings.title=document.title,document.title="*** "+this.languages[this.language].swNewMessageText+" *** ||"+document.title,this.setInterval("titleTimer",function(){document.title==t.settings.title?document.title="*** "+t.languages[t.language].swNewMessageText+" *** ||"+document.title:t.settings.title&&(document.title=t.settings.title)},1e3*this.settings.titleTimeout))},i.prototype.resetTitle=function(){this.deleteInterval("titleTimer"),this.settings.title&&(document.title=this.settings.title,this.settings.title=!1)},i.prototype.playBeep=function(){var e=this;this.sounds.incomingSoundHandler?this.settings.design.soundOff||"1"==this.getCookie(this.strings.soundOff)||this.sounds.incomingSoundHandler.play():(window.soundManager=new SoundManager,window.soundManager.setup({url:this.settings.serverUrl+"/js/soundmanager/swf/",preferFlash:!1,onready:function(){e.sounds.incomingSoundHandler=window.soundManager.createSound({url:e.settings.serverUrl+"/img/streamwood5.mp3"}),e.settings.design.soundOff||"1"==e.getCookie.apply(e,[e.strings.soundOff])||e.sounds.incomingSoundHandler.play()},ontimeout:function(){}}),window.soundManager.beginDelayedInit())},i.prototype.applySettings=function(){var t,s,n,i,o,r,a=e(".stream-wood-btn");if(this.settings.hasOwnProperty("design")){var l=this.settings.design;if((l["background-color"]||"000000"===l["background-color"]||"000"===l["background-color"])&&(this.settings.feedback&&!l["chat-offline-color"]||e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-noreply").find(".sw-manager").css("background-color","#"+l["background-color"])),this.settings.hideAnchor||(!l["anchor-offline-grey"]||this.settings.manager||this.settings.managers||this.settings.departments?(!this.settings.hideOfflineAnchor||this.settings.manager||this.settings.managers||this.settings.departments)&&(l["anchor-background-css"]?l["anchor-background-css"].split(";").forEach(function(t){var s=t.split(":"),n=e.trim(s[0]),i=e.trim(s[1]);n&&i&&a.css(n,i)}):l["anchor-background-color"]&&a.css("background-color","#"+l["anchor-background-color"])):a.addClass("stream-wood-btn-g")),l["background-image"]&&(!this.settings.feedback||this.settings.managerStatus==this.consts.SW_MANAGER_STATUS_ONLINE)){var c=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/bgr."+l["background-image"];c+="?"+(l.updated_at||""),e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-noreply").find(".sw-manager").css("background","url('"+c+"') repeat-x bottom")}var d=a.find("span.sw-title");l["anchor-text"]&&d.html(l["anchor-text"]),l["anchor-text-font-color"]&&d.attr("style","color: #"+l["anchor-text-font-color"]+"!important;"),l["anchor-text-font-family"]&&d.css("font-family",l["anchor-text-font-family"]),l["anchor-text-font-size"]&&d.css("font-size",l["anchor-text-font-size"]+"px");if(l["anchor-size"]?(a.addClass("sw-btn-small"),16):20,l["anchor-position"]){if(e.browser.msie)a.addClass("sw-btn-position-"+l["anchor-position"]+"-ie"),"right"!==l["anchor-position"]&&"left"!==l["anchor-position"]||(a.css({"border-radius":"0 5px 5px 0"}).find("span").css({"margin-top":"65px"}).find(".sw-title").css({marginRight:0,marginLeft:0,marginBottom:15}).end().end().find(".logo-img").css({top:13,left:8,borderRadius:"28px"}).find(".logo-btn-img").css({borderRadius:"28px",width:30,height:30}),l["anchor-offline-grey"]&&(d.css({marginRight:0,marginLeft:0}),e(".stream-wood-btn.stream-wood-btn-g span.sw-title").css({marginTop:15,marginBottom:15})));else{a.addClass("sw-btn-position-"+l["anchor-position"]);var u=a.width();if(u>220){var h=u-190,p=-51;l["anchor-logo"]&&(p=-74),parseInt(p)-parseInt(h)/2}}e(".stream-wood-invitation").addClass("stream-wood-invitation-"+l["anchor-position"]),e(".stream-wood-chat").addClass("stream-wood-"+l["anchor-position"]),e(".stream-wood-noreply").addClass("stream-wood-noreply-"+l["anchor-position"])}else e(".stream-wood-invitation").addClass("stream-wood-invitation-bottom"),e(".stream-wood-chat").addClass("stream-wood-bottom"),e(".stream-wood-noreply").addClass("stream-wood-noreply-bottom"),a.addClass("sw-btn-position-bottom");"1"==this.settings.design.sendMessageType&&(e(".stream-wood-chat .sw-send-group span span").remove(),e(".stream-wood-chat .sw-send-group .sw-enter").html(" или Enter")),l["chat-compact"]&&(e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-noreply").addClass("stream-wood-compact"),this.settings.design.sendMessageType||e(".stream-wood-chat .sw-send-group span span").remove()),(l["font-color"]||"000000"===l["font-color"]||"000"===l["font-color"])&&(this.settings.managers||this.settings.departments||this.settings.manager)&&e(".stream-wood-chat .sw-manager .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation .sw-manager .sw-manager-name,.stream-wood-invitation .sw-manager .invitation-text").attr("style","color: #"+l["font-color"]+" !important"),l["font-family"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation,.stream-wood-invitation .sw-manager-name").css("font-family",l["font-family"]),l["font-size"]&&e(".stream-wood-chat, .stream-wood-chat .sw-manager-name,.stream-wood-chat .sw-manager.sw-manager-no-messages .sw-title,.stream-wood-chat .sw-manager.sw-manager-select .sw-title,.stream-wood-invitation, .stream-wood-invitation .sw-manager-name").css("font-size",l["font-size"]+"px"),(l["department-font-color"]||"000000"===l["department-font-color"]||"000"===l["department-font-color"])&&(this.settings.managers||this.settings.departments||this.settings.manager)&&e(".stream-wood-chat .sw-manager .sw-manager-position,.stream-wood-chat .sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").attr("style","color: #"+l["department-font-color"]+"!important"),l["department-font-family"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-position,.stream-wood-chat .sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").css("font-family",l["department-font-family"]),l["department-font-size"]&&e(".stream-wood-chat,.stream-wood-chat .sw-manager-position,.stream-wood-chat,.sw-manager.sw-manager-select .sw-info,.stream-wood-invitation .sw-manager .sw-manager-position").css("font-size",l["department-font-size"]+"px"),l["dialog-font-family"]&&e(".stream-wood-chat .sw-messages-list").css({fontFamily:l["dialog-font-family"]}),l["dialog-font-size"]&&e(".stream-wood-chat .sw-messages-list").css({fontSize:l["dialog-font-size"]+"px"}),l["chat-outer-shadow-color"]&&(s=l["chat-outer-shadow-color"].split(":"),(i=e(".stream-wood-chat").css("box-shadow"))&&(n=(n=i.replace(/rgba?\([^\)]+\)/gi,""))+" rgba("+s[0]+", 0.35)"),e(".stream-wood-chat").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})),l["chat-outer-shadow-value"]&&((i=e(".stream-wood-chat").css("box-shadow"))&&(o=i.replace(/^.*(rgba?\([^)]+\)).*$/,"$1"),r=i.replace(/rgba?\([^\)]+\)/gi,"").split(" "),e.browser.msie?r[3]=l["chat-outer-shadow-value"]+"px":r[4]=l["chat-outer-shadow-value"]+"px",n=r.join(" ")+" "+o),e(".stream-wood-chat").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n}));var g=e(".stream-wood-chat .sw-send-group .sw-send-btn-text");if(l["chat-sendbtn-font-color"]&&g.attr("style","color: #"+l["chat-sendbtn-font-color"]+"!important;"),l["chat-sendbtn-font-family"]&&g.css("font-family",l["chat-sendbtn-font-family"]),l["chat-sendbtn-font-size"]&&g.css("font-size",l["chat-sendbtn-font-size"]+"px"),l["chat-sendbtn-bkg-color"]&&e(".stream-wood-chat .sw-send-group .sw-send-btn,.stream-wood-invitation .sw-send-group .sw-send-btn:eq(1)").attr("style",l["chat-sendbtn-bkg-css"]),l["chat-sendbtn-shadow"]&&l["chat-sendbtn-shadow-color"]){s=l["chat-sendbtn-shadow-color"].split(":");var f="1px";l["chat-sendbtn-shadow-value"]&&(f=l["chat-sendbtn-shadow-value"]+"px"),n="inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 7px "+f+" rgba("+s[0]+", 0.35)",e(".stream-wood-chat .sw-send-group .sw-send-btn").css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})}if("mobile"!==this.settings.device&&("pixel"===l["anchor-offset"]||"percent"===l["anchor-offset"])){var m,w,v="percent"===l["anchor-offset"]?"%":"px",b=e(".stream-wood-chat, .stream-wood-invitation, .stream-wood-btn");switch(l["anchor-position"]){case"right":case"left":m="top",w=e(window).height(),b.css("top",l["anchor-offset-value"]+v);break;case"top":case"bottom":default:m="right",w=e(window).width(),b.css("right",l["anchor-offset-value"]+v)}"%"===v&&b.each(function(){var t=e(this),s=t.offset()["top"===m?"top":"left"];"top"===m&&(s-=e(window).scrollTop());var n=t.width();t.is(":hidden")&&(t.css("opacity","0").show(),s=t.offset()["top"===m?"top":"left"],"top"===m&&(s-=e(window).scrollTop()),n=t.width(),t.hasClass("stream-wood-btn")||-1===["right","left"].indexOf(l["anchor-position"])||(n=t.height()),t.css("opacity","1").hide());var i=w-(s+n);if("top"!==m&&(i=s),i<0){var o="calc("+t.css(m)+" - "+-i+"px)";t.css(m,o)}})}var y;l["anchor-text-shadow"]&&2!=l["anchor-text-shadow"]?1==l["anchor-text-shadow"]&&d.css("text-shadow","none"):(l["anchor-text-shadow-color"]&&(y=l["anchor-text-shadow-color"].split(":"),d.css("text-shadow","rgba("+y[0]+", 0.75) 1px 2px 1px"),e.browser.msie&&d.css("filter","progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#"+y[1]+")")),e.browser.msie&&d.css("display","inline-block"));var k=a.find("span.sw-status");l["anchor-status-text"]&&2!=l["anchor-status-text"]?(k.hide(),d.addClass("only-title"),e.browser.msie&&d.addClass("only-title-ie")):(this.managerIsOnline(this.settings.manager)||this.settings.departments||this.settings.managers?l["anchor-status-text-online"]&&k.html(l["anchor-status-text-online"]):l["anchor-status-text-offline"]&&k.html(l["anchor-status-text-offline"]),l["anchor-status-font-color"]&&k.attr("style","color: #"+l["anchor-status-font-color"]+"!important"),l["anchor-status-font-family"]&&k.css("font-family",l["anchor-status-font-family"]),l["anchor-status-font-size"]&&k.css("font-size",l["anchor-status-font-size"]+"px"),l["anchor-status-shadow"]&&(l["anchor-status-shadow-color"]?(y=l["anchor-status-shadow-color"].split(":"),k.css("text-shadow","rgba("+y[0]+", 0.75) 1px 1px 0"),e.browser.msie&&k.css({display:"inline-block",filter:"progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#"+y[1]+")"})):(k.css("text-shadow","rgba(14, 30, 56, 0.75) 1px 1px 0"),e.browser.msie&&k.css("display","inline-block").css("filter","progid:DXImageTransform.Microsoft.Shadow(direction=120,strength=2,color=#0e1e38)")))),l["anchor-outer-shadow-color"]&&!l["anchor-offline-grey"]&&(y=l["anchor-outer-shadow-color"].split(":"),(i=a.css("box-shadow"))&&(n=(n=i.replace(/rgba?\([^\)]+\)/gi,""))+" rgba("+y[0]+", 0.35)"),a.css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n})),l["anchor-outer-shadow-value"]&&!l["anchor-offline-grey"]&&((i=a.css("box-shadow"))&&(o=i.replace(/^.*(rgba?\([^)]+\)).*$/,"$1"),r=i.replace(/rgba?\([^\)]+\)/gi,"").split(" "),e.browser.msie?r[3]=l["anchor-outer-shadow-value"]+"px":r[4]=l["anchor-outer-shadow-value"]+"px",n=r.join(" ")+" "+o),a.css({"box-shadow":n,"-webkit-box-shadow":n,"-moz-box-shadow":n}));var x;l["anchor-text-rotate-value"]&&0!=l["anchor-text-rotate-value"]&&(x="rotate("+l["anchor-text-rotate-value"]+"deg)",d.css({display:"inline-block",transform:x,"-moz-transform":x,"-webkit-transform":x,"-o-transform":x,"-ms-transform":x})),l["anchor-text-shadow"]&&2!=l["anchor-text-shadow"]||l["anchor-status-rotate-value"]&&0!=l["anchor-status-rotate-value"]&&(x="rotate("+l["anchor-status-rotate-value"]+"deg)",k.css({display:"inline-block",transform:x,"-moz-transform":x,"-webkit-transform":x,"-o-transform":x,"-ms-transform":x})),this.settings.feedback||l["operator-rating"]&&2!=l["operator-rating"]?(e(".stream-wood-chat .sw-send-group .bad,.stream-wood-chat .sw-send-group .good").hide(),e(".stream-wood-chat .sw-send-group .sw-send-btn").removeClass("sw-send-btn-rating-on")):(e(".stream-wood-chat .sw-send-group .good").hasClass("good-press")||e(".stream-wood-chat .sw-send-group .bad").show(),e(".stream-wood-chat .sw-send-group .bad").hasClass("bad-press")||e(".stream-wood-chat .sw-send-group .good").show(),e(".stream-wood-chat .sw-send-group .sw-send-btn").addClass("sw-send-btn-rating-on")),l["anchor-logo"]?(a.addClass("sw-btn-image"),a.find(".logo-img").show(),t=l["anchor-logo-bg-color"]?"#"+l["anchor-logo-bg-color"]:"#FFFFFF",a.find(".logo-img").css("background-color",t),t=l["anchor-logo-border-color"]?"#"+l["anchor-logo-border-color"]:"#BB361B",a.find(".logo-img").css("border","3px solid "+t),"top"===l["anchor-position"]&&a.find(".logo-img").css("top","3px")):(a.removeClass("sw-btn-image"),a.find(".logo-img").hide()),l["anchor-smooth"]&&(a.addClass("sw-no-border-radius"),e(".stream-wood-chat").addClass("sw-chat-no-border-radius"),e(".stream-wood-chat .sw-container .sw-manager,.stream-wood-invitation .sw-manager,.stream-wood-noreply .sw-manager").addClass("sw-manager-no-border-radius"))}else e(".stream-wood-invitation").addClass("stream-wood-invitation-bottom"),a.addClass("sw-btn-position-bottom"),e(".stream-wood-noreply").addClass("stream-wood-noreply-bottom");(this.settings.chatOpened||this.settings.invitationOpened||this.settings.feedbackOpened)&&this.hideBtn(),e(".stream-wood-mobile-btn .mobile-title,.stream-wood-mobile-btn .mobile-status").css("transform","none")},i.prototype.triggerEvent=function(e){if(this.callbacks[e]){var t=this;this.callbacks[e].forEach(function(e){e.call(t)})}},i.prototype.onEvent=function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)},i.prototype.applyGeneratorSettings=function(){var t,s={},n=e(".stream-wood-generator"),i=n.find(".sw-send-group");if(this.settings.design.hasOwnProperty("generator-settings")&&void 0!==this.settings.design["generator-settings"])(o=this.settings.design["generator-settings"])["gen-background-color"]&&n.find(".sw-manager").css({backgroundColor:"#"+o["gen-background-color"],border:"1px solid #"+o["gen-background-color"]}),o["gen-title-font-color"]&&(s.color="#"+o["gen-title-font-color"]),o["gen-title-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-title-font-family"]),o["gen-title-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-title-font-size"]+"px"),o["gen-title-shadow-color"]&&(t="rgba("+o["gen-title-shadow-color"].split(":")[0]+", 0.75) 1px 1px 0",s["text-shadow"]=t),n.find(".sw-manager .generator-title").css(s),s={},o["gen-text-font-color"]&&(s.color="#"+o["gen-text-font-color"]),o["gen-text-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-text-font-family"]),o["gen-text-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-text-font-size"]+"px"),i.find(".sw-action-text").css(s),s={},o["gen-yesbtn-font-color"]&&(s.color="#"+o["gen-yesbtn-font-color"]),o["gen-yesbtn-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-yesbtn-font-family"]),o["gen-yesbtn-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-yesbtn-font-size"]+"px"),o["gen-yesbtn-text-shadow"]&&(s["text-shadow"]="rgba(14, 30, 56, 0.74902) 1px 1px 0px"),i.find(".sw-yes-button-span").css(s),o["gen-yesbtn-text"]&&i.find(".sw-yes-button-span").html(o["gen-yesbtn-text"]),o["gen-yesbtn-bg-color"]&&i.find(".sw-append-btn").attr("style",o["gen-yesbtn-bg-css"]),s={},o["gen-nobtn-font-color"]&&(s.color="#"+o["gen-nobtn-font-color"]),o["gen-nobtn-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-nobtn-font-family"]),o["gen-nobtn-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-nobtn-font-size"]+"px"),o["gen-nobtn-text-shadow"]&&(s["text-shadow"]="rgba(14, 30, 56, 0.74902) 1px 1px 0px"),i.find(".sw-no-button-span").css(s),o["gen-nobtn-text"]&&i.find(".sw-no-button-span").html(o["gen-nobtn-text"]),o["gen-nobtn-bg-color"]&&i.find(".sw-cancel-btn").attr("style",o["gen-nobtn-bg-css"]);else{var o=this.settings.design;o["gen-background-color"]&&n.find(".sw-manager").css("background-color","#"+o["gen-background-color"]),o["gen-text-font-color"]&&(s.color="#"+o["gen-title-font-color"]),o["gen-text-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-title-font-family"]),o["gen-text-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-title-font-size"]+"px"),n.find(".sw-manager .generator-title").css(s),s={},o["gen-title-font-color"]&&(s.color="#"+o["gen-text-font-color"]),o["gen-title-font-family"]&&"mobile"!==this.settings.device&&(s["font-family"]=o["gen-text-font-family"]),o["gen-title-font-size"]&&"mobile"!==this.settings.device&&(s["font-size"]=o["gen-text-font-size"]+"px"),i.find(".action-text").css(s)}o["gen-title-text-align"]&&n.find(".sw-action-text").css({textAlign:o["gen-title-text-align"]}),void 0!==this.settings.design["generator-persdata-red-border"]&&"1"==this.settings.design["generator-persdata-red-border"]?n.find(".sw-disclaimer").css("border","1px solid red"):n.find(".sw-disclaimer").css("border","none")},i.prototype.applyNewVersionGeneratorSettings=function(){if(this.settings.design.hasOwnProperty("generator-settings")&&void 0!==this.settings.design["generator-settings"]){var t=this.settings.design["generator-settings"],s=e(".stream-wood-generator-2");if(t["gen-wallpaper"]){t["gen-load-bg"]?(t["gen-bg-width"]=t["gen-bg-width"]||600,t["gen-bg-height"]=t["gen-bg-height"]||400):(t["gen-bg-width"]=600,t["gen-bg-height"]=400),s.addClass("stream-wood-generator-wallpaper");var n={maxWidth:t["gen-bg-width"],maxHeight:t["gen-bg-height"]};if(t["gen-load-bg"]){i=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-bg."+t["gen-bg-img"];i+="?"+(t.updated_at||""),n.backgroundImage="url("+i+")"}s.css(n),s.prepend(e('<div class="stream-wood-generator-blank" />').css({width:t["gen-bg-width"],height:t["gen-bg-height"]}))}else{if(t["gen-load-logo"]){s.addClass("stream-wood-generator-with-logo");var i=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-logo."+t["gen-logo-img"];i+="?"+(t.updated_at||""),s.find(".stream-wood-generator-logo-container").css({backgroundImage:"url("+i+")",float:"left"})}t["gen-logo-bg-color"]&&s.find(".stream-wood-generator-logo-container").css("background-color","#"+t["gen-logo-bg-color"]),t["gen-bg-color"]&&s.find(".stream-wood-generator-body").css("background-color","#"+t["gen-bg-color"]),t["gen-title-bg-color"]&&s.find(".stream-wood-generator-title").css("background-color","#"+t["gen-title-bg-color"])}t["gen-title-font-color"]&&s.find(".stream-wood-generator-title .generator-title-span").css("color","#"+t["gen-title-font-color"]),t["gen-animated"]&&s.addClass("stream-wood-generator-2--animated"),t["gen-title-text-align"]&&s.find(".stream-wood-generator-action-content").css({textAlign:t["gen-title-text-align"]}),t["gen-counter-bg-color"]&&(s.find(".stream-wood-generator-counter-box").css("background-color","#"+t["gen-counter-bg-color"]),s.find(".stream-wood-generator-counter-dot").css("color","#"+t["gen-counter-bg-color"])),t["gen-counter-font-color"]&&s.find(".stream-wood-generator-counter-num").css("color","#"+t["gen-counter-font-color"]),t["gen-action-font-color"]&&(s.find(".stream-wood-generator-action-content,.stream-wood-generator-counter-text-box,.stream-wood-generator-client-data .streamwood-personal-data,.stream-wood-generator-copyright,.stream-wood-generator-copyright a, .stream-wood-sms-block .sw-sms-block-btn").css("color","#"+t["gen-action-font-color"]),s.find(".stream-wood-sms-block .sw-sms-block-btn").css("border-bottom-color","#"+t["gen-action-font-color"]));var o=s.find(".stream-wood-generator-send-btn"),r=s.find(".stream-wood-generator-cancel-btn");t["gen-yesbtn-bg-color"]&&o.css("background-color","#"+t["gen-yesbtn-bg-color"]),t["gen-yesbtn-font-color"]&&o.css("color","#"+t["gen-yesbtn-font-color"]),t["gen-nobtn-bg-color"]&&r.css("background-color","#"+t["gen-nobtn-bg-color"]),t["gen-nobtn-font-color"]&&r.css("color","#"+t["gen-nobtn-font-color"]);var a=o.attr("style");a&&(a=a.replace(/!important/g,"").replace(/;/g,"!important;"),o.attr("style",a)),(a=r.attr("style"))&&(a=a.replace(/!important/g,"").replace(/;/g,"!important;"),r.attr("style",a)),t["gen-one-button"]&&s.find(".stream-wood-generator-client-data").addClass("stream-wood-generator-one-button")}void 0!==this.settings.design["generator-persdata-red-border"]&&"1"==this.settings.design["generator-persdata-red-border"]?s.find(".stream-wood-disclaimer").css("border","1px solid red"):s.find(".stream-wood-disclaimer").css("border","none")},i.prototype.createFirstMessageForm=function(){var t='<div class="sw-newmessage">';t+='<dl><dt><span class="compact">'+this.languages[this.language].swYouNameText+'</span></dt><dd><input type="text" class="sw-name" value="'+this.settings.clientName+'"/></dd></dl>',t+=this.appendContactInfo(),t+="<dl><dt>"+this.languages[this.language].swQuestionText+"</dt><dd>&nbsp;</dd></dl>",t+='<textarea class="sw-message"></textarea>';var s=e(t+="</div>"),n=!+this.settings.design.agree_required;return+this.settings.design.no_personal_data||o.personal_data(this.settings.design.personal_data_text,n).appendTo(s),+this.settings.design.advertising_agree&&o.advertising_agree(this.settings.design.advertising_agree_url,n,this.settings.design.advertising_agree_text).appendTo(s),e(".stream-wood-chat .sw-message-group").append(s)},i.prototype.getSelectType=function(e){var t=0;switch(e){case"feedback":t=this.settings.design["feedback-selecttype"];break;case"collector":t=this.settings.design["collector-selecttype"]}return parseInt(t)},i.prototype.getFormContactSelectHtml=function(e){var t='<dl><dt><select class="sw-contact-type" name="contact-type"><option value="2">'+this.languages[this.language].swPhoneText+'</option><option value="1">'+this.languages[this.language].swEmailText+'</option></select></dt><dd><input class="sw-email sw-phone" type="phone" value="+'+this.settings.phonePrefix+'"/><div class="sw-error sw-phone-error" style="display:none"></div><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>',s="<dl><dt>"+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="17" value="+'+this.settings.phonePrefix+'"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>',n="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>';switch(this.getSelectType(e)){case 1:t=s;break;case 2:t=n;break;case 3:t=n+s}return t},i.prototype.getMessagePlaceholder=function(e){var t="";if("feedback"===e)switch(this.getSelectType(e)){case 1:t=this.languages[this.language].swFeedbackText1;break;case 2:t=this.languages[this.language].swFeedbackText2;break;case 3:t=this.languages[this.language].swFeedbackText3;break;default:t=this.languages[this.language].swFeedbackText0}return t},i.prototype.getFeedbackSuccessMessage=function(e){var t=this.settings.design["feedback-success-message"];if(!t)switch(parseInt(this.settings.design["feedback-selecttype"])){case 1:t=this.languages[this.language].swAnswerText2;break;case 2:t=this.languages[this.language].swAnswerText1;break;case 3:t=this.languages[this.language].swAnswerText3;break;default:t=this.languages[this.language].swAnswerText0}return t=t.replace("{email}",e.email),t=t.replace("{phone}",e.phone)},i.prototype.createFormMessage=function(t,s){var n="feedback";t.hasClass("stream-wood-noreply")&&(n="collector");var i=this.getMessagePlaceholder(n),o=e("<div>").addClass("sw-feedback").append(e('<dl class="sw-select-manager">').html(s)).append(e("<dl>").html("<dt>"+this.languages[this.language].swYouNameText+'</dt><dd><input type="text" class="sw-name" value="'+this.settings.clientName+'"/></dd>')).append(this.getFormContactSelectHtml(n)).append(e("<textarea>").prop("placeholder",i).addClass("sw-message sw-message-empty"));t.find(".sw-message-group").append(o)},i.prototype.showSystemError=function(){e(".stream-wood-chat .sw-manager,.stream-wood-chat .sw-send-group").hide(),e(".stream-wood-chat").css({"margin-bottom":0})},i.prototype.createSwBtn=function(){var t=this;e(o.btn).click(function(e){e.preventDefault(),t.slideUp.call(t)}).attr("title",this.languages[this.language].swSendQuestionText).find(".sw-title").text(this.languages[this.language].swSendQuestionText).end().find(".sw-status").text(this.languages[this.language].swOperatorOfflineText).end().appendTo(document.body),this.reposBtn()},i.prototype.createZalike=function(){var t=this,s="",n="";if(this.settings.design["zalike-settings"]){var i=this.settings.design["zalike-settings"];"pixel"===i["zalike-offset"]?s=i["zalike-offset-value"]+"px":"percent"===i["zalike-offset"]&&(s=i["zalike-offset-value"]+"%"),n="left"===i["zalike-position"]?"left":"right",e(o.zalike).last(".stream-wood-zalike-window").css(n,s).end().find(".stream-wood-zalike-window-head").css("background-color","#"+i["zalike-head-color"]).end().find(".stream-wood-zalike-window-footer").css("background-color","#"+i["zalike-head-color"]).end().find(".stream-wood-zalike-window-body-center").css("background-color","#"+i["zalike-body-color"]).end().find(".stream-wood-zalike-close").css({color:"#"+i["zalike-title-font-color"]}).end().find(".stream-wood-zalike-title").text(this.settings.design["zalike-title"]).css({color:"#"+i["zalike-title-font-color"],fontFamily:i["zalike-title-font"],fontSize:i["zalike-title-font-size"]+"px"}).end().find(".stream-wood-zalike-subtitle").text(this.settings.design["zalike-subtitle"]).css({color:"#"+i["zalike-subtitle-font-color"],fontFamily:i["zalike-subtitle-font"],fontSize:i["zalike-subtitle-font-size"]+"px"}).end().find(".stream-wood-zalike-window-body-center").text(this.settings.design["zalike-content"]).css({color:"#"+i["zalike-body-font-color"],fontFamily:i["zalike-body-font"],fontSize:i["zalike-body-font-size"]+"px"}).end().find(".stream-wood-zalike-window-footer a").attr("href","https://streamwood.ru/zalike/?utm_source=consultant&utm_medium=self&utm_campaign="+location.hostname+"&utm_content="+this.settings.sessionId+"&utm_term=").end().appendTo("body"),t.ZalikePos.call(t),e(".stream-wood-zalike-window-head").click(function(){var s=e(".stream-wood-zalike-window");"0px"===s.css("bottom")?(e(".stream-wood-zalike-close").fadeOut(),t.ZalikePos.call(t),t.setTimeout.call(t,"zalikeCloseTimer",function(){s.removeClass("stream-wood-zalike-window-close"),t.showRecallButton()},500)):(t.hideRecallButton(),e(".stream-wood-zalike-close").fadeIn(),s.animate({bottom:0},500).addClass("stream-wood-zalike-window-close"))}),e("#vkAdd").click(function(e){e.preventDefault(),t.vkPost()}),!1===t.showCopyright("zalike")&&e(".stream-wood-zalike-window .stream-wood-zalike-window-footer .stream-wood-zalike-window-footer-link").hide()}},i.prototype.ZalikePos=function(){var t=e(".stream-wood-zalike-window-head").height(),s=e(".stream-wood-zalike-window").height()-t;e(".stream-wood-zalike-window").animate({bottom:-s},500)},i.prototype.multibuttonCreateV2=function(){var t=e(o.multiv2).hide().appendTo(document.body),s=this.settings.design,i="";(c=s["multibutton-items"]||[]).forEach(function(e){"sw_registrator"===e.action&&s["registrator-title"]&&(e.title=s["registrator-title"]),e.v2=1,e.ver2_font_color=s["multibutton-mobile-ver2-font-color"],i+=o.multibutton_item(e)}),t.find(".js-stream-wood-multiv2-menu-block").append(i);var r=s["multibutton-mobile-ver2-close-widget"],a=t.find(".js-stream-wood-multiv2-close"),l=t.find(".js-stream-wood-multiv2-menu-block");r||a.css("opacity",0);var c=l.children(),d=l.find(".stream-wood-multibutton-menu-item-title");s["multibutton-mobile-ver2-bgr-color"]&&(c.css("backgroundColor",s["multibutton-mobile-ver2-bgr-color"]),c.css("color",s["multibutton-mobile-ver2-bgr-color"])),s["multibutton-mobile-ver2-font-color"]&&d.css("color",s["multibutton-mobile-ver2-font-color"]),s["multibutton-mobile-ver2-font-size"]&&d.css("fontSize",s["multibutton-mobile-ver2-font-size"]);var u=t.find(".stream_wood_multibutton_drag_header"),h=t.find(".stream_wood_multibutton_header");u.css("backgroundColor",s["multibutton-button-color"]),h.css("backgroundColor",s["multibutton-button-color"]);var p=t.find(".js-stream-wood-multiv2-text-item"),g="";(s["multibutton-button-frames"]||[]).forEach(function(e){"text"==e.type&&g.length<1&&(g=e["font-color"])}),p.css("color",g);t.find(".stream_wood_multibutton_header_close_block").find("svg path").attr("fill",g);var f=this;s["multibutton-hide-chat-button"]&&(f.settings.hideAnchor=!0,f.hideBtn()),s["multibutton-hide-registrator-button"]&&this.onEvent("loaded",function(){e(".strmwd-registrator-btn").remove()}),s["multibutton-hide-recall-button"]&&this.onEvent("loaded",function(){e(".stream-wood-recall-btn").remove()}),c.each(function(t,s){var i=(s=e(s)).data();"A"===s.prop("tagName")&&(i.hasOwnProperty("linkThisWindow")&&1==parseInt(i.linkThisWindow)&&"link"===i.action||s.attr({target:"_blank"}),s.attr({href:n(i.src,i.action)})),"sw_recall"===i.action&&(f.recallIsEnabled()||s.hide()),"sw_chat"===i.action&&(f.consultantIsEnabled()||s.hide()),"sw_registrator"===i.action&&(f.registratorIsEnabled()||s.hide()),"sw_generator"===i.action&&(f.generatorIsEnabled()?"mobile"===f.settings.device&&f.settings.design["generator-settings"]["gen-wallpaper"]&&s.hide():s.hide())}),this.settings.multibuttonV2Opened=!1},i.prototype.multibuttonInitEventsV2=function(){var t=this,s=t.settings.design,n=e(".js-stream-wood-multiv2-container"),i=s["multibutton-mobile-ver2-close-widget"],o=n.find(".js-stream-wood-multiv2-close"),r=n.find(".js-stream-wood-multiv2-menu-block").find(".stream-wood-multibutton-menu-item"),a=n.find(".js-stream-wood-multiv2-accordion"),l=n.find(".js-stream-wood-multiv2-menu-block");a.off("click"),o.off("click");var c=[];(s["multibutton-button-frames"]||[]).forEach(function(e){"text"==e.type&&e.text.length>=1&&c.push(e.text)});var d=0,u=1,h=n.find(".js-stream-wood-multiv2-text-item"),p=s["multibutton-button-animation-duration"];p=1==p?1500:1e3*p;var g=function(){1==u?(h.html(c[d]),u=0,h.css("height",0),h.css("height",h.prop("scrollHeight")),c.length>1&&(setInterval(g,p),++d>=c.length&&(d=0))):parseInt(l.css("max-height"))||(h.css("opacity",0),setTimeout(function(){f()},500))},f=function(){h.css("opacity",1);var e=h.height();h.css("height",0),h.html(c[d]);var t=h.prop("scrollHeight");h.css("height",t),h.height(e).animate({height:t},500),++d>=c.length&&(d=0)};g(),a.on("click",function(){parseInt(l.css("max-height"))?t.multibuttonCloseMenuV2():t.multibuttonOpenMenuV2()}),o.on("click",function(){0===e(this).css("opacity")||"0"==e(this).css("opacity")?a.trigger("click"):parseInt(l.css("max-height"))?t.multibuttonCloseMenuV2():i&&n.css("display","none")}),r.on("click",function(s){"sw_"===e(this).data("action").substr(0,3)&&(s.preventDefault(),s.stopPropagation()),t.multibuttonItemClick(this),t.goalIsAchieved("multibutton")})},i.prototype.multibuttonCloseMenuV2=function(){if(this.settings.multibuttonV2Opened){this.settings.multibuttonV2Opened=!1;var t=this.settings.design,s=e(".js-stream-wood-multiv2-container"),n=t["multibutton-mobile-ver2-close-widget"],i=s.find(".js-stream-wood-multiv2-close");s.find(".js-stream-wood-multiv2-menu-block").css("max-height","0"),n||i.css("opacity","0")}},i.prototype.multibuttonOpenMenuV2=function(){if(!this.settings.multibuttonV2Opened){this.settings.multibuttonV2Opened=!0;var t=this.settings.design,s=e(".js-stream-wood-multiv2-container"),n=t["multibutton-mobile-ver2-close-widget"],i=s.find(".js-stream-wood-multiv2-close"),o=s.find(".js-stream-wood-multiv2-menu-block");o.css("max-height",o.prop("scrollHeight")+"px"),n||i.css("opacity","1")}},i.prototype.multibuttonHideV2=function(){this.multibuttonCloseMenuV2(),e(".js-stream-wood-multiv2-container").fadeOut(300)},i.prototype.multibuttonShowV2=function(){return!this.settings.generatorOpened&&(!this.settings.registratorOpened&&(!this.settings.recallOpened&&void e(".js-stream-wood-multiv2-container").fadeIn(300)))},i.prototype.multibuttonReposMenu=function(t){t=t||0;var s=e(".stream-wood-multibutton-container"),n=e(".stream-wood-multibutton-menu"),i=this.getBlockSizeAndPosition(s),o=this.getBlockSizeAndPosition(n),r=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,a=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,l=i.top<(a-i.height)/2,c=i.left<(r-i.width)/2,d={};d.top=l?i.top+i.height+t:i.top-o.height-t,d.left=c?i.left:i.left+i.width-o.width,n.css(d)},i.prototype.multibuttonCreate=function(){this.multibuttonCreateButton(),this.multibuttonCreateMenu(),this.multibuttonApplySettings(),this.multibuttonReposMenu(16),this.settings.multibuttonOpened=!1},i.prototype.multibuttonCreateButton=function(){var t=e(o.multibutton).hide().appendTo(document.body),s=this.settings.design["multibutton-button-frames"]||[],n=o.multibutton_frame.repeat(s.length);t.find(".stream-wood-multibutton").append(n)},i.prototype.multibuttonCreateMenu=function(){var t=e(o.multibutton_menu).hide().appendTo(document.body),s=this.settings.design,n="";(s["multibutton-items"]||[]).forEach(function(e){"sw_registrator"===e.action&&s["registrator-title"]&&(e.title=s["registrator-title"]),n+=o.multibutton_item(e)}),t.html(n)},i.prototype.multibuttonApplySettings=function(){var t=e(".stream-wood-multibutton-container"),s=t.find(".stream-wood-multibutton"),i=e(".stream-wood-multibutton-menu"),o=this.settings.design,r=this,a="mobile"===this.settings.device&&o["multibutton-button-mobile-position-active"],l=a?o["multibutton-button-width-mobile"]:o["multibutton-button-width"],c=a?o["multibutton-button-height-mobile"]:o["multibutton-button-height"],d=a?o["multibutton-button-position-x-mobile"]:o["multibutton-button-position-x"],u=a?o["multibutton-button-position-y-mobile"]:o["multibutton-button-position-y"];if(l&&t.width(l),c&&t.height(c),o["multibutton-button-image"]){var h=o["multibutton-button-image"];0===h.indexOf("http://")||0===h.indexOf("https://")?s.find(".stream-wood-multibutton-logo").addClass("stream-wood-multibutton-logo--custom").children().css("backgroundImage","url("+h+")"):s.find(".stream-wood-multibutton-logo i").addClass("stream-wood-multibutton-icon-"+h)}else s.find(".stream-wood-multibutton-logo").remove();if(o["multibutton-button-color"]&&s.css("backgroundColor",o["multibutton-button-color"]),u){var p=u;-1===p.indexOf("%")&&(p=parseInt(p,10)),0===p.toString().indexOf("-")?t.css({top:"unset",bottom:"string"==typeof p?p.substr(1):-p}):t.css("top",p)}if(d){var g=d;-1===g.indexOf("%")&&(g=parseInt(g,10)),0===g.toString().indexOf("-")?(t.css({left:"unset",right:"string"==typeof g?g.substr(1):-g}),i.addClass("stream-wood-multibutton-menu--right")):(t.css("left",g),i.addClass("stream-wood-multibutton-menu--left"))}switch(+o["multibutton-button-can-hide"]||t.find(".stream-wood-multibutton-hide").remove(),o["multibutton-button-shape"]){case"square":s.addClass("stream-wood-multibutton--square");break;case"rounded":s.addClass("stream-wood-multibutton--rounded");break;case"circle":default:s.addClass("stream-wood-multibutton--circle")}var f=s.find(".stream-wood-multibutton-frame");if(f.each(function(t){var s=e(this),n=o["multibutton-button-frames"][t];switch(n.type){case"text":s.addClass("stream-wood-multibutton-frame--text").append(e("<span>").text(n.text)),n["font-color"]&&s.css("color",n["font-color"]),a?s.css("font-size",o["multibutton-button-font-size-mobile"]+"px"):n["font-size"]&&s.css("font-size",n["font-size"]+"px");break;case"image":var i=e("<i>");-1!==n.image.indexOf("://")?i.addClass("stream-wood-multibutton-icon--custom").css("backgroundImage","url("+n.image+")"):i.addClass("stream-wood-multibutton-icon-"+n.image),s.addClass("stream-wood-multibutton-frame--image").append(i)}}),f.length>1){var m=o["multibutton-button-animation-type"];m&&s.addClass("stream-wood-multibutton--animation-"+m),this.multibuttonStartAnimation()}else 1===f.length&&f.show();if(f.on({animationend:function(t){var s=e(this),n="stream-wood-multibutton-frame--a2";if(s.hasClass("stream-wood-multibutton-frame--a1"))s.removeClass("stream-wood-multibutton-frame--a1"),s.hasClass(n)||s.hide();else if(s.hasClass(n)){s.removeClass(n).addClass("stream-wood-multibutton-frame--a1");var i=s.next(".stream-wood-multibutton-frame");0===i.length&&(i=f.first()),i.addClass(n).show()}}}),o["multibutton-button-animation-duration"]&&f.css("animation-duration",o["multibutton-button-animation-duration"]+"s"),+o["multibutton-overlay-show"]){if(o["multibutton-overlay-color"]&&i.css("backgroundColor",o["multibutton-overlay-color"]),o["multibutton-overlay-opacity"]){var w=o["multibutton-overlay-opacity"]/100,v=i.css("backgroundColor");/^rgb\(\d+, \d+, \d+\)$/.test(v)?v=v.replace(/^rgb\((\d+, \d+, \d+)\)$/,"rgba($1, "+w+")"):/^#[0-9a-f]{6}$/i.test(v)&&(v+=Math.floor(255*w).toString(16)),i.css("backgroundColor",v)}o["multibutton-overlay-blur"]&&i.addClass("stream-wood-multibutton-menu--blur")}else i.addClass("stream-wood-multibutton-menu--transparent");+o["multibutton-item-folded"]&&(i.addClass("stream-wood-multibutton-menu--folded"),0===d.indexOf("-")&&i.addClass("stream-wood-multibutton-menu--lefty"));var b=i.find(".stream-wood-multibutton-menu-icon");switch(o["multibutton-icon-color"]&&b.filter(function(){var e=this.getAttribute("style");return!e||-1===e.indexOf("background-color")}).css("backgroundColor",o["multibutton-icon-color"]),o["multibutton-icon-shape"]){case"rounded":b.addClass("stream-wood-multibutton-menu-icon--rounded");break;case"square":b.addClass("stream-wood-multibutton-menu-icon--square");break;case"circle":default:b.addClass("stream-wood-multibutton-menu-icon--circle")}var y=i.children(),k=i.find(".stream-wood-multibutton-menu-item-title");o["multibutton-item-color"]&&k.css("backgroundColor",o["multibutton-item-color"]),o["multibutton-item-font-color"]&&k.css("color",o["multibutton-item-font-color"]),o["multibutton-hide-chat-button"]&&(this.settings.hideAnchor=!0,this.hideBtn()),o["multibutton-hide-registrator-button"]&&this.onEvent("loaded",function(){e(".strmwd-registrator-btn").remove()}),o["multibutton-hide-recall-button"]&&this.onEvent("loaded",function(){e(".stream-wood-recall-btn").remove()}),y.each(function(t,s){var i=(s=e(s)).data();"A"===s.prop("tagName")&&(i.hasOwnProperty("linkThisWindow")&&1==parseInt(i.linkThisWindow)&&"link"===i.action||s.attr({target:"_blank"}),s.attr({href:n(i.src,i.action)})),"sw_recall"===i.action&&(r.recallIsEnabled()||s.hide()),"sw_chat"===i.action&&(r.consultantIsEnabled()||s.hide()),"sw_registrator"===i.action&&(r.registratorIsEnabled()||s.hide()),"sw_generator"===i.action&&(r.generatorIsEnabled()?"mobile"===r.settings.device&&r.settings.design["generator-settings"]["gen-wallpaper"]&&s.hide():s.hide())})},i.prototype.multibuttonStartAnimation=function(){var t=e(".stream-wood-multibutton-container").find(".stream-wood-multibutton-frame");t.removeClass("stream-wood-multibutton-frame--a1 stream-wood-multibutton-frame--a2"),t.first().addClass("stream-wood-multibutton-frame--a2").show()},i.prototype.multibuttonShow=function(){return!this.settings.generatorOpened&&(!this.settings.registratorOpened&&(!this.settings.recallOpened&&void e(".stream-wood-multibutton-container").fadeIn(300)))},i.prototype.multibuttonHide=function(){this.multibuttonCloseMenu(),e(".stream-wood-multibutton-container").fadeOut(300)},i.prototype.multibuttonCloseMenu=function(){if(this.settings.multibuttonOpened){this.settings.multibuttonOpened=!1;var t=e(".stream-wood-multibutton-container"),s=t.find(".stream-wood-multibutton"),n=t.find(".stream-wood-multibutton-hide"),i=e(".stream-wood-multibutton-menu"),o=t.find(".stream-wood-multibutton-menu-close"),r=s.find(".stream-wood-multibutton-frame");r.length>1?this.multibuttonStartAnimation():r.show(),o.hide(),n.css({top:"",right:""});var a=300;this.settings.design["multibutton-menu-show-animation"]&&(a=0),i.stop().slideUp(a,function(){i.trigger("hidden")})}},i.prototype.multibuttonOpenMenu=function(){if(!this.settings.multibuttonOpened){this.settings.multibuttonOpened=!0;var t=e(".stream-wood-multibutton-container"),s=t.find(".stream-wood-multibutton"),n=t.find(".stream-wood-multibutton-hide"),i=e(".stream-wood-multibutton-menu"),o=t.find(".stream-wood-multibutton-menu-close");s.children().hide(),o.show(),n.css({top:30,right:12});var r=300;this.settings.design["multibutton-menu-show-animation"]&&(r=0),i.stop().trigger("show").slideDown(r,function(){i.trigger("shown")})}},i.prototype.multibuttonInitEvents=function(){var t=this,s=e(".stream-wood-multibutton-container"),n=s.find(".stream-wood-multibutton"),i=s.find(".stream-wood-multibutton-hide"),o=e(".stream-wood-multibutton-menu"),r=o.find(".stream-wood-multibutton-menu-item");n.off("click"),i.off("click"),o.off("show"),r.off("click"),n.on("click",function(e){e.preventDefault(),t.settings.multibuttonOpened?t.multibuttonCloseMenu():t.multibuttonOpenMenu()}),i.on("click",function(e){e.preventDefault(),t.multibuttonHide()}),o.on("show",function(){t.settings.invitationOpened&&t.slideDownInvitation(),(t.settings.chatOpened||t.settings.feedbackOpened)&&t.hideChat()}),r.on("click",function(s){"sw_"===e(this).data("action").substr(0,3)&&(s.preventDefault(),s.stopPropagation()),t.multibuttonItemClick(this),t.goalIsAchieved("multibutton")}),e(window).on("resize.streamwood",function(){t.multibuttonReposMenu(16)})},i.prototype.multibuttonSaveClick=function(s){var n={label:s};e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"multibuttonClick",Params:t(n),swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:document.URL}).done(function(e){})},i.prototype.multibuttonItemClick=function(t){var s=e(t).data(),n=1;if(s.hasOwnProperty("ver")&&"v2"==s.ver)n=2;switch(s.action){case"sw_generator":1==n?this.multibuttonCloseMenu():this.multibuttonCloseMenuV2(),this.showGenerator();break;case"sw_registrator":1==n?this.multibuttonCloseMenu():this.multibuttonCloseMenuV2(),this.showRegistrator();break;case"sw_recall":1==n?this.multibuttonCloseMenu():this.multibuttonCloseMenuV2(),this.settings.recallSource="multibutton",this.showRecall();break;case"sw_chat":1==n?this.multibuttonCloseMenu():this.multibuttonCloseMenuV2(),"mobile"!==this.settings.device||this.settings.design.noMobileOptimize?this.slideUp():this.openMobileChat()}var i=e.trim(t.innerText);this.multibuttonSaveClick(i),this.runTrigger.apply(this,["onafterclickmultibutton"])},i.prototype.unibuttonShow=function(){var t=e(o.unibutton);if(t.prependTo(document.body),this.settings.design["unibutton-title"]&&t.find("div").html(this.settings.design["unibutton-title"]),this.settings.design["unibutton-url"]){var s=this.settings.design["unibutton-url-self"]?"_top":"_blank";t.attr({href:this.settings.design["unibutton-url"],target:s})}this.settings.design["unibutton-button-color"]&&t.css("background-color","#"+this.settings.design["unibutton-button-color"]),this.settings.design["unibutton-font-color"]&&t.css("color","#"+this.settings.design["unibutton-font-color"]),this.settings.design["unibutton-button-topbottom-pos"]&&this.settings.design["unibutton-button-offset-y"]&&t.css(this.settings.design["unibutton-button-topbottom-pos"],this.settings.design["unibutton-button-offset-y"]),this.settings.design["unibutton-button-leftright-pos"]&&this.settings.design["unibutton-button-offset-x"]&&t.css(this.settings.design["unibutton-button-leftright-pos"],this.settings.design["unibutton-button-offset-x"]),this.settings.design["unibutton-close-button"]&&t.find(".streamwood-unibutton-close").show(),this.settings.design["unibutton-picture"]?(t.addClass("streamwood-unibutton--with-image"),"1d2646bb0776c36c31b346f53149400a"==this.settings.swDomainKey&&t.addClass("streamwood-unibutton-sm"),t.append('<div class="unibutton-img-preload" style="background-image:url('+this.settings.design["unibutton-picture"]+')"></div>'),this.settings.design["unibutton-picture-flip"]&&t.addClass("streamwood-unibutton--flipper")):t.find(".unibutton-img-preload").remove(),this.runTrigger.apply(this,["onafterunibuttonshow"])},i.prototype.webpushModalShow=function(){e(document.body).find(".wrapper").addClass("strmwd-blur");var t=e(o[this.settings.design["webpush-modal-type"]]);t.prependTo(document.body),this.settings.design["webpush-title"]&&t.find("h2").html(this.settings.design["webpush-title"]),this.settings.design["webpush-text"]&&t.find("p").html(this.settings.design["webpush-text"]),this.settings.design["webpush-button-title"]&&t.find("button").html(this.settings.design["webpush-button-title"]),this.settings.design["webpush-button-color"]&&(t.find("button").css("background-color","#"+this.settings.design["webpush-button-color"]),t.find(".img-wrap").css("background-color","#"+this.settings.design["webpush-button-color"])),this.settings.design["webpush-title-font-family"]&&t.find("h2").css("font-family",this.settings.design["webpush-title-font-family"]),this.settings.design["webpush-title-font-size"]&&t.find("h2").css("font-size",this.settings.design["webpush-title-font-size"]+"px"),this.settings.design["webpush-text-font-family"]&&t.find("p").css("font-family",this.settings.design["webpush-text-font-family"]),this.settings.design["webpush-text-font-size"]&&t.find("p").css("font-size",this.settings.design["webpush-text-font-size"]+"px"),this.settings.design["webpush-button-font-family"]&&t.find("button").css("font-family",this.settings.design["webpush-button-font-family"]),this.settings.design["webpush-button-font-size"]&&t.find("button").css("font-size",this.settings.design["webpush-button-font-size"]+"px"),this.settings.design["webpush-button-font-color"]?(t.find("button").css("color","#"+this.settings.design["webpush-button-font-color"]),t.find(".img-wrap").css("background-image","url("+this.settings.serverUrl+"/StreamWood/img/bgr/ring_"+this.settings.design["webpush-button-font-color"]+".png)")):t.find(".img-wrap").css("background-image","url("+this.settings.serverUrl+"/StreamWood/img/bgr/ring_ffffff.png)"),e(".webpush-wrap").css("visibility","visible"),this.webpushOnShow()},i.prototype.webpushModalHide=function(){e(".wrapper").removeClass("strmwd-blur"),e(".webpush-wrap").hide(),e(".webpush-wrap").css("visibility","hidden"),this.webpushOnClose()},i.prototype.unibuttonHide=function(){e(".streamwood-unibutton").hide(),this.unibuttonOnClose()},i.prototype.webpushServiceWorkerCheck=function(){return!0},i.prototype.webpushCheckMobileHide=function(){return 1==this.settings.design["webpush-mobile-off"]&&document.body.clientWidth<420},i.prototype.formatNumber=function(e,t){var s=0;return e=e.split("").reverse().join(""),(t=t.split("").reverse().join("")).replace(/X{1}/g,function(){return e.slice(s,++s)}).split("").reverse().join("")},i.prototype.calltrackingShowPhoneNumber=function(){var t=this.settings.design["calltracking-number"];if(!t||t.length<10)return!1;var s=this.formatNumber(this.settings.design["calltracking-number"],this.settings.design["calltracking-number-format"]),n=this.settings.design["calltracking-phone-selector"];return n+=n?", .streamwood-calltracking-number":".streamwood-calltracking-number",e(n).html(s).attr("href","tel:"+t),!0},i.prototype.vkPost=function(){var t=this,s=(screen.width-656)/2,n=(screen.height-377)/4;this.settings.zalikeOpened=!0,this.serviceWin=open(t.settings.serverUrl+"/zalikepost/"+t.settings.swDomainKey+"/"+t.settings.sessionId+"/?get=addPost","publish","width=656,height=377, top="+n+", left="+s+",resizable=yes,scrollbars=yes,status=yes"),e.getJSON(t.settings.serverUrl+"/zalikepost/?get=clickPost",{k:t.settings.swDomainKey,session_id:t.settings.sessionId},function(e){t.setInterval.call(t,"checkVk",function(){t.serviceWin.closed&&(t.checkVk.apply(t,[e]),t.deleteInterval.apply(t,["checkVk"]),t.settings.zalikeOpened=!1)},10)})},i.prototype.checkVk=function(t){e.getJSON(this.settings.serverUrl+"/zalikepost/?get=checkPost",{z_id:t.id},function(t){2===t.status&&e(".stream-wood-zalike-window-body").html('<div class="stream-wood-zalike-window-body-result">'+this.settings.design["zalike-content-after"]+"</div>").fadeIn("slow")})},i.prototype.haveOpenedWidgets=function(){return this.settings.chatOpened||this.settings.invitationOpened||this.settings.noReplyOpened||this.settings.generatorOpened||this.settings.feedbackOpened||this.settings.recallOpened||this.settings.registratorOpened},i.prototype.showZalike=function(){this.createZalike(this.settings.design)},i.prototype.updateSession=function(e){if(e){e!=this.getSessionId()&&this.deleteCookie(this.strings.timeAll);var t=new Date;t.setHours(t.getHours()+20),this.setCookie(this.strings.sessionId,e,t),this.settings.sessionId=e}else this.deleteCookie(this.strings.sessionId),this.settings.sessionId=""},i.prototype.reposChat=function(){var t=e(".stream-wood-chat"),s={},n=this.getBlockSizeAndPosition(t);switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-n.height;break;case"left":s.marginLeft=-n.width;break;case"right":s.marginRight=-n.width;break;default:s.marginBottom=-n.height}t.css(s)},i.prototype.reposBtn=function(){var t={},s=e(".stream-wood-btn"),n=this.getBlockSizeAndPosition(s);switch(this.settings.design["anchor-position"]){case"top":t.marginTop=-n.height;break;case"left":t.marginLeft=-n.height;break;case"right":t.marginRight=-n.height;break;default:t.marginBottom=-n.height}s.stop().css(t)},i.prototype.hideBtn=function(){var t=e(".stream-wood-btn");return 0!==t.length&&(!t.is(":hidden")&&(this.stopBtnTimer(),t.hide(),void this.reposBtn()))},i.prototype.reposNoReply=function(){var t=e(".stream-wood-noreply"),s=this.getBlockSizeAndPosition(t),n={};switch(this.settings.design["anchor-position"]){case"top":n.marginTop=-s.height;break;case"left":n.marginLeft=-s.width;break;case"right":n.marginRight=-s.width;break;default:n.marginBottom=-s.height}t.css(n)},i.prototype.hideRecall=function(){if(this.settings.recallOpened){var t=this,s=e(".stream-wood-recall-3"),n=function(){t.recallOnClose.call(t),"#streamwood-call"===window.location.hash&&window.history.pushState({},document.title,window.location.href.split("#")[0]),s.trigger("hidden")},i=this.getRecallPosition();if("center"!==i){var o={},r=e(".stream-wood-recall-side .stream-wood-recall-container").css("width"),a=parseInt(r.substr(0,r.length-2))+4;"left"===i&&(o.marginLeft=-a,s.find(".stream-wood-recall-hide-right .recall-hide").addClass("recall-hide-close").removeClass("recall-hide-open")),"right"===i&&(o.right=-a,s.find(".stream-wood-recall-hide-left .recall-hide").addClass("recall-hide-close").removeClass("recall-hide-open")),s.animate(o,1500,"easeOutExpo",n)}else s.hide(),n()}},i.prototype.canShowRecallButton=function(){if(!this.recallIsEnabled())return!1;if(this.settings.design.show_only_for_new_users){var e=this.Storage.get("alreadyCalled");if(e>0&&(new Date).getTime()-e<this.settings.design.time_to_show_to_new_users)return!1}var t=this.settings.design["recall-settings"],s=this.settings.device;switch(t["button-show"]){case"desktop":return"pc"===s;case"mobile":return"mobile"===s;case"never":return!1;case"always":default:return!0}},i.prototype.hideRecallButton=function(){e(".stream-wood-recall-btn").hide()},i.prototype.showRecallButton=function(){if(this.settings.registratorOpened)return!1;if(this.settings.generatorOpened)return!1;if(this.settings.chatOpened)return!1;if(this.settings.recallOpened)return!1;var t=e(".stream-wood-recall-btn");if(0===t.length)return!1;t.appendTo(document.body).fadeIn(500)},i.prototype.showChat=function(){var t={},s=e(".stream-wood-chat");if(s.stop().appendTo(document.body).show().trigger("show"),s.trigger("shown"),e(window).height()<s.outerHeight()?(s.addClass("stream-wood-absolute"),this.settings.smallWindow=!0):(s.removeClass("stream-wood-absolute"),this.settings.smallWindow=!1),!this.settings.invitationOpened){switch(this.initBtnTimer(),this.settings.design["anchor-position"]){case"top":t.marginTop=0;break;case"left":this.settings.smallWindow&&(t.top=0),t.marginLeft=0;break;case"right":this.settings.smallWindow&&(t.top=0),t.marginRight=0;break;default:t.marginBottom=0}s.css(t)}this.settings.chatOpened||(this.settings.chatOpened=!0)},i.prototype.consultantIsEnabled=function(){var e=this.settings;return("mobile"!==e.device||"mobile"===e.device&&!e.design.hideOnMobile)&&101!=e.tariff},i.prototype.chatBtnCanShow=function(){var e=this.settings;return this.consultantIsEnabled()&&!e.hideAnchor&&!e.registratorOpened&&!e.generatorOpened&&!e.recallOpened},i.prototype.showBtn=function(){var t=this;if(!this.chatBtnCanShow())return!1;if(!this.settings.hideOfflineAnchor||this.settings.manager||this.settings.managers||this.settings.departments){this.initBtnTimer();var s={},n=e(".stream-wood-btn").stop().show();switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.settings.design["anchor-disable-animation"]?n.css(s):n.animate(s,1500,"easeOutBounce",function(){t.runTrigger.apply(t,["onaftershowbtn"])})}},i.prototype.revertChatButtonState=function(){this.settings.hideAll||this.settings.recallOpened||this.settings.generatorOpened||this.settings.registratorOpened||(this.settings.invitationOpened?this.slideUpInvitation():this.settings.noReplyOpened?this.slideUpNoReply():this.settings.chatOpened?this.slideUp():this.showBtn())},i.prototype.getRecallTitle=function(){var e=window.location.href;e=e.replace(/^https?:\/\/(www\.)?/,"");var t=this.settings.design["recall-settings"].title_urls;return void 0!==t[e]&&t[e]},i.prototype.getRecallPosition=function(){var e=0;switch(this.settings.design["recall-settings"]&&(e=parseInt(this.settings.design["recall-settings"]["recall-position"],10)),e){case 1:return"left";case 2:return"right"}return"center"},i.prototype.reposRecall=function(){var t=e(".stream-wood-recall-3"),s={};if("center"===this.getRecallPosition()){s.left="50%";var n=t.css("width"),i=parseInt(n.substr(0,n.length-2));s.marginLeft=-i/2,s.top=Math.max(0,(window.innerHeight-t.height())/2),"leaving"===this.settings.recallSource&&(s.top=0,s.marginLeft=0,s.left=Math.max(0,this.settings.cursorPosition.x-i/2),s.left+i>window.innerWidth&&(s.left=window.innerWidth-i-60)),s.top+=window.scrollY}Object.keys(s).length>0&&t.css(s)},i.prototype.showRecall=function(t){if(!this.recallIsEnabled())return!1;if(this.settings.recallOpened)return!1;this.settings.recallOpened=!0;var s=e(".stream-wood-recall-3");if(0===s.length)return!1;var n={};t=e.extend(n,t);var i=this,o=i.settings.design["recall-settings"];s.appendTo(document.body),this.reposRecall();var r=this.getRecallPosition();if("center"!==r){s.stop().show();var a={};"left"===r&&(a.marginLeft=0,s.find(".stream-wood-recall-hide-right .recall-hide").addClass("recall-hide-open").removeClass("recall-hide-close")),"right"===r&&(a.right=0,s.find(".stream-wood-recall-hide-left .recall-hide").addClass("recall-hide-open").removeClass("recall-hide-close"))}+o["recall-no-shadow"]&&s.addClass("stream-wood-recall-3--no-shadow"),s.trigger("show"),"center"===r?s.fadeIn(1e3,function(){s.trigger("shown")}):s.animate(a,1500,"easeOutExpo",function(){s.trigger("shown")}),this.recallOnShow();var l=s.find(".sw-phone-recall");"NOT_REAL"==i.settings.swDomainKey||"NOT_REAL2"==i.settings.swDomainKey||s.find("#sw-math-captcha").remove(),document.querySelector(".sw-phone-recall").addEventListener("click",function(e){e.isTrusted?i.settings.recallIsTrusted=1:i.settings.recallIsTrusted=0},!1),t.phone&&l.val(t.phone),l.focus(),this.runTrigger.apply(this,["onaftershowrecallbtn"])},e.fn.mathCaptcha=function(t){var s=e.extend({operation:"random",imgPath:"img/",introText:"Please enter the result of equation:"},t),n={1:s.imgPath+"jeden.png",2:s.imgPath+"dwa.png",3:s.imgPath+"trzy.png",4:s.imgPath+"cztery.png",5:s.imgPath+"piec.png",6:s.imgPath+"szesc.png",7:s.imgPath+"siedem.png",8:s.imgPath+"osiem.png",9:s.imgPath+"dziewiec.png",0:s.imgPath+"zero.png"},i={plus:s.imgPath+"dodaj.png",times:s.imgPath+"pomnoz.png"},o=s.imgPath+"rownosc.png",r=function(e){return"<img src='"+e+"'>"},a=function(e){return r(n[e])},l=Math.floor(10*Math.random()),c=Math.floor(10*Math.random());if("random"==s.operation)if(Math.random()>.5)d="plus";else d="times";else var d=s.operation;var u="<p class='math-text'>"+s.introText+"</p>";if("plus"==d)h=r(i.plus);else var h=r(i.times);return this.html(u+a(l)+h+a(c)+r(o)+"<div class='sw-input-math'><input type='input' class='math-result' id='math-captcha-result'></div>"),this.addClass("math-captcha"),e("body").on("keyup","#math-captcha-result",function(){if("plus"==d)t=parseInt(e(this).val())===l+c;else var t=parseInt(e(this).val())===l*c;t?s.successFunction.call():s.failFunction.call()}),this},i.prototype.hideChat=function(t,s){if(void 0===t&&(t=1e3),this.settings.feedback){if(!this.settings.feedbackOpened)return!1;this.settings.feedbackOpened=!1}else{if(!this.settings.chatOpened)return!1;this.settings.chatOpened=!1,this.deleteCookie(this.strings.opened)}var n={},i=this;this.deleteTimeout("swTypeTimer");var o=e(".stream-wood-chat").stop();switch(this.settings.design["anchor-position"]){case"top":n.marginTop=-o.outerHeight();break;case"left":n.marginLeft=-o.outerWidth();break;case"right":n.marginRight=-o.outerWidth();break;default:n.marginBottom=-o.outerHeight()}this.settings.feedback&&this.feedbackOnClose(),o.animate(n,t,"easeOutExpo",function(){o.hide().trigger("hidden"),"function"==typeof s&&s.call(i)}),this.settings.manager.key&&this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode})},i.prototype.slideDownInvitation=function(){if(!this.settings.invitationOpened)return!1;this.settings.invitationOpened=!1;var t=e(".stream-wood-invitation"),s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-t.outerHeight();break;case"left":s.marginLeft=-t.outerWidth();break;case"right":s.marginRight=-t.outerWidth();break;default:s.marginBottom=-t.outerHeight()}t.stop().animate(s,1500,"easeOutExpo",function(){t.hide().trigger("hidden")}),this.invitationOnClose()},i.prototype.slideDownNoReply=function(){if(!this.settings.noReplyOpened)return!1;this.settings.noReplyOpened=!1;var t=e(".stream-wood-noreply");t.stop();var s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=-t.outerHeight();break;case"left":s.marginLeft=-t.outerWidth();break;case"right":s.marginRight=-t.outerWidth();break;default:s.marginBottom=-t.outerHeight()}t.animate(s,1500,"easeOutExpo",function(){t.hide().trigger("hidden")}),this.noreplyOnClose()},i.prototype.slideUp=function(){if(this.settings.feedback){if(this.settings.feedbackOpened)return!1;this.settings.feedbackOpened=!0}else{if(this.settings.chatOpened)return!1;this.settings.chatOpened=!0}var t={},s=e(".stream-wood-chat").stop().appendTo(document.body).show().trigger("show");switch(e(window).height()<s.outerHeight()?(s.addClass("stream-wood-absolute"),this.settings.smallWindow=!0):(s.removeClass("stream-wood-absolute"),this.settings.smallWindow=!1),this.setCookie(this.strings.opened,1),this.initBtnTimer(),this.settings.design["anchor-position"]){case"top":t.marginTop=0;break;case"left":this.settings.smallWindow&&(t.top=0),t.marginLeft=0;break;case"right":this.settings.smallWindow&&(t.top=0),t.marginRight=0;break;default:t.marginBottom=0}s.animate(t,1e3,"easeOutExpo",function(){s.trigger("shown").find("textarea:visible:eq(0)").focus()}),this.scrollChatDown()},i.prototype.scrollChatDown=function(){var t=e(".stream-wood-chat .sw-messages-list"),s=t.children();if(s.length){var n=0;s.each(function(t,s){n+=e(s).outerHeight(!0)}),t.scrollTop(n)}},i.prototype.slideUpInvitation=function(){if(this.settings.invitationOpened)return!1;this.settings.invitationOpened=!0;var t=e(".stream-wood-invitation");t.stop().show().trigger("show");var s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.animate(s,1500,"easeOutExpo",function(){t.trigger("shown")}),this.playBeep(),this.invitationOnShow()},i.prototype.slideUpNoReply=function(){if(this.settings.noReplyOpened)return!1;this.settings.noReplyOpened=!0;var t=e(".stream-wood-noreply");t.stop().show().trigger("show");var s={};switch(this.settings.design["anchor-position"]){case"top":s.marginTop=0;break;case"left":s.marginLeft=0;break;case"right":s.marginRight=0;break;default:s.marginBottom=0}t.animate(s,1500,"easeOutExpo",function(){t.trigger("shown")})},i.prototype.createChat=function(){var t,s=this,n=e(o.chat);n.find(".sw-close").attr("title",this.languages[this.language].swHideText).unbind("click").click(function(e){s.closeSwBtn.apply(s,[e])}),n.find(".sw-sound").attr("title","Отключить звук").unbind("click").click(function(e){s.toggleSound.apply(s,[e])}),n.find(".good").attr("title",this.languages[this.language].swSetRatingText),n.find(".bad").attr("title",this.languages[this.language].swSetRatingText),n.find(".good, .bad").unbind("click").click(function(){s.setRating.apply(s,[this])}).end().find("#file_upload").change(function(){s.uploadImage.apply(s)}).end().find(".sw-send-btn-text").text(this.languages[this.language].sendButtonText).end().find(".sw-error").hide().end().appendTo("body"),(t=!1===s.showCopyright("consultant"))||e("<div>").addClass("sw-copyright").html(' <a target="_blank" class="sw-copy" href="https://streamwood.ru/?utm_source=consultant&utm_medium=self&utm_campaign='+location.hostname+"&utm_content="+this.settings.sessionId+'&utm_term=">'+this.languages[this.language].swWorkedOnText+" StreamWood <span>"+this.settings.version+"</span></a>").appendTo(".stream-wood-chat .sw-container"),t||this.settings.hideCloseBtn||e("<a>").addClass("sw-close-down").attr("title","Спрятать").appendTo(".stream-wood-chat .sw-copyright").unbind("click").click(function(e){s.closeSwBtn.apply(s,[e])}),this.settings.hideCloseBtn&&(n.find(".sw-close").unbind("*").remove(),n.find(".sw-sound").css("right",0))},i.prototype.uploadImage=function(){var t=this,s=new FormData;s.append("qqfile",e("#file_upload")[0].files[0]),e.ajax({type:"POST",url:t.settings.serverUrl+"/upload/",data:s,crossDomain:!0,processData:!1,contentType:!1,dataType:"json",success:function(e){if(!0===e.success){var s=t.settings.filesServerUrl+"/chat/"+e.name+"."+e.ext;t.genMessage.apply(t,[s]),t.sendMessage.apply(t,[s])}}})},i.prototype.genMessage=function(t){var s=this,n=[],i={},o=new Date;i.message=t,i.d=o.getDate(),i.m=o.getMonth()+1,i.y=o.getFullYear(),i.hour=o.getHours(),i.min=o.getMinutes(),i.wait=!0,n.push(i),s.appendMessages.apply(s,[n]),s.scrollChatDown(),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove()},i.prototype.sendMessage=function(t){var s=this,n=s.settings.clientName;n||(n=s.languages[s.language].swGuestNameText);var i={swClientName:n,message:t,managerId:s.settings.manager.id,managerKey:s.settings.manager.key,hostKey:s.settings.swDomainKey,visor:s.settings.superVisorMode,ip:s.settings.ipAddr};s.settings.manager.from_mobile>0?e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:i,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):window.swc_socket&&s.IOemit.apply(s,["swSendMessageFromSession",i])},i.prototype.createInvitation=function(){var t=this,s=this.appendContactInfo(),n=e(o.invitation);n.find("dt").text(this.languages[this.language].swYouMessageText);var i=!+this.settings.design.agree_required;+this.settings.design.no_personal_data||o.personal_data(this.settings.design.personal_data_text,i).appendTo(n.find(".sw-newmessage")),+this.settings.design.advertising_agree&&o.advertising_agree(this.settings.design.advertising_agree_url,i,this.settings.design.advertising_agree_text).appendTo(n.find(".sw-newmessage")),s&&n.find(".sw-newmessage").prepend(s),n.find("textarea").unbind("keypress").keypress(function(t){!t.ctrlKey||13!==t.keyCode&&13!==t.which&&10!==t.keyCode&&10!==t.which||e(".stream-wood-chat .sw-send-btn").click()}).end().find(".sw-cancel-btn").text(this.languages[this.language].swCancelButtonText).unbind("click").click(function(){return t.slideDownInvitation.call(t),!1}).end().find(".jssw-send-btn").text(this.languages[this.language].swQuestButtonText).unbind("click").click(function(){if(!1===t.startDialogContactChooser.call(t,".stream-wood-invitation"))return!1;var s=e(".stream-wood-invitation"),n=s.find(".sw-message");if(n.val()){var i=e(".stream-wood-chat");s.find(".sw-phone").length>0&&i.find(".sw-phone").val(s.find(".sw-phone").val()),s.find(".sw-email").length>0&&i.find(".sw-email").val(s.find(".sw-email").val()),s.find(".sw-contact-type").length>0&&i.find(".sw-contact-type").val(s.find(".sw-contact-type").val()),i.find(".sw-message").val(n.val()),i.find(".sw-send-btn").click(),t.slideDownInvitation.call(t),t.slideUp.call(t)}else n.focus();return!1}).end().appendTo("body"),void 0!==this.settings.design.sendContact&&this.appendContactInfoProperties(e(".stream-wood-invitation"));var r={},a=this.getBlockSizeAndPosition(n);switch(this.settings.design["anchor-position"]){case"top":r.marginTop=-a.height;break;case"left":r.marginLeft=-a.width;break;case"right":r.marginRight=-a.width;break;default:r.marginBottom=-a.height}n.css(r)},i.prototype.createGenerator=function(){var t,s,n,i=this;t=this.settings.design["generator-title"]||this.languages[this.language].swGeneratorTitleText,s=this.settings.design["generator-content"]||this.languages[this.language].swNoReplyContactsText,this.settings.design["generator-id"]?this.settings.design["generator-img"]&&(this.settings.design["generator-img"].length<10&&(this.settings.design["generator-img"]="generator."+this.settings.design["generator-img"]),n=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/"+this.settings.design["generator-img"]):this.settings.design["generator-img"]?(this.settings.design["generator-img"].length<10&&(this.settings.design["generator-img"]="generator."+this.settings.design["generator-img"]),n=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/common/"+this.settings.design["generator-img"]):n=this.settings.serverUrl+"/img/generator-picture.png";var r=e(o.generator);r.find(".generator-title").text(t),r.appendTo(document.body),this.settings.design["generator-imgoff"]&&1==this.settings.design["generator-imgoff"]||e('<img class="sw-action" src="'+n+'" width="360" height="200" alt="">').appendTo(".stream-wood-generator .sw-container .sw-manager"),this.settings.design["generator-counteroff"]&&1==this.settings.design["generator-counteroff"]?e("<div>").addClass("date").appendTo(".stream-wood-generator .sw-container .sw-manager"):(e("<div>").addClass("gen-counter").append(e('<span class="gen-counter-text sw-generator-day" id="streamwood-generator-day">').text("00")).append(e('<span class="gen-counter-text sw-generator-hour" id="streamwood-generator-hour">').text("00")).append(e('<span class="gen-counter-text sw-generator-min" id="streamwood-generator-min">').text("00")).append(e('<span class="gen-counter-text sw-generator-sec" id="streamwood-generator-sec">').text("00")).appendTo(".stream-wood-generator .sw-container .sw-manager"),e("<div>").addClass("gen-date").append(e('<div class="gen-date-text sw-generator-date-day">').text(this.languages[this.language].swGenDaysText0)).append(e('<div class="gen-date-text sw-generator-date-hour">').text(this.languages[this.language].swGenHoursText0)).append(e('<div class="gen-date-text sw-generator-date-min">').text(this.languages[this.language].swGenMinutesText0)).append(e('<div class="gen-date-text sw-generator-date-sec">').text(this.languages[this.language].swGenSecondsText0)).appendTo(".stream-wood-generator .sw-container .sw-manager"));var a,l=parseInt(this.settings.design["generator-contact-type"],10)||2;a=1===l||3===l?this.languages[this.language].swGenEmailText:this.languages[this.language].swGenPhoneText,3===l?e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<input type="text" class="sw-gen-name sw-gen-name-margin">').attr("placeholder",this.languages[this.language].swGenNameText)).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<input type="text" class="sw-gen-email">').attr("placeholder",a)).append(e('<a class="sw-send-btn sw-append-btn" href="javascript:void(0);">')).append(e('<input type="text" class="sw-gen-phone">').attr("placeholder",this.languages[this.language].swGenPhoneText)).append(e('<a class="sw-send-btn sw-cancel-btn" href="javascript:void(0);">')).append(e('<div class="sw-error sw-email-error">').hide()).appendTo(".stream-wood-generator .sw-container"):e("<div>").addClass("sw-send-group").append(e('<p class="sw-action-text">').html(s)).append(e('<input type="text" class="sw-gen-name">').attr("placeholder",this.languages[this.language].swGenNameText)).append(e('<a class="sw-send-btn sw-append-btn" href="javascript:void(0);">')).append(e('<div class="sw-error sw-name-error">').hide()).append(e('<input type="text" class="sw-gen-email">').attr("placeholder",a)).append(e('<a class="sw-send-btn sw-cancel-btn" href="javascript:void(0);">')).append(e('<div class="sw-error sw-email-error">').hide()).appendTo(".stream-wood-generator .sw-container");var c=r.find(".sw-send-group");if(void 0!==this.settings.design["generator-user-field"]){var d=this.settings.design["generator-user-field"];e('<input type="text" class="sw-gen-user-field sw-gen-user-field-margin">').prop("placeholder",d).insertAfter(c.find(".sw-cancel-btn"))}this.settings.design["generator-is-close-btn"]&&e('<a href="#" class="sw-generator-close-btn">').on("click",function(e){e.preventDefault(),i.hideGenerator.call(i),i.generatorInitTimer.call(i)}).appendTo(r),c.find(".sw-send-btn").append(e('<span class="sw-yes-button-span">').text(this.languages[this.language].swGenBtnYesText)),c.find(".sw-cancel-btn").html("").append(e('<span class="sw-no-button-span">').text(this.languages[this.language].swGenBtnNoText)),2===l&&r.find(".sw-gen-email").removeClass("sw-gen-email").addClass("sw-gen-phone");var u="+"+this.settings.phonePrefix;if(c.find(".sw-gen-phone").val(u).unbind("blur").blur(function(){this.value||(this.value=u)}),void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]){var h='<select name="sw-select-department" class="sw-select-department">';void 0!==this.settings.design["generator-choice-department-required"]&&"1"==this.settings.design["generator-choice-department-required"]&&(h+='<option value="">'+this.languages[this.language].swChangeDepText+"</option>"),e(this.settings.generatorDepartments).each(function(){h+='<option value="'+this.id+'">'+this.name+"</option>"}),h+="</select>",e("<div>").addClass("sw-generator-departments").html(h).appendTo(".stream-wood-generator .sw-container"),e('<div class="sw-error sw-department-error">').hide().appendTo(".stream-wood-generator .sw-send-group")}var p=!+this.settings.design["generator-agree-required"];if(+this.settings.design["generator-advertising-agree"]){var g=o.advertising_agree(this.settings.design["generator-advertising-agree-url"],p);c.after(g)}if(!+this.settings.design["generator-no-personal-data"]){var f=o.personal_data(this.settings.design["generator-personal-data-text"],p);c.after(f)}i.showCopyright("generator")&&e("<div>").addClass("sw-copyright").html(' <a target="_blank" class="sw-copy" href="https://streamwood.ru/?utm_source=generator&utm_medium=self&utm_campaign='+location.hostname+"&utm_content="+this.settings.sessionId+'&utm_term=">'+this.languages[this.language].swWorkedOnText+" StreamWood <span>"+this.settings.version+"</span></a>").appendTo(".stream-wood-generator .sw-container"),c.find(".sw-gen-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-gen-phone")&&i.checkPhoneKeyDownForRecall.apply(i,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-gen-phone")&&i.checkPhoneKeyUpForRecall.apply(i,[t])}),c.find(".sw-send-btn").unbind("click").click(function(e){i.generatorSendButtonClick.apply(i,[e])}),c.find(".sw-cancel-btn").unbind("click").click(function(){return i.hideGenerator.call(i),!1}),this.applyGeneratorSettings();var m;m=this.getCookie(this.strings.genCountDown)?new Date(this.getCookie(this.strings.genCountDown)):new Date,m=this.getDateToGenerator(m);var w=new Date;this.getCookie(this.strings.genActionEnd)?m!=new Date(this.getCookie(this.strings.genActionEnd))&&(this.deleteCookie(this.strings.genActionEnd),this.deleteCookie(this.strings.genCountDown),m=this.getDateToGenerator(w),this.setCookie(this.strings.genActionEnd,m,m),this.setCookie(this.strings.genCountDown,new Date,m)):(this.setCookie(this.strings.genActionEnd,m,m),this.setCookie(this.strings.genCountDown,new Date,m)),e.browser.msie&&parseInt(e.browser.version)<9||this.generatorIsEnabled()&&(this.settings.generatorEndTime=m,this.generatorInitTimer())},i.prototype.createNewVersionGenerator=function(){var t,s,n=this;t=this.settings.design["generator-title"]||this.languages[this.language].swGeneratorTitleText,s=this.settings.design["generator-content"]||this.languages[this.language].swNoReplyContactsText;var i=e(o.generator_new);if(i.appendTo("body"),i.find(".generator-title-span").html(t),i.find(".stream-wood-generator-action-text").html(s),+this.settings.design["generator-title-off"]&&(this.settings.design["generator-settings"]["gen-wallpaper"]?i.find(".generator-title-span").hide():i.find(".stream-wood-generator-title").hide()),void 0!==this.settings.design["generator-img"]){var r=this.settings.imgServerUrl+"/host/"+this.settings.swDomainKey+"/"+this.settings.design["generator-id"]+"/gen-action."+this.settings.design["generator-img"];r+="?"+(this.settings.design.updated_at||""),i.find(".stream-wood-generator-action-img").css("background-image","url("+r+")")}void 0!==this.settings.design["generator-imgoff"]&&"1"==this.settings.design["generator-imgoff"]&&i.find(".stream-wood-generator-action-img").hide(),void 0!==this.settings.design["generator-counteroff"]&&"1"==this.settings.design["generator-counteroff"]&&(i.find(".stream-wood-generator-counter").hide(),i.find(".stream-wood-generator-counter-text-box").hide()),void 0!==this.settings.design["generator-content-title"]&&i.find(".stream-wood-generator-action-title").html(this.settings.design["generator-content-title"]),void 0!==this.settings.design["generator-rekl-note"]&&""!=this.settings.design["generator-rekl-note"]?i.find(".stream-wood-generator-rekl-note").html(this.settings.design["generator-rekl-note"]):i.find(".stream-wood-generator-rekl-note").remove(),void 0!==this.settings.design["generator-yes-btn-text"]&&i.find(".stream-wood-generator-send-btn").text(this.settings.design["generator-yes-btn-text"]),void 0!==this.settings.design["generator-no-btn-text"]&&i.find(".stream-wood-generator-cancel-btn").text(this.settings.design["generator-no-btn-text"]);var a=this.settings.design["generator-contact-type"];"2"==a?(i.find(".stream-wood-generator-client-phone").hide(),i.find(".stream-wood-generator-client-email").show()):"3"==a?(i.find(".stream-wood-generator-client-phone").show(),i.find(".stream-wood-generator-client-email").show().find(".stream-wood-generator-cancel-btn").remove()):"4"==a&&(i.find(".stream-wood-generator-client-phone").show(),i.find(".stream-wood-generator-client-email").show().find(".stream-wood-generator-cancel-btn").remove(),i.find(".stream-wood-generator-phone-or-email").show());var l=i.find(".stream-wood-generator-client-data");if(void 0!==this.settings.design["generator-user-field"]){var c=this.settings.design["generator-user-field"],d=e('<input type="text" class="sw-gen-user-field stream-wood-generator-input">').prop("placeholder",c);e('<div class="stream-wood-generator-client-user-field">').append(d).appendTo(l)}+this.settings.design["generator-is-close-btn"]?i.find(".stream-wood-generator-close").hide():i.find(".stream-wood-generator-close").unbind("click").bind("click",function(e){return e.preventDefault(),n.hideGenerator.call(n),!1});var u="+"+this.settings.phonePrefix;l.find(".sw-gen-phone").unbind("focus").focus(function(){this.value||(this.value=u)}).unbind("blur").blur(function(){this.value===u&&(this.value="")});var h=this.languages[this.language].swChangeDepText;if(this.settings.design["generator-choice-department-text"]&&this.settings.design["generator-choice-department-text"].length>0&&(h=this.settings.design["generator-choice-department-text"]),void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]){var p='<select name="sw-select-department" class="sw-select-department stream-wood-generator-select">';void 0!==this.settings.design["generator-choice-department-required"]&&"1"==this.settings.design["generator-choice-department-required"]&&(p+='<option value="">'+h+"</option>"),e(this.settings.generatorDepartments).each(function(){p+='<option value="'+this.id+'">'+this.name+"</option>"}),p+="</select>",e("<div>").addClass("stream-wood-generator-departments").html(p).appendTo(l).append(e('<div class="sw-error sw-department-error">').hide())}var g=!+this.settings.design["generator-agree-required"];+this.settings.design["generator-no-personal-data"]||(l.append(o.personal_data(this.settings.design["generator-personal-data-text"],g)),l.append(e('<div class="sw-error sw-personal-agree-error">').hide())),+this.settings.design["generator-advertising-agree"]&&(l.append(o.advertising_agree(this.settings.design["generator-advertising-agree-url"],g,this.settings.design["generator-advertising-agree-text"])),l.append(e('<div class="sw-error sw-advertising-agree-error">').hide())),!1===n.showCopyright("generator")&&i.find(".stream-wood-generator-copyright").hide(),l.find(".sw-gen-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-gen-phone")&&n.checkPhoneKeyDownForRecall.apply(n,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-gen-phone")&&n.checkPhoneKeyUpForRecall.apply(n,[t])}),l.find(".stream-wood-generator-send-btn").unbind("click").click(function(e){n.generatorNewVersionSendButtonClick.apply(n,[e])}),l.find(".stream-wood-generator-cancel-btn").unbind("click").click(function(){return n.hideGenerator.call(n),n.runTrigger.apply(n,["onafterclickgeneratorcancelbtn"]),!1}),this.applyNewVersionGeneratorSettings(),+this.settings.design["generator-sms-block"]?(i.find(".stream-wood-sms-block").show(),i.find(".stream-wood-sms-block .sw-sms-block-btn").unbind("click").bind("click",function(){if(!n.settings.smsBlockSending){n.settings.smsBlockSending=!0;var t=e(this).closest(".stream-wood-sms-block");t.find(".sw-sms-block-btn").addClass("sw-sms-block-btn-disable");var s=i.find(".sw-gen-phone").val();if(!n.checkPhoneBySettings(s))return t.siblings(".sw-sms-block-error").html("<p>Заполните поле телефон</p>").show(),n.settings.smsBlockSending=!1,t.find(".sw-sms-block-btn").removeClass("sw-sms-block-btn-disable"),!1;t.siblings(".sw-sms-block-error").html("").hide(),n.smsBlockSend.call(n,e(this),s)}})):i.find(".stream-wood-sms-block").hide();var f;f=this.getCookie(this.strings.genCountDown)?new Date(this.getCookie(this.strings.genCountDown)):new Date,f=this.getDateToGeneratorNew(f);var m=new Date;if(this.getCookie(this.strings.genActionEnd)?f!=new Date(this.getCookie(this.strings.genActionEnd))&&(this.deleteCookie(this.strings.genActionEnd),this.deleteCookie(this.strings.genCountDown),f=this.getDateToGeneratorNew(m),this.setCookie(this.strings.genActionEnd,f,f),this.setCookie(this.strings.genCountDown,new Date,f)):(this.setCookie(this.strings.genActionEnd,f,f),this.setCookie(this.strings.genCountDown,new Date,f)),e.browser.msie&&parseInt(e.browser.version)<9);else if(this.generatorIsEnabled()){this.settings.generatorEndTime=f;var w=new Date,v=!0;void 0!==this.settings.design["generator-hide-when-timer-end"]&&1==parseInt(this.settings.design["generator-hide-when-timer-end"])&&f<w&&(v=!1),v&&this.generatorInitTimer()}},i.prototype.showRecallSelectTimeForm=function(){var t=e(".stream-wood-recall-3");t.addClass("stream-wood-recall-3--timepick").find(".sw-recall-select-time").hide().end().find(".sw-recall-send-btn").text("Жду звонка!"),t.find(".stream-wood-sms-block").is(":visible")&&(t.find(".phone-number-text").hide(),t.find(".stream-wood-recall-number").css("margin-top","6px")),this.settings.selectRecallTime=!0},i.prototype.hideRecallSelectTimeForm=function(){var t=e(".stream-wood-recall-3");t.removeClass("stream-wood-recall-3--timepick");var s=this.settings.design["recall-settings"];t.find(".sw-recall-send-btn").text(s["recall-send-btn-text"]||"Жду звонка!"),this.settings.selectRecallTime=!1},i.prototype.number_best=function(e){function t(e){return n(s(i(e)))}function s(e){return r(a(o(e),8*e.length))}function n(e){for(var t,s=f?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<e.length;i++)t=e.charCodeAt(i),n+=s.charAt(t>>>4&15)+s.charAt(15&t);return n}function i(e){for(var t,s,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),s=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=s&&s<=57343&&(t=65536+((1023&t)<<10)+(1023&s),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function o(e){for(var t=Array(e.length>>2),s=0;s<t.length;s++)t[s]=0;for(s=0;s<8*e.length;s+=8)t[s>>5]|=(255&e.charCodeAt(s/8))<<s%32;return t}function r(e){for(var t="",s=0;s<32*e.length;s+=8)t+=String.fromCharCode(e[s>>5]>>>s%32&255);return t}function a(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var s=1732584193,n=-271733879,i=-1732584194,o=271733878,r=0;r<e.length;r+=16){var a=s,l=n,g=i,f=o;n=h(n=h(n=h(n=h(n=u(n=u(n=u(n=u(n=d(n=d(n=d(n=d(n=c(n=c(n=c(n=c(n,i=c(i,o=c(o,s=c(s,n,i,o,e[r+0],7,-680876936),n,i,e[r+1],12,-389564586),s,n,e[r+2],17,606105819),o,s,e[r+3],22,-1044525330),i=c(i,o=c(o,s=c(s,n,i,o,e[r+4],7,-176418897),n,i,e[r+5],12,1200080426),s,n,e[r+6],17,-1473231341),o,s,e[r+7],22,-45705983),i=c(i,o=c(o,s=c(s,n,i,o,e[r+8],7,1770035416),n,i,e[r+9],12,-1958414417),s,n,e[r+10],17,-42063),o,s,e[r+11],22,-1990404162),i=c(i,o=c(o,s=c(s,n,i,o,e[r+12],7,1804603682),n,i,e[r+13],12,-40341101),s,n,e[r+14],17,-1502002290),o,s,e[r+15],22,1236535329),i=d(i,o=d(o,s=d(s,n,i,o,e[r+1],5,-165796510),n,i,e[r+6],9,-1069501632),s,n,e[r+11],14,643717713),o,s,e[r+0],20,-373897302),i=d(i,o=d(o,s=d(s,n,i,o,e[r+5],5,-701558691),n,i,e[r+10],9,38016083),s,n,e[r+15],14,-660478335),o,s,e[r+4],20,-405537848),i=d(i,o=d(o,s=d(s,n,i,o,e[r+9],5,568446438),n,i,e[r+14],9,-1019803690),s,n,e[r+3],14,-187363961),o,s,e[r+8],20,1163531501),i=d(i,o=d(o,s=d(s,n,i,o,e[r+13],5,-1444681467),n,i,e[r+2],9,-51403784),s,n,e[r+7],14,1735328473),o,s,e[r+12],20,-1926607734),i=u(i,o=u(o,s=u(s,n,i,o,e[r+5],4,-378558),n,i,e[r+8],11,-2022574463),s,n,e[r+11],16,1839030562),o,s,e[r+14],23,-35309556),i=u(i,o=u(o,s=u(s,n,i,o,e[r+1],4,-1530992060),n,i,e[r+4],11,1272893353),s,n,e[r+7],16,-155497632),o,s,e[r+10],23,-1094730640),i=u(i,o=u(o,s=u(s,n,i,o,e[r+13],4,681279174),n,i,e[r+0],11,-358537222),s,n,e[r+3],16,-722521979),o,s,e[r+6],23,76029189),i=u(i,o=u(o,s=u(s,n,i,o,e[r+9],4,-640364487),n,i,e[r+12],11,-421815835),s,n,e[r+15],16,530742520),o,s,e[r+2],23,-995338651),i=h(i,o=h(o,s=h(s,n,i,o,e[r+0],6,-198630844),n,i,e[r+7],10,1126891415),s,n,e[r+14],15,-1416354905),o,s,e[r+5],21,-57434055),i=h(i,o=h(o,s=h(s,n,i,o,e[r+12],6,1700485571),n,i,e[r+3],10,-1894986606),s,n,e[r+10],15,-1051523),o,s,e[r+1],21,-2054922799),i=h(i,o=h(o,s=h(s,n,i,o,e[r+8],6,1873313359),n,i,e[r+15],10,-30611744),s,n,e[r+6],15,-1560198380),o,s,e[r+13],21,1309151649),i=h(i,o=h(o,s=h(s,n,i,o,e[r+4],6,-145523070),n,i,e[r+11],10,-1120210379),s,n,e[r+2],15,718787259),o,s,e[r+9],21,-343485551),s=p(s,a),n=p(n,l),i=p(i,g),o=p(o,f)}return Array(s,n,i,o)}function l(e,t,s,n,i,o){return p(g(p(p(t,e),p(n,o)),i),s)}function c(e,t,s,n,i,o,r){return l(t&s|~t&n,e,t,i,o,r)}function d(e,t,s,n,i,o,r){return l(t&n|s&~n,e,t,i,o,r)}function u(e,t,s,n,i,o,r){return l(t^s^n,e,t,i,o,r)}function h(e,t,s,n,i,o,r){return l(s^(t|~n),e,t,i,o,r)}function p(e,t){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}function g(e,t){return e<<t|e>>>32-t}var f=0;return t(e)},i.prototype.createRecallVersion3=function(){var s,n=this,i=n.settings.design["recall-settings"];if("center"!==this.getRecallPosition())s=e(o.recallside),"a915176028c35ee0356fe030e8b92948"==n.settings.swDomainKey&&s.find(".stream-wood-recall-container").addClass("stream-wood-recall-cont-center");else if(s=e(o.recallcenter),i["recall-header-img"]){var r='url("';r+=n.settings.imgServerUrl,r+="/host/",r+=n.settings.swDomainKey,r+="/"+i["recall-header-img"]+'")',s.addClass("stream-wood-recall-3--with-header").find(".stream-wood-recall-header").css("background-image",r).show()}i.sms_block?(s.find(".stream-wood-recall-number .first").hide(),s.find(".stream-wood-sms-block .sw-sms-block-btn").unbind("click").bind("click",function(){if(!n.settings.smsBlockSending){n.settings.smsBlockSending=!0;var t=e(this).closest(".stream-wood-sms-block");t.find(".sw-sms-block-btn").addClass("sw-sms-block-btn-disable");var i=s.find(".sw-phone-recall").val();if(!n.checkPhoneBySettings(i))return t.siblings(".sw-sms-block-error").html("<p>Заполните поле телефон</p>").show(),n.settings.smsBlockSending=!1,t.find(".sw-sms-block-btn").removeClass("sw-sms-block-btn-disable"),!1;t.siblings(".sw-sms-block-error").html("").hide(),n.smsBlockSend.call(n,e(this),i)}})):s.find(".stream-wood-sms-block").hide(),s.find(".stream-wood-recall-close").unbind("click").bind("click",function(){return n.hideRecall.call(n),n.hideRecallSelectTimeForm.call(n),!1}).end().find(".stream-wood-recall-hide-left").unbind("click").bind("click",function(){return n.settings.recallOpened?n.hideRecall.call(n):(n.settings.recallSource="button",n.showRecall.call(n)),!1}).end().find(".stream-wood-recall-hide-right").unbind("click").bind("click",function(){return n.settings.recallOpened?n.hideRecall.call(n):(n.settings.recallSource="button",n.showRecall.call(n)),!1}).end().find(".sw-phone-recall").val("+7").unbind("keydown").keydown(function(t){n.checkPhoneKeyDownForRecall.apply(n,[t]),13===t.keyCode&&e(".stream-wood-recall-3 .stream-wood-recall-button-container .sw-recall-send-btn").click()}).unbind("focus").focus(function(){"+7"===this.value&&e(this).val("+7").removeClass("sw-phone-empty"),e(this).removeAttr("style"),i["recall-phone-border-color"]&&e(this).css("border-color",i["recall-phone-border-color"]),"mobile"===n.settings.device&&s.css("top",window.scrollY)}).unbind("blur").blur(function(){this.value&&"+7"!==this.value||e(this).val("+7").addClass("sw-phone-empty"),e(this).css("border-color","#d4d2d2")}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-phone-recall")&&n.checkPhoneKeyUpForRecall.apply(n,[t])}).end().find(".sw-recall-select-time-link").unbind("click").bind("click",function(e){e.preventDefault(),n.showRecallSelectTimeForm()}).end().find(".sw-recall-send-btn").unbind("click").click(function(){if(n.settings.recallSending)return!1;n.settings.recallSending=!0;var o=s.find(".sw-phone-recall").val(),r=n.number_best(n.settings.swDomainKey+"="+o),a=s.find(".sw-recall-phone").val();if(!n.checkPersonalCheckboxes(s,"recall-number",n.settings.design["recall-settings"]["recall-advertising-agree-text"],n.settings.design["recall-settings"]["recall-advertising-agree-required"],"recall-number"))return n.settings.recallSending=!1,!1;if(n.settings.swDomainKey,"NOT_REAL"==n.settings.swDomainKey||n.settings.swDomainKey,n.settings.design.recall_departments&&(!(f=e("#select-recall-department").val())||"0"===f))return s.find(".sw-recall-number-error").text("Выберите отдел").show(),n.settings.recallSending=!1,!1;var l=s.find(".sw-sms-block-input").val();if(+n.settings.design["recall-settings"].sms_block&&o&&!l)return n.showError("Заполните все поля","sms-block",s),n.settings.recallSending=!1,!1;if(n.checkPhoneForRussia(o)){if("NOT_REAL"==n.settings.swDomainKey||n.settings.swDomainKey,"+7 ..."!=a)return n.runTrigger.apply(n,["onaftersendrecallcall"]),n.settings.recallSending=!1,!0;var c=document.URL,d=1;n.settings.recallShowTime||(d=0);var u=60*n.getClientServerOffset(),h=n.settings.selectRecallTime?1:0,p=parseInt(e("#recall-select-day").val(),10)+parseInt(e("#recall-select-hour").val(),10);p-=u;var g="";if(n.settings.design.recall_departments){var f=e("#select-recall-department :selected");g=f.val()}else n.settings.design.recall_is_worked_time&&(g=n.settings.design.recall_available_numbers);if(n.settings.phoneSelector){var m=e(n.settings.phoneSelector).eq(0);1===m.length&&(g=m.text().replace(/\D/g,""))}var w={swClientData:n.getClientData()},v=n.getCalltouchSession();v&&(w.calltouchSession=v),+n.settings.design["recall-settings"].sms_block&&(w.swSmsCode=l);var b=n.getPersonalCheckboxes(s);w.swUserPersonalCheckboxes=b;var y={Action:"recallCall",swDomainKey:n.settings.swDomainKey,swKey:n.settings.swKey,swSessionId:n.settings.sessionId,phone:s.find(".sw-phone-recall").val(),message:c,workedTime:d,departmentPhones:g,crmCookie:t(n.getCookiesForCrm()),crmParam:t(n.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href,Params:t(w),selectRecallTime:h,number:r,recallTime:parseInt(p/1e3,10),recallSource:n.settings.recallSource,referal:n.Storage.get("referal")};n.goalIsAchieved("recall"),e.ajax({dataType:"jsonp",url:n.settings.serverUrl+"/api/",data:y}).done(function(t){var s=e(".stream-wood-recall-3"),o=(new Date).getTime();if(n.Storage.set("alreadyCalled",o),t.Errors)e.each(t.Errors,function(e,t){"SMS_ERROR"==t&&n.showError.apply(n,["Введенный код из СМС не верный","sms-block",s])}),s.find(".sw-recall-title-work").html(t.Errors[0]),s.find(".sw-recall-title-start,.sw-recall-phone-container,.sw-recall-timer-container,.sw-recall-select-time").fadeOut(1e3),n.settings.recallSending=!1;else{if(s.find(".stream-wood-recall-container .sw-recall-number-error").hide(),!n.settings.recallShowTime||n.settings.selectRecallTime?(s.find(".stream-wood-recall-number,.stream-wood-recall-button-container,.sw-recall-select-time-container,.sw-recall-select-time,.streamwood-personal-data,.stream-wood-recall-departments").hide(),s.find(".stream-wood-recall-title").text("Мы обязательно Вам перезвоним!")):(s.find(".stream-wood-recall-number").hide(),1==i["recall-timer-mode"]&&(s.find(".stream-wood-recall-number").show().css("text-align","center"),s.find(".stream-wood-recall-number .phone-number-text,.stream-wood-recall-number .sw-phone-recall").hide()),s.find(".sw-recall-send-btn,.sw-recall-select-time,.streamwood-personal-data,.stream-wood-recall-departments").hide(),s.find(".stream-wood-recall-number-wait").show(),s.find(".stream-wood-recall-title").text("Мы перезвоним Вам через"),s.find(".stream-wood-recall-number-wait .phone-number-text-wait").text(s.find(".sw-phone-recall").val())),+n.settings.design["recall-settings"].sms_block&&(s.find(".stream-wood-sms-block").hide(),s.find(".stream-wood-sms-block .sw-sms-block-input").val(""),s.find(".sw-sms-block-error").hide()),t.callId&&(n.settings.callId=t.callId),n.settings.recallShowTime||!n.settings.selectRecallTime){var r=n.getRecallTimerValue(),a=(new Date).getTime()+1e3*r,l=s.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit"),c=e("#sw-slice").html("").show();if(r>5){var d=function(){n.getCallStatus()};n.setTimeout("recallStatus5",d,1e3*(r-5)),r>15&&n.setTimeout("recallStatus15",d,1e3*(r-15))}n.setInterval("recallTimerAnimation",function(){var e,t=(a-(new Date).getTime())/1e3;if(t<=0)c.addClass("gt50").html('<div class="pie"></div><div class="pie fill"></div>').find(".pie").css({"-moz-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)","-o-transform":"rotate(360deg)",transform:"rotate(360deg)"}),n.deleteInterval("recallTimerAnimation"),s.find(".timer-text").text(n.recallFormatTime(0)),l.text("0");else{(e=100-t/r*100)>50?c.addClass("gt50").html('<div class="pie"></div><div class="pie fill"></div>'):c.removeClass("gt50").html('<div class="pie"></div>');var i=3.6*e;c.children().css({"-moz-transform":"rotate("+i+"deg)","-webkit-transform":"rotate("+i+"deg)","-o-transform":"rotate("+i+"deg)",transform:"rotate("+i+"deg)",border:"10px solid #"+n.settings.recallSolid}),l.text(Math.floor(t)),s.find(".timer-text").text(n.recallFormatTime(t))}},10)}n.settings.recallSending=!1}n.runTrigger.apply(n,["onaftersendrecallcall"])})}else s.find(".sw-phone-recall").focus(),s.find(".stream-wood-recall-container .sw-recall-number-error").text("Введите правильный номер телефона").show(),n.settings.recallSending=!1;return!1}).end().appendTo("body"),s.find(".stream-wood-recall-timer .stream-wood-recall-timer-digit").text(Math.floor(n.getRecallTimerValue())),s.find(".timer-text").text(n.getRecallTimerValueFormatted()),n.showCopyright("recall")?s.find(".stream-wood-recall-copyright").show():s.find(".stream-wood-recall-copyright").hide(),"b9640bf0b7e290a75f7309d19490d0cb"===this.settings.swKey&&s.find(".timer-text").css({color:"#ffffff","font-size":"1px",opacity:"0"}),void 0===n.settings.design.recall_show_departments&&void 0!==n.settings.design.recall_is_worked_time&&void 0===n.settings.design.recall_available_numbers&&(n.settings.recallShowTime=!1),this.setCallbackRecallDaySelect(),this.setCallbackRecallTimeSelect(),e("#recall-select-day").unbind("change").bind("change",function(){n.setCallbackRecallTimeSelect()}),s.unbind("click").click(function(e){e.stopPropagation()});var a=!+i["recall-agree-required"];if(+i["recall-advertising-agree"]&&o.advertising_agree(i["recall-advertising-agree-url"],a,i["recall-advertising-agree-text"]).insertAfter(s.find(".stream-wood-recall-number")),+i["recall-no-personal-data"]||o.personal_data(i["recall-personal-data-text"],a).insertAfter(s.find(".stream-wood-recall-number")),n.recallIsEnabled()){if(n.settings.recallShowTime=n.callbackIsWorkingTime(new Date),!n.settings.design.recall_is_worked_time||n.settings.design.recall_available_numbers||n.settings.design.recall_departments||(n.settings.recallShowTime=!1),n.settings.design.recall_client_time_select&&(n.settings.recallShowTime?s.find(".sw-recall-select-time").show():n.showRecallSelectTimeForm()),n.canShowRecallButton()&&(e(o.recall_btn).appendTo(document.body).unbind("click").click(function(){return n.settings.recallSource="button",n.showRecall.call(n),n.runTrigger.apply(n,["onafterclickrecallbtn"]),!1}),this.setTimeout("RecallButtonTimer",function(){n.showRecallButton.call(n)},2e3)),n.applyRecallSettingsVersion3.call(n),!n.settings.recallShowTime){s.find(".stream-wood-recall-timer").hide(),s.find(".stream-wood-recall-number .first").hide(),s.find(".stream-wood-recall-number .timer-text").hide();var l="К сожалению, мы не в офисе. Давайте мы перезвоним Вам в рабочее время.";i["recall-unwork-title-text"]&&(l=i["recall-unwork-title-text"]),s.find(".stream-wood-recall-title").html(l).css("margin-bottom","30px"),s.find(".sw-recall-send-btn").text("Перезвоните мне"),i.sms_block&&(s.find(".stream-wood-recall-title").css("margin-bottom","8px"),s.find(".phone-number-text").hide(),s.find(".stream-wood-recall-number").css("margin-top","6px"))}if(n.settings.design.recall_departments){var c;c='<select id="select-recall-department" class="sw-select-recall-department">';var d="отдел";n.settings.design.recall_department_text&&(d=n.settings.design.recall_department_text),c+='<option value="0">Выберите '+d+"</option>",e.each(n.settings.design.recall_departments,function(e,t){c+='<option value="'+t+'">'+e+"</option>"}),c+="</select>",s.find(".stream-wood-recall-departments").append(c).show()}this.recallInitTimer();var u,h=function(t){var s=e(t).find(".stream-wood-recall-phone-to-call");if(0!==s.length){var i=s.val();u!==i&&n.checkPhoneForRussia(i)&&(u=i,n.sendRecallRequest(i))}};e(document).on("submit","form",function(e){h(this)}),e(document).on("click",function(t){n.settings.recallOpened&&0===e(t.target).closest(".stream-wood-recall-3").length&&("4258f17566353dca29bc6363d09fcb17"!=n.settings.swDomainKey&&"7e97d083f58481850cd0d9730846aa0b"!=n.settings.swDomainKey&&"bbc9e00aa351d8f9ab32ec2c2d5eb561"!=n.settings.swDomainKey&&"2b94991390af91835a8292ae0fc10d70"!=n.settings.swDomainKey||t.target.classList.contains("strmwd-blur"))&&n.hideRecall()}).on("click",'button, input[type="submit"]',function(){this.form&&h(this.form)})}else s.hide()},i.prototype.showCallStatus=function(t){var s;switch(t){case"0":s="Все операторы заняты! Мы перезвоним Вам в ближайшее время";break;case"1":s="Мы уже звоним Вам! Возьмите трубку!";break;case"2":s="Вы на линии с нами!"}e(".stream-wood-recall-3 .stream-wood-recall-title").text(s)},i.prototype.getCallStatus=function(){if(this.settings.callId){var t=this;e.ajax({dataType:"jsonp",url:this.settings.serverUrl+"/api/",data:{Action:"getCallStatus",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,callId:this.settings.callId},success:function(e){t.showCallStatus(e.callStatus)}})}},i.prototype.recallFormatTime=function(e){var t,s=this.settings.design["recall-settings"]["timer-format"],n=Math.floor(e),i=Math.floor(100*e-100*n);switch(n=this.padZero(n,2),i=this.padZero(i,2),s){case"00:ss:99":case"00:ss:00":t="00:"+n+":"+i;break;case"00:ss,99":case"00:ss,00":default:t="00:"+n+","+i}return t},i.prototype.getRecallTimerValue=function(){var e=parseInt(this.settings.design.recall_timer_value,10)||25;switch(this.settings.design["recall-settings"]["timer-format"]){case"00:ss:99":case"00:ss,99":e+=.99}return e},i.prototype.getRecallTimerValueFormatted=function(){var e=this.getRecallTimerValue();return this.recallFormatTime(e)},i.prototype.showCopyright=function(e){if(-1!==["b9640bf0b7e290a75f7309d19490d0cb"].indexOf(this.settings.swKey))return!1;var t=["02913e445fe99c4ea7315597335471e8","0c3326d8278ead92e79f61dbbbe1a782","27e110d3640ae7ee6d072c2ac75fc440","9b97291d52220c3793b9ef7cfcaa74a8","d1de4c2624e2cc227a664978d3d1e93c","5c63989c8c19cb5a20d9861561a43e68","9d4b3abd911b20bfb2078937cdd48474","5c0f769f6e2fcd55a391a92e76f5df82","ec220f78ffbe066d4ee7119c63579a37","d9de4f096940382ee9897db775ea9b41","b1f72c6e55ebea13f5d77761a45121d6","d106934787d0d658ad05fe749d4c0abb","70088a81da2eaea349933c5ceeaf43db","1228f413d9115cf060ba8b57c1165cba","8925e776b83854ce9d6b310368526507","b0e250817fd7368157c95c08d0a1d770","56878a1fe62a4a8b86b14360b2246c89","090f425e66c0513a70dc497e3677bc3f","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","c180063c89b7e98bdddfba0726af1b61","b39e1d19b99802672696d51bf6886efc","9d4b3abd911b20bfb2078937cdd48474","a2d2c7a3381efa6465cb40b4b2c75f1e","1228f413d9115cf060ba8b57c1165cba","8b1ed6b6acfadada0e1e68e7226217aa","c0d7344cfe075b88a3c572c02b59f1ca"],s=["02913e445fe99c4ea7315597335471e8","b24ffc315f8c8f047bce2423d4f1947a"],n=["02913e445fe99c4ea7315597335471e8","0c3326d8278ead92e79f61dbbbe1a782","d1de4c2624e2cc227a664978d3d1e93c","5c63989c8c19cb5a20d9861561a43e68","9d4b3abd911b20bfb2078937cdd48474","5c0f769f6e2fcd55a391a92e76f5df82","1228f413d9115cf060ba8b57c1165cba","d5cf016b411420f91b0af1c3cb5714de","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","27e110d3640ae7ee6d072c2ac75fc440","090f425e66c0513a70dc497e3677bc3f"],i=["02913e445fe99c4ea7315597335471e8","0c3326d8278ead92e79f61dbbbe1a782","27e110d3640ae7ee6d072c2ac75fc440","3fc6e55943cf0080a0542442c8c692a7","d1de4c2624e2cc227a664978d3d1e93c","5c63989c8c19cb5a20d9861561a43e68","9d4b3abd911b20bfb2078937cdd48474","5c0f769f6e2fcd55a391a92e76f5df82","090f425e66c0513a70dc497e3677bc3f","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","e9f8f7e4767b5f93d5be140d689615d0","ac69ec82c686b89089a840ff39f260f2","b39e1d19b99802672696d51bf6886efc","bf4af0533938f41fea2dda31bfdfd109","1228f413d9115cf060ba8b57c1165cba","328d59cc4dab1e9fc667092f421eea35","6796c676dba80440416a23c18156055a","c0d7344cfe075b88a3c572c02b59f1ca","9338294e952a3edc77a27e49455fa1d6","b24ffc315f8c8f047bce2423d4f1947a"],o=["02913e445fe99c4ea7315597335471e8","635181bd6a490e1af639e9bbd7ca97e4","d87c4157d412396e25c4514103d6ae36","c097592bcd9dffaa9e254a8623b4973d","0c3326d8278ead92e79f61dbbbe1a782","da07fa1bf5ca2bd0eafb586641b6badf","0c8dbcab62a89e6069aedbdbc390172b","27e110d3640ae7ee6d072c2ac75fc440","3fc6e55943cf0080a0542442c8c692a7","d1de4c2624e2cc227a664978d3d1e93c","aba98e1c8812f74666d7c0135526485b","5420e3311c22aa86d0a13f7bd48119a6","5c63989c8c19cb5a20d9861561a43e68","9d4b3abd911b20bfb2078937cdd48474","c3c30465451fd3090a06bb1fc3abd18c","7f57e7e9f27081eee01943b00b84518c","1228f413d9115cf060ba8b57c1165cba","8925e776b83854ce9d6b310368526507","4d843007f63f819971f20dd8f3ef0c0c","1d8003bb9ca6857b54bd897325ed73d3","18d55a8d0fed148dee33629c273d13e4","f10ad5c9820dda6704a3dd996da51ec7","8a9394a28909c5a214ce3d293924960b","9921c20772547808a802199268033e4d","887b62cfe500b7b283045d39175638c1","22a44a7dee4e5dd80b71acea47583e4b","cfe9d61cefa4e917a526f369761e63ed","eff8068701a98cce42cfb69777ae7327","991aab5c9509da43668a7d5a4b6ac3c8","78b7a303167842fb5b2310b43a06ff7c","d2fc8f56dc0fc76022a0caf249c7f9d6","e663b1979c0be8f3100e1512afad3bbc","b1f72c6e55ebea13f5d77761a45121d6","d106934787d0d658ad05fe749d4c0abb","e8c31a18732fccb537c982e17a8f11b9","554b398815fa26befdd16fc09ddbb5e2","70088a81da2eaea349933c5ceeaf43db","41466099bb196e76fbaca16cbb691ea5","ab033a1558c219643bc0a3e8ea872f03","c96885ba6735c3f24e66778ab83d26fd","97ecc1cd5d204375179198d498e39a8a","66530c879f2bb4dca2c952f4082ac8c0","2f46f8358b77bec4da5e5a2e21d935e9","d5cf016b411420f91b0af1c3cb5714de","6f4c1005416e5b21bb462c10efdcb390","56878a1fe62a4a8b86b14360b2246c89","c180063c89b7e98bdddfba0726af1b61","71c6a45453019c32bb21565ffccc62a7","ca32bfaba01cab6a67040a17e1ced221","090f425e66c0513a70dc497e3677bc3f","7f906d036cb7687f45fc1cba98c54e2c","950f74609a3b9680cf05e5a7b5665054","2dc85012f08d1101ef199acd6d66d82a","395b3ce453d13dca06b338785bbe8d0c","4d4710ee6f34a4b0269de9a480ed7e6e","c2cb16d6b4ace2d25f7be3549c45fbeb","082ed58ac4b628b3369dc3663a9fdffe","68fde4efe51d74f59c2e4ffb24c10b79","0da9fb26e8c9c83a3ee113aa8c6de6b7","5107e309e6b385d66cd361fedd5ef9d6","ea7646d9e559c41b84a7eadc4bc592be","f7a6e6d209d1171f129badcb66763440","08b02f5a6b5acc078a99350768aff98f","b1af797b94607e30f5e51d8b1dbc31b0","95871eb4af3828771ea3ed012a463598","82c880664ba2797d1ee969d23a7a7b31","79900b9fa9e91db4b8cccdc071bf1a82","5c0f769f6e2fcd55a391a92e76f5df82","8b1ed6b6acfadada0e1e68e7226217aa","f4b0af55515135a65c5a962f129b2463","62b5360245a2f7785830ae16df703fc1","e882de9165945908f18cbd8a176e47a0","3464e7f83d45dfb06a073114edb488b3"];return("recall"!==e||-1===t.indexOf(this.settings.swDomainKey))&&(("registrator"!==e||-1===s.indexOf(this.settings.swDomainKey))&&(("zalike"!==e||-1===n.indexOf(this.settings.swDomainKey))&&(("generator"!==e||-1===i.indexOf(this.settings.swDomainKey))&&("consultant"!==e||-1===o.indexOf(this.settings.swDomainKey)))))},i.prototype.sendRecallRequest=function(s){var n=this,i=1;this.settings.recallShowTime||(i=0);var o=document.URL,r="";this.settings.design.recall_departments?r=e("#select-recall-department :selected").val():this.settings.design.recall_is_worked_time&&(r=this.settings.design.recall_available_numbers);var a={swClientData:this.getClientData()},l=n.getCalltouchSession();l&&(a.calltouchSession=l);var c=n.number_best(n.settings.swDomainKey+"="+s),d={Action:"recallCall",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,phone:s,message:o,workedTime:i,departmentPhones:r,crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href,number:c,recallSource:this.settings.recallSource,Params:t(a)};e.ajax({dataType:"jsonp",url:this.settings.serverUrl+"/api/",data:d,success:function(){n.runTrigger.apply(n,["onaftersendrecallcall"])}}),n.goalIsAchieved("recall")},i.prototype.createRegistrator=function(){var t=this,s=e(o.registrator.call());s.appendTo("body");var n=e('<div class="strmwd-registrator-btn"><div class="strmwd-registrator-btn-title"></div></div>');if(n.appendTo("body"),void 0!==this.settings.design["registrator-btn-offset"]&&"auto"!==this.settings.design["registrator-btn-offset"]){var i="px";"percent"===this.settings.design["registrator-btn-offset"]&&(i="%");var r=this.settings.design["registrator-btn-position"];"bl"===r||"tl"===r?n.css("left",this.settings.design["registrator-btn-offset-value"]+i):"mrm"!==r&&"mlm"!==r||n.css("top",this.settings.design["registrator-btn-offset-value"]+i)}n.addClass("strmwd-registrator-btn-"+this.settings.design["registrator-btn-position"]),n.find(".strmwd-registrator-btn-title").text(this.settings.design["registrator-title"]),!1!==this.settings.design["registrator-btn-animated"]&&n.addClass("strmwd-registrator-btn--animated"),s.find(".stream-wood-registrator-title").text(this.settings.design["registrator-title"]),void 0!==this.settings.design["registrator-btn-text"]&&s.find(".stream-wood-registrator-action-button").text(this.settings.design["registrator-btn-text"]),this.settings.design["registrator-color"]="#"+(this.settings.design["registrator-color"]||"1e62a6"),this.settings.design["registrator-text-color"]="#"+(this.settings.design["registrator-text-color"]||"ffffff"),s.find(".stream-wood-registrator-actions button,.stream-wood-registrator-header").css({color:this.settings.design["registrator-text-color"],backgroundColor:this.settings.design["registrator-color"]}),n.css("backgroundColor",this.settings.design["registrator-color"]),n.find(".strmwd-registrator-btn-title").css("color",this.settings.design["registrator-text-color"]);var a=s.find(".stream-wood-registrator-fields"),l=!+this.settings.design["registrator-agree-required"];+this.settings.design["registrator-no-personal-data"]||o.personal_data(this.settings.design["registrator-personal-data-text"],l).appendTo(a),+this.settings.design["registrator-advertising-agree"]&&o.advertising_agree(this.settings.design["registrator-advertising-agree-url"],l,this.settings.design["registrator-advertising-agree-text"]).appendTo(a),void 0!==this.settings.design["registrator-date-field-hide"]&&"1"==this.settings.design["registrator-date-field-hide"]&&a.find(".strmwd-input-date").hide(),s.find(".stream-wood-registrator-close").unbind("click").bind("click",function(){return t.hideRegistrator.call(t),!1}),n.unbind("click").bind("click",function(){t.settings.registratorOpened||t.showRegistrator.call(t)});var c=0;e(this.settings.design["registrator-custom-fields"]).each(function(){var e;if(this.type)switch(this.type){case"select":e=o.registrator_custom_field_select(c,this.variants);break;case"input":e=o.registrator_custom_field_input(c,this.label)}else e=o.registrator_custom_field_select(c,this);s.find(".stream-wood-registrator-custom-fields").append(e),c++});var d=this.settings.design["registrator-contact-type"];"1"==d?(s.find(".strmwd-input-phone").show(),s.find(".strmwd-input-email").hide()):"2"==d?(s.find(".strmwd-input-phone").hide(),s.find(".strmwd-input-email").show()):"4"==d?s.find(".strmwd-input-phone, .strmwd-input-email, .strmwd-phone-or-email").show():s.find(".strmwd-input-phone, .strmwd-input-email").show(),+this.settings.design["registrator-choice-department"]&&s.find(".registrator-input-department").show(),!1===t.showCopyright("registrator")&&s.find(".stream-wood-registrator-copyright").hide(),s.find(".sw-reg-phone").unbind("keydown").keydown(function(s){e(this).hasClass("sw-reg-phone")&&t.checkPhoneKeyDownForRecall.apply(t,[s])}).unbind("keyup").keyup(function(s){e(this).hasClass("sw-reg-phone")&&t.checkPhoneKeyUpForRecall.apply(t,[s])}).on({focus:function(){""===this.value&&(this.value="+"+t.settings.phonePrefix)}}),s.find(".stream-wood-registrator-action-button").unbind("click").click(function(e){e.preventDefault(),t.registratorSendButtonClick.apply(t,[e])}),s.find(".sw-datepicker-here").datepicker(),+this.settings.design["registrator-sms-block"]?(s.find(".stream-wood-sms-block").show(),s.find(".stream-wood-sms-block .sw-sms-block-btn").unbind("click").bind("click",function(){if(!t.settings.smsBlockSending){t.settings.smsBlockSending=!0;var n=e(this).closest(".stream-wood-sms-block");n.find(".sw-sms-block-btn").addClass("sw-sms-block-btn-disable");var i=s.find(".sw-reg-phone").val();if(!t.checkPhoneBySettings(i))return n.siblings(".sw-sms-block-error").html("<p>Заполните поле телефон</p>").show(),t.settings.smsBlockSending=!1,n.find(".sw-sms-block-btn").removeClass("sw-sms-block-btn-disable"),!1;n.siblings(".sw-sms-block-error").html("").hide(),t.smsBlockSend.call(t,e(this),i)}})):s.find(".stream-wood-sms-block").hide(),this.registratorInitTimer()},i.prototype.setRecallBtnPosition=function(){var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s=this.settings.design["recall-settings"],n="mobile"===this.settings.device&&s["button-mobile-position-active"],i=n?s["button-mobile-position"]:s["button-position"],o=n?s["button-mobile-offset"]:s["button-offset"],r=n?s["button-mobile-offset-left-value"]:s["button-offset-left-value"],a=n?s["button-mobile-offset-right-value"]:s["button-offset-right-value"],l=n?s["button-mobile-offset-top-value"]:s["button-offset-top-value"],c=n?s["button-mobile-offset-bottom-value"]:s["button-offset-bottom-value"];if(t){var d=document.getElementsByClassName("stream-wood-recall-btn"),u="26px",h="",p="30px",g="";if(i)switch(i){case"left-top":u="26px",h="",p="30px",g="";break;case"left-bottom":u="26px",h="",p="",g="30px";break;case"right-top":u="",h="26px",p="30px",g="";break;case"right-bottom":u="",h="26px",p="",g="30px"}if("pixel"===o||"percent"===o){m="percent"===o?"%":"px";switch(i){case"left-top":u=r+m,h="",p=l+m,g="";break;case"left-bottom":u=r+m,h="",p="",g=c+m;break;case"right-top":u="",h=a+m,p=l+m,g="";break;case"right-bottom":u="",h=a+m,p="",g=c+m}}d[0].style.left=u,d[0].style.right=h,d[0].style.top=p,d[0].style.bottom=g}else{(d=e(".stream-wood-recall-btn")).removeAttr("style");var f={};if(i)switch(i){case"left-top":f.left="26px",f.top="30px",f.marginLeft=0;break;case"left-bottom":f.left="26px",f.bottom="30px",f.top="",f.marginLeft=0;break;case"right-top":f.right="26px",f.top="30px";break;case"right-bottom":f.right="26px",f.bottom="30px",f.top=""}if("pixel"===o||"percent"===o){var m="percent"===o?"%":"px";switch(i){case"left-top":f.left=r+m,f.top=l+m;break;case"left-bottom":f.left=r+m,f.bottom=c+m;break;case"right-top":f.right=a+m,f.top=l+m;break;case"right-bottom":f.right=a+m,f.bottom=c+m}}Object.keys(f).length>0&&d.css(f)}},i.prototype.applyRecallSettingsVersion3=function(){var t=this,s=e(".stream-wood-recall-3");if(t.settings.design["recall-settings"]){var n=t.settings.design["recall-settings"],i=t.getRecallPosition();if("center"!==i)"left"===i&&e(".stream-wood-recall-side").addClass("stream-wood-recall-side-left"),"right"===i&&e(".stream-wood-recall-side").addClass("stream-wood-recall-side-right"),n["recall-timer-mode"]&&1==parseInt(n["recall-timer-mode"])&&e(".stream-wood-recall-side").addClass("stream-wood-recall-side-compact");else{if(n["recall-load-bg"]&&n["recall-load-bg"]&&void 0!==n["recall-bg-img"]){o=t.settings.imgServerUrl+"/host/"+t.settings.swDomainKey+"/recall-bg."+n["recall-bg-img"];o+="?"+(t.settings.design.updated_at||""),s.find(".stream-wood-recall-content").css("background-image","url("+o+")")}s.hide()}if(n["recall-timer-mode"]&&1==parseInt(n["recall-timer-mode"])&&e(".stream-wood-recall-center").addClass("stream-wood-recall-center-compact"),n["recall-load-logo"]&&n["recall-load-logo"]&&(e(".stream-wood-recall-center").addClass("stream-wood-recall-center-with-logo"),e(".stream-wood-recall-center-compact").addClass("stream-wood-recall-center-compact-with-logo"),n["recall-logo-img"])){var o=t.settings.imgServerUrl+"/host/"+t.settings.swDomainKey+"/recall-logo."+n["recall-logo-img"];o+="?"+(t.settings.design.updated_at||""),s.find(".stream-wood-recall-logo-container").css("background-image","url('"+o+"')")}if(n["recall-color-scheme"]&&1==parseInt(n["recall-color-scheme"])&&s.addClass("stream-wood-recall-light-sheme"),n["recall-bg-color"]){var r=n["recall-bg-color"];r="transparent"!==r?"#"+r:r,s.find(".stream-wood-recall-container,.stream-wood-recall-hide-left,.stream-wood-recall-hide-right").css("background-color",r)}"mobile"===t.settings.device&&n["recall-mobile-bg-color"]&&s.css("backgroundColor","#"+n["recall-mobile-bg-color"]);var a=s.find(".sw-recall-send-btn");if(n["recall-sendbtn-color"]&&(a.css("background-color","#"+n["recall-sendbtn-color"]),s.find(".stream-wood-recall-container .stream-wood-recall-timer > #sw-slice > .pie ").css("border","10px solid #"+n["recall-sendbtn-color"]),t.settings.recallSolid=n["recall-sendbtn-color"]),n["recall-title-text"]&&s.find(".stream-wood-recall-title").html(n["recall-title-text"]),n["recall-text-color"]&&(s.css("color","#"+n["recall-text-color"]),s.find("select").css("color","#"+n["recall-text-color"])),n["recall-sendbtn-text-color"]&&a.css("color","#"+n["recall-sendbtn-text-color"]),void 0!==n.title_urls&&0!=n.title_urls.length){var l=this.getRecallTitle();l&&s.find(".stream-wood-recall-title").text(l)}if(n["recall-note-text"]){var c=n["recall-note-text"];c=(c=this.stripTags(c)).replace("\n","<br>"),s.find(".stream-wood-recall-number .first").html(c)}n["recall-send-btn-text"]&&a.text(n["recall-send-btn-text"]);var d=a.attr("style");d&&(d=d.replace(/!important/g,"").replace(/;/g,"!important;"),a.attr("style",d));var u=s;"left"===i&&u.css({top:0,left:0,marginLeft:-404}),"right"===i&&u.css({top:0,right:-406,left:"",marginLeft:""}),"center"===i&&u.hide();var h=e(".stream-wood-recall-btn");h.length>0&&(this.setRecallBtnPosition(),n["button-bg-color"]&&(h.find(".sw-call-img,.sw-call-tail").css("background-color","#"+n["button-bg-color"]),h.find(".sw-call-rad").css("border","2px solid #"+n["button-bg-color"]),t.settings.recallBtnColor=n["button-bg-color"]),n["button-bg-color-rid"]&&(h.find(".sw-call-rid").css("background-color","#"+n["button-bg-color-rid"]),t.settings.recallBtnColorRid=n["button-bg-color-rid"]),n["button-tube"]&&(h.find(".sw-call-img").css("background-position",n["button-tube"]),t.settings.recallBtnTube=n["button-tube"]),n["button-bg-hover-color"]&&(t.settings.recallBtnHoverColor=n["button-bg-hover-color"]),n["button-bg-hover-color-rid"]&&(t.settings.recallBtnHoverColorRid=n["button-bg-hover-color-rid"]),n["button-tube-hover"]&&(t.settings.recallBtnHoverTube=n["button-tube-hover"]),h.unbind("hover").hover(function(){t.setRecallButtonBg.call(t,t.settings.recallBtnHoverColor,t.settings.recallBtnHoverColorRid,t.settings.recallBtnHoverTube)},function(){t.setRecallButtonBg.call(t,t.settings.recallBtnColor,t.settings.recallBtnColorRid,t.settings.recallBtnTube)}),n["button-small"]&&h.addClass("stream-wood-recall-btn-small"),n["button-flip"]&&(h.addClass("stream-wood-recall-btn-flipper"),h.find(".sw-call-tail").append(e('<div class="sw-call-tail-text"/>').text(n["recall-button-text"]))),n["button-draggable"]&&this.attachDraggableBehavior(h),n["button-crawl"]&&this.attachCrawlBehavior(h),n["button-type"]&&"static"==n["button-type"]&&h.addClass("stream-wood-recall-btn-"+n["button-type"]),n["button-close"]&&1==parseInt(n["button-close"])&&(h.find(".stream-wood-recall-btn-close").length||e("<div>").addClass("stream-wood-recall-btn-close").append(e('<i class="stream-wood-recall-icon-hide"></i>')).click(function(){return t.closeRecallButton.call(t),!1}).appendTo(h)))}else s.hide()},i.prototype.closeRecallButton=function(t){this.hideRecallButton(),e(".stream-wood-recall-3").unbind().remove(),e(".stream-wood-recall-btn").unbind().remove()},i.prototype.getBlockSizeAndPosition=function(t){var s="none"===t.css("display"),n=t.css("position");s&&t.css({opacity:0,display:"block"});var i=t.offset();return i.width=t.outerWidth(),i.height=t.outerHeight(),"fixed"===n&&(i.top-=e(window).scrollTop()),s&&t.css({opacity:"",display:"none"}),i},i.prototype.crawlBlock=function(e,t){e.stop().css({bottom:"",opacity:""}).animate({top:t})},i.prototype.attachCrawlBehavior=function(t){var s=this,n=e(window),i=n.height(),o=s.getBlockSizeAndPosition(t).top;t.css({position:"absolute",top:o+n.scrollTop(),bottom:""}),t.data("crawlTop",o);var r,a=function(){r&&clearTimeout(r),r=setTimeout(function(){var e=t.data("crawlTop");s.crawlBlock(t,e+n.scrollTop())},500)};n.on({scroll:a,resize:function(){var e=n.height();e!==i&&(o-=i-e,t.data("crawlTop",o),i=e,a())}})},i.prototype.attachDraggableBehavior=function(t){t.attr("draggable","true");var s=this,n=0,i=0,o=function(s,o){if(0!=s||0!=o){var r=o-i,a=s-n;a=Math.max(0,a),r=Math.max(0,r),a=Math.min(e(document.body).prop("clientWidth")-t.width(),a),r=Math.min(e(window).height()-t.height(),r),"absolute"===t.css("position")&&(r+=e(window).scrollTop()),a+=e(window).scrollLeft(),t.css({right:"auto",bottom:"auto",top:r,left:a})}};t.on({drag:function(e){o(e.originalEvent.clientX,e.originalEvent.clientY)},dragstart:function(e){n=e.originalEvent.offsetX,i=e.originalEvent.offsetY},dragend:function(r){var a=r.originalEvent.clientX,l=r.originalEvent.clientY;if(o(a,l),s.Storage.set("sw_recall_btn_position",a-n+","+(l-i)),s.settings.design["recall-settings"]["button-crawl"]){var c=parseInt(t.css("top"),10)-e(window).scrollTop();t.data("crawlTop",c)}}});var r=function(){var e=s.Storage.get("sw_recall_btn_position");e&&(e=e.split(","),o(e[0],e[1]))};r(),e(window).on("resize",r)},i.prototype.setRecallButtonBg=function(t,s,n){var i=e(".stream-wood-recall-btn");t&&(i.find(".sw-call-img, .sw-call-tail").css({backgroundColor:"#"+t}),i.find(".sw-call-rad").css({borderColor:"#"+t})),s&&i.find(".sw-call-rid").css({backgroundColor:"#"+s}),n&&i.find(".sw-call-img").css({backgroundPosition:n})},i.prototype.showBlur=function(t){"394cf5db1e621de9a5801dd43734937f"!==this.settings.swKey&&"9842f78343bdc165e7ce09357fa53ff3"!==this.settings.swKey&&"96a4007ee37fba6acb09f3c06ad7e02e"!==this.settings.swKey&&(e("body > div, body > header, body > footer, body > nav, body > main, body > section").not(function(e,t){return t.className.indexOf("stream-wood-")>-1||(t.className.indexOf("strmwd-")>-1||(t.className.indexOf("datepickers-container")>-1||(t.className.indexOf("sw_quiz_modal")>-1||"DIV"===t.tagName&&1===t.children.length&&"IFRAME"===t.children[0].tagName)))}).addClass("strmwd-blur"),t&&e(".dark-cover-all").height(e(document).height()).fadeIn())},i.prototype.hideBlur=function(t){t=t||500,e(".dark-cover-all").fadeOut(t,function(){e("body > .strmwd-blur").removeClass("strmwd-blur")})},i.prototype.hideGenerator=function(t){if(this.settings.generatorOpened){t=t||300,this.hideBlur(t);var s;(s=e(+this.settings.design["generator-new-version"]?".stream-wood-generator-2":".stream-wood-generator")).fadeOut(t,function(){s.trigger("hidden")}),this.generatorOnClose()}},i.prototype.showRegistratorButton=function(){return!this.settings.registratorOpened&&(!this.settings.recallOpened&&(!this.settings.generatorOpened&&void e(".strmwd-registrator-btn").show()))},i.prototype.hideRegistratorButton=function(){e(".strmwd-registrator-btn").hide()},i.prototype.hideRegistrator=function(){this.settings.registratorOpened&&(this.settings.registratorOpened=!1,this.hideBlur(),e(".stream-wood-registrator").hide().trigger("hidden"),this.registratorOnClose())},i.prototype.setElementTop=function(t){var s=t.height(),n=window.innerHeight,i=e(document).scrollTop()||e(document.body).scrollTop(),o=i>this.settings.last_scroll_top?"down":"up",r=n<t.height();if(!(r&&t.offset().top+s>i+n&&t.offset().top<i)){var a=(n-s)/2;a=Math.max(0,a),a+=i,"static"!==e(document.body).css("position")&&(a-=e(document.body).offset().top),r&&"down"===o&&(a-=s-n),t.css({top:a}),this.settings.last_scroll_top=i}},i.prototype.showGenerator=function(){if(this.settings.generatorOpened)return!1;this.settings.generatorOpened=!0;var t,s=!1;if(+this.settings.design["generator-new-version"]?t=e(".stream-wood-generator-2"):(t=e(".stream-wood-generator"),s=!0),0===t.length)return!1;this.setElementTop(t);var n=this.settings.design["generator-settings"],i=n&&!!+n["gen-dark-all"]||s;this.showBlur(i),n&&+n["gen-no-shadow"]&&t.addClass("stream-wood-generator-2--no-shadow");var o=t.attr("style"),r=2147483645;"5ad8e560fe607845a403a1f0d65ed321"===this.settings.swKey?r=1e6:"be9c66bcf836bf336a6dc8ac4ee48872"===this.settings.swKey&&(r=2147483647,$("body").append("<style>.pb-widget.open { z-index: 2147483640 !important; }</style> ")),e("body > .m400 iframe:visible").length>0&&r--,o="z-index:"+r+"!important;"+o,t.trigger("show").appendTo(document.body).attr("style",o).fadeIn(500,function(){t.trigger("shown")}),this.runTrigger.apply(this,["onaftergeneratorshow"])},i.prototype.reposRegistrator=function(){var t,s=e(".stream-wood-registrator"),n=this.getBlockSizeAndPosition(s);if(n.height>window.innerHeight){var i=window.scrollY,o=window.scrollY+window.innerHeight,r=n.top,a=n.top+n.height;if(i>=r&&o<=a)return;a<o?t=o-n.height:i<r&&(t=i)}else(t=(window.innerHeight-n.height)/2)<0&&(t=0),t+=window.scrollY;s.css("top",t+"px")},i.prototype.showRegistrator=function(){if(!this.settings.registratorOpened){this.settings.registratorOpened=!0;var t=e(".stream-wood-registrator");this.reposRegistrator(),this.showBlur(!0);var s=t.attr("style");s="z-index:2147483645!important;"+s,t.attr("style",s).show().trigger("show").trigger("shown"),this.runTrigger.apply(this,["onafterregistratorshow"])}},i.prototype.setFirstLoadTime=function(){if(!this.getCookie(this.strings.firstLoadTime)){var e=new Date,t=new Date;t.setDate(t.getDate()+7),this.setCookie(this.strings.firstLoadTime,e,t)}},i.prototype.initBtnTimer=function(){var t=this;t.settings.design["anchor-disable-animation"]||this.setInterval("btnTimer",function(){if(!(t.settings.hideAnchor||t.settings.chatOpened||t.settings.invitationOpened||t.settings.generatorOpened)&&(!t.settings.hideOfflineAnchor||t.settings.manager||t.settings.managers||t.settings.departments)){var s=e(".stream-wood-btn").stop(),n={};switch(t.settings.design["anchor-position"]){case"top":n.marginTop=-15;break;case"left":n.marginLeft=-15;break;case"right":n.marginRight=-15;break;default:n.marginBottom=-15}s.animate(n,500,"easeOutSine",function(){t.showBtn.call(t)})}},1e3*this.consts.SW_BTN_ACTION_TIMEOUT)},i.prototype.stopBtnTimer=function(){this.deleteInterval("btnTimer")},i.prototype.invitationCanShow=function(){var e=this.settings;return this.consultantIsEnabled()&&0===e.messageCounter&&!e.hideAnchor&&!e.design.forever_offline&&!e.design["invitation-hide"]&&!this.haveOpenedWidgets()&&void 0!==e.invitationManager},i.prototype.invitationInitTimer=function(){var e=this;this.settings.hideAll||this.settings.invitationManager&&1!=this.settings.design["invitation-hide"]&&this.setTimeout("invitationTimer",function(){e.invitationCanShow.call(e)?e.slideUpInvitation.call(e):e.invitationInitTimer.call(e)},this.productTimeToShow("invitation"))},i.prototype.invitationStopTimer=function(){this.deleteTimeout("invitationTimer")},i.prototype.invitationOnShow=function(){this.deleteTimeout("invitationTimer")},i.prototype.invitationOnClose=function(){this.productSetShowTime("invitation"),this.invitationInitTimer()},i.prototype.getManagerAvatarSrc=function(e){return e.img||e.type||(e.img=this.settings.serverUrl+"/StreamWood/img/bgr/no-photo",0!=e.sex&&(e.img+="-men"),e.img+=".png"),e.img||(e.img=this.settings.imgServerUrl+"/manager/"+e.key+"/60."+e.type),e.img},i.prototype.setInvitationInfo=function(){var t=(new Date).getTime();if(this.settings.invitationManager){var s=this.settings.invitationManager;s.img=this.getManagerAvatarSrc(s);var n=e(o.invitation_top);n.find(".sw-manager-name").text(s.name+" "+(s.surname||"")),n.find(".sw-manager-position").text(s.position),n.find(".sw-manager-info img").attr("src",s.img+"?q="+t),n.appendTo(".stream-wood-invitation .sw-manager"),this.settings.design["invitation-text"]?n.find(".invitation-text").html(this.settings.design["invitation-text"]):n.find(".invitation-text").html(this.languages[this.language].swInvitationText)}},i.prototype.last_show_time={},i.prototype.productSetShowTime=function(e){var t=this.productStorageShowKey(e),s=(new Date).getTime(),n=this.settings.design[e+"-timeout-type"];n&&1==n?this.last_show_time[t]=s:this.Storage.set(t,s)},i.prototype.productStorageShowKey=function(e){var t=this.settings.design[e+"-id"];return"sw_"+e+"_last_show_time"+(t?"_"+t:"")},i.prototype.productLastShowTime=function(e){var t=this.productStorageShowKey(e),s=this.settings.design[e+"-timeout-type"];return s&&1==s?this.last_show_time[t]||null:this.Storage.get(t)},i.prototype.productTimeToShow=function(e){var t,s;switch(e){case"noreply":return t=parseInt(this.settings.design["collector-timeout"],10)||45,t*=1e3;case"generator":t=parseInt(this.settings.design["generator-first-apperance"],10)||40,s=parseInt(this.settings.design["generator-reapperance"],10)||30;break;case"registrator":t=parseInt(this.settings.design["registrator-first-appearance"],10)||40,s=parseInt(this.settings.design["registrator-reappearance"],10)||30;break;case"recall":if(t=parseInt(this.settings.design["recall-first-apperance"],10)||45,s=parseInt(this.settings.design["recall-reapperance"],10)||30,this.settings.design.self_learning_system){s=t=Math.round(36.5+9*Math.random())}break;case"client_exit":t=parseInt(this.settings.design.client_exit_apperance,10)||10,s=parseInt(this.settings.design.client_exit_reapperance,10)||10;break;case"feedback":t=parseInt(this.settings.design["feedback-timeout"],10)||40,s=parseInt(this.settings.design["feedback-reapperance"],10)||30;break;case"invitation":t=parseInt(this.settings.design["invitation-timeout"],10)||40,s=parseInt(this.settings.design["invitation-reapperance"],10)||30;break;case"webpush":t=parseInt(this.settings.design["webpush-first-apperance"],10)||1,s=parseInt(this.settings.design["webpush-reapperance"],10)||60;break;case"unibutton":t=parseInt(this.settings.design["unibutton-first-apperance"],10)||1,s=parseInt(this.settings.design["unibutton-reapperance"],10)||60;break;case"multibuttonV2":t=parseInt(this.settings.design["multibutton-mobile-ver2-first-apperance"],10)||1,s=parseInt(this.settings.design["multibutton-mobile-ver2-reapperance"],10)||60}t*=1e3,s*=6e4;var n=this.productLastShowTime(e);if(null===n)return t;var i=s-((new Date).getTime()-n);return i>s?t:i<t?t:i},i.prototype.feedbackCanShow=function(){var e=this.settings;return this.consultantIsEnabled()&&1!=e.design["feedback-invitation-hide"]&&!e.hideAnchor&&!e.hideOfflineAnchor&&!e.manager&&!e.managers&&!e.invitationManager&&!this.haveOpenedWidgets()},i.prototype.feedbackOnClose=function(){this.productSetShowTime("feedback"),this.feedbackInitTimer()},i.prototype.feedbackInitTimer=function(){var e=this;this.settings.hideAll||1!=this.settings.design["feedback-invitation-hide"]&&this.setTimeout("feedbackTimer",function(){e.feedbackCanShow.call(e)?(e.slideUp.call(e),e.playBeep.call(e)):e.feedbackInitTimer.call(e)},this.productTimeToShow("feedback"))},i.prototype.feedbackStopTimer=function(){this.deleteTimeout("feedbackTimer")},i.prototype.noreplyOnClose=function(){this.noreplyStopTimer()},i.prototype.noreplyCanShow=function(){var e=this.settings;return this.consultantIsEnabled()&&!e.noReplyOpened},i.prototype.noreplyInitTimer=function(t){var s=this;this.setTimeout("NoReplyTimer",function(){if(s.noreplyCanShow()){e(".stream-wood-noreply .sw-feedback .sw-name").val(s.settings.clientName);var n=t.replace("<br>","\n");e(".stream-wood-noreply .sw-message").val(n),s.slideUpNoReply()}else s.noreplyInitTimer.call(s,t)},this.productTimeToShow("noreply"))},i.prototype.noreplyStopTimer=function(){this.deleteTimeout("NoReplyTimer")},i.prototype.generatorOnClose=function(){this.settings.generatorOpened=!1,this.productSetShowTime("generator"),this.generatorInitTimer()},i.prototype.generatorCanPopup=function(){switch(this.settings.design["generator-popup"]){case"desktop":return"pc"===this.settings.device;case"mobile":return"mobile"===this.settings.device;case"never":return!1;case"always":default:return!0}},i.prototype.generatorCanShow=function(){return this.generatorIsEnabled()&&!this.haveOpenedWidgets()},i.prototype.generatorInitTimer=function(){var e=this;this.generatorCanPopup()&&(this.settings.hideAll||(this.initGeneratorCountDown(),this.setTimeout("GeneratorTimer",function(){e.generatorCanShow()?e.showGenerator.call(e):e.generatorInitTimer()},this.productTimeToShow("generator"))))},i.prototype.registratorOnClose=function(){this.productSetShowTime("registrator"),this.registratorInitTimer()},i.prototype.registratorCanPopup=function(){switch(this.settings.design["registrator-popup"]){case"desktop":return"pc"===this.settings.device;case"mobile":return"mobile"===this.settings.device;case"never":return!1;case"always":default:return!0}},i.prototype.registratorCanShow=function(){return this.registratorIsEnabled()&&!this.haveOpenedWidgets()},i.prototype.registratorInitTimer=function(){var e=this.settings;if(!this.registratorCanPopup())return!1;var t=this;if(!e.hideAll){var s=this.productTimeToShow("registrator");this.setTimeout("RegistratorTimer",function(){t.registratorCanShow()?t.showRegistrator.call(t):t.registratorInitTimer.call(t)},s)}},i.prototype.generatorIsEnabled=function(){return!!+this.settings.design["generator-show"]},i.prototype.registratorIsEnabled=function(){var e=this.settings.design;return("mobile"!==this.settings.device||!+e["registrator-hide-on-mobile"])&&!!+e["registrator-show"]},i.prototype.recallIsEnabled=function(){var e=this.settings;return e.design["recall-on"]&&!("mobile"===e.device&&e.design.recall_hide_on_mobile)},i.prototype.webpushIsEnabled=function(){var e=!1;return 1==this.settings.design["webpush-on"]&&(e=!0),e},i.prototype.multibuttonIsEnabled=function(){return!!this.settings.design["multibutton-on"]&&("mobile"===this.settings.device?!this.settings.design["multibutton-hide-on-mobile"]:!this.settings.design["multibutton-hide-on-desktop"])},i.prototype.unibuttonIsEnabled=function(){var e=!1;return 1==this.settings.design["unibutton-on"]&&(e=!0),e},i.prototype.recallOnShow=function(){var e=!!this.settings.design["recall-settings"]&&this.settings.design["recall-settings"]["recall-dark-all"];this.showBlur(e)},i.prototype.recallOnClose=function(){this.settings.recallOpened=!1,this.productSetShowTime("recall"),this.recallInitTimer(),this.hideBlur()},i.prototype.webpushOnShow=function(){this.runTrigger.apply(this,["onafterwebpushshow"]),this.settings.webpushOpened=!0},i.prototype.webpushOnClose=function(){this.settings.webpushOpened=!1,this.productSetShowTime("webpush"),this.webpushInitTimer()},i.prototype.unibuttonOnClose=function(){this.settings.unibuttonOpened=!1,this.productSetShowTime("unibutton"),this.unibuttonInitTimer()},i.prototype.recallCanPopup=function(){switch(this.settings.design.recall_popup){case"desktop":return"pc"===this.settings.device;case"mobile":return"mobile"===this.settings.device;case"never":return!1;case"always":default:return!0}},i.prototype.recallCanShow=function(){var e=this.settings;return this.recallIsEnabled()&&(e.design.recall_show_offline||e.recallShowTime)&&this.recallCanPopup()&&!this.haveOpenedWidgets()&&(void 0===e.design.show_only_for_new_users||null==this.Storage.get("alreadyCalled")||void 0!==e.design.show_only_for_new_users&&null!=this.Storage.get("alreadyCalled")&&now-this.Storage.get("alreadyCalled")<e.design.time_to_show_to_new_users)},i.prototype.webpushCanShow=function(){return this.webpushIsEnabled()},i.prototype.unibuttonCanShow=function(){var e=this.settings;return this.unibuttonIsEnabled()&&e.design["unibutton-url"]&&e.design["unibutton-url"]!==window.location.href&&("mobile"!==e.device||"mobile"===e.device&&!+e.design["unibutton-hide-on-mobile"])},i.prototype.recallInitTimer=function(){var e=this;this.settings.hideAll||this.recallIsEnabled()&&this.setTimeout("RecallTimer",function(){e.recallCanShow()?(e.settings.recallSource="timer",e.showRecall.call(e)):e.recallInitTimer.call(e)},this.productTimeToShow("recall"))},i.prototype.webpushInitTimer=function(){var e=this;e.settings.hideAll||e.webpushIsEnabled()&&e.setTimeout("WebpushTimer",function(){e.webpushCanShow()?(e.settings.webpushSource="timer",e.webpushModalShow.call(e)):e.webpushInitTimer.call(e)},this.productTimeToShow("webpush"))},i.prototype.unibuttonInitTimer=function(){var e=this;e.settings.hideAll||e.unibuttonIsEnabled()&&e.setTimeout("UnibuttonTimer",function(){e.unibuttonCanShow()?(e.settings.unibuttonSource="timer",e.unibuttonShow.call(e)):e.unibuttonInitTimer.call(e)},this.productTimeToShow("unibutton"))},i.prototype.mobileResize=function(){if(e(".stream-wood-recall-3 .stream-wood-recall-side .stream-wood-recall-close").css("right","80px"),!this.settings.hasOwnProperty("mwidth")||!this.settings.hasOwnProperty("mheight")||this.settings.mwidth!=window.innerWidth||this.settings.mheight!=window.innerHeight){this.settings.mwidth=window.innerWidth,this.settings.mheight=window.innerHeight;var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s=(t?screen.width:window.innerWidth,t?screen.height:window.innerHeight);e(".stream-wood-mobile-btn").css("height",Math.round(35*s/568)+"px").find(".mobile-title").css("font-size",Math.round(20*s/568)+"px").each(function(){this.style.setProperty("line-height",Math.round(20*s/568)+"px","important")}).end().find(".mobile-status").css("font-size",Math.round(13*s/568)+"px").each(function(){this.style.setProperty("line-height",Math.round(13*s/568)+"px","important")});window.innerWidth,parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2));var n=this.getCookie(this.strings.innerWidth),i=this.getCookie(this.strings.innerHeight);Math.round(100*window.innerWidth/n)!==Math.round(100*window.innerHeight/i)?(this.setCookie(this.strings.innerWidth,window.innerWidth),this.setCookie(this.strings.innerHeight,window.innerHeight)):Math.round(n/window.innerWidth*10)>25?e(".stream-wood-btn").hide():e(".stream-wood-btn").show()}},i.prototype.generatorStopTimer=function(){this.deleteTimeout("GeneratorTimer")},i.prototype.registratorStopTimer=function(){this.deleteTimeout("RegistratorTimer")},i.prototype.initGeneratorCountDown=function(){var e=this;this.setInterval("GeneratorCountDown",function(){var t,s,n,i,o;(t=Math.floor((e.settings.generatorEndTime-new Date)/1e3))<0?(e.stopGeneratorCountDown.call(e),e.updateDigits.apply(e,[0,"streamwood-generator-day"]),e.updateDigits.apply(e,[0,"streamwood-generator-hour"]),e.updateDigits.apply(e,[0,"streamwood-generator-min"]),e.updateDigits.apply(e,[0,"streamwood-generator-sec"])):(s=Math.floor(t/86400),e.updateDigits.apply(e,[s,"streamwood-generator-day"]),t-=86400*s,n=Math.floor(t/3600),e.updateDigits.apply(e,[n,"streamwood-generator-hour"]),t-=3600*n,i=Math.floor(t/60),e.updateDigits.apply(e,[i,"streamwood-generator-min"]),o=t-=60*i,e.updateDigits.apply(e,[o,"streamwood-generator-sec"]))},1e3)},i.prototype.updateDigits=function(t,s){var n=Math.floor(t/10)%10+""+(t%10+"");e("#"+s).html(n)},i.prototype.stopGeneratorCountDown=function(){this.deleteInterval("GeneratorCountDown")},i.prototype.clearManager=function(){e(".stream-wood-chat .sw-manager").attr("class","sw-manager").empty(),e(".stream-wood-invitation .sw-manager").empty()},i.prototype.setNoManager=function(){this.clearManager();var t=this.languages[this.language].swNoManagerTitle,s=this.languages[this.language].swNoManagerText;this.settings.design["feedback-title"]&&(t=this.settings.design["feedback-title"]),this.settings.design["feedback-text"]&&(s=this.settings.design["feedback-text"]),e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-manager").html('<p class="sw-title">'+t+'</p><p class="sw-info">'+s+"</p>"),this.settings.design["chat-offline-color"]&&e(".stream-wood-chat .sw-manager").removeClass("sw-manager-no-manager").addClass("sw-manager-no-manager2")},i.prototype.setManagerNoMessages=function(t){if(t){this.updateBtn(t),this.initBtnTimer(),this.settings.manager=t,this.settings.invitationManager=t,this.settings.mswNewVisitanagerName=this.settings.manager.name+" "+(this.settings.manager.surname||""),this.managerIsOnline(t)&&(this.settings.managerStatus=this.consts.SW_MANAGER_STATUS_ONLINE),this.clearManager();var s=(new Date).getTime(),n="<b>"+this.languages[this.language].swManagerHelloText+t.name+".</b>";this.settings.design.welcomeMessage&&(n=this.settings.design.welcomeMessage.replace(new RegExp("%username%","g"),t.name));var i;i=t.sex&&"0"!=t.sex?"<br>"+this.languages[this.language].swManagerManHelpText:"<br>"+this.languages[this.language].swManagerWomanHelpText,this.settings.design.welcomeMessage1&&t.sex&&"0"!=t.sex?(this.settings.design.welcomeMessage_0=this.settings.design.welcomeMessage1,i="<br>"+this.settings.design.welcomeMessage1):!this.settings.design.welcomeMessage2||t.sex&&"0"!=t.sex||(this.settings.design.welcomeMessage_0=this.settings.design.welcomeMessage2,i="<br>"+this.settings.design.welcomeMessage2),n+=i,this.settings.design["welcome-msg-under-avatar"]?(e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-messages").append(e("<div>").addClass("sw-manager-spot").append(e("<div>").addClass("sw-manager-info").html('<img src="'+t.img+"?q="+s+'" width=60 height="60" alt=""/><p class="sw-manager-name">'+t.name+" "+(t.surname||"")+'</p><p class="sw-manager-position">'+t.position+"</p>")).append(e("<p>").addClass("sw-title").html(n))),this.settings.design["chat-compact"]||e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("padding","12px 0 0 0")):(e(".stream-wood-chat .sw-manager").addClass("sw-manager-no-messages").append(e("<div>").addClass("sw-manager-spot").append(e("<p>").addClass("sw-title").html(n)).append(e("<div>").addClass("sw-manager-info").html('<img src="'+t.img+"?q="+s+'" width=60 height="60" alt=""/><p class="sw-manager-name">'+t.name+" "+(t.surname||"")+'</p><p class="sw-manager-position">'+t.position+"</p>"))),this.settings.design["chat-compact"]?e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("margin-top","0"):e(".stream-wood-chat .sw-manager-no-messages .sw-manager-spot .sw-title").css("padding","17px 0 0 0"))}else this.setNoManager()},i.prototype.setManager=function(t){if(t){e(".stream-wood-chat .sw-send-group .bad").hasClass("bad-press")||e(".stream-wood-chat .sw-send-group .good").show(),e(".stream-wood-chat .sw-send-group .good").hasClass("good-press")||e(".stream-wood-chat .sw-send-group .bad").show(),e(".stream-wood-chat .sw-send-group .sw-send-btn").addClass("sw-send-btn-rating-on"),e(".stream-wood-chat .sw-send-group .sw-upload").show(),this.updateBtn(t),this.initBtnTimer(),!this.settings.manager.key&&window.swc_socket?(this.settings.manager=t,this.settings.swSocketInitialized=!0,this.IOemit("swSetSessionOperatorKey",{okey:this.settings.manager.key}),this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode})):this.settings.manager=t,this.settings.invitationManager=t,this.settings.managerName=this.settings.manager.name+" "+(this.settings.manager.surname||""),this.clearManager();var s=this.languages[this.language].swOfflineText;this.managerIsOnline(t)&&(this.settings.managerStatus=this.consts.SW_MANAGER_STATUS_ONLINE,s=this.languages[this.language].swOnlineText),t.img||(t.img=this.getManagerAvatarSrc(t)),e(".stream-wood-chat .sw-manager").append(e("<div>").addClass("sw-manager-info").append(e('<img width="60" height="60"/>').attr("src",t.img)).append(e("<p>").addClass("sw-manager-name").text(this.settings.managerName)).append(e("<p>").addClass("sw-manager-position").text(t.position).append(e("<br>"+s))))}else this.setNoManager()},i.prototype.managerIsOnline=function(e){return this.settings.design.forever_online||e&&(e.status==this.consts.SW_MANAGER_STATUS_ONLINE||e.from_mobile>0)},i.prototype.updateBtn=function(t){if(t){var s=e(".stream-wood-btn"),n=s.find("span.sw-status");this.managerIsOnline(t)?(n.text(this.languages[this.language].swOperatorOnlineText),s.addClass("sw-btn-online")):(n.text(this.languages[this.language].swOperatorOfflineText),s.removeClass("sw-btn-online"),this.settings.feedback=!0)}else this.settings.feedback=!0},i.prototype.closeSwBtn=function(){return this.hideChat(),!1},i.prototype.toggleSound=function(){return e(".stream-wood-chat .sw-sound").hasClass("sw-sound-press")?this.enableSound():this.disableSound(),!1},i.prototype.enableSound=function(){e(".stream-wood-chat .sw-sound").removeClass("sw-sound-press").attr("title",this.languages[this.language].swSoundOffText),this.setCookie(this.strings.soundOff,"0")},i.prototype.disableSound=function(){e(".stream-wood-chat .sw-sound").addClass("sw-sound-press").attr("title",this.languages[this.language].swSoundOnText),this.setCookie(this.strings.soundOff,"1")},i.prototype.getSessionId=function(){return this.getCookie(this.strings.sessionId)},i.prototype.endType=function(){var t=this;this.getSessionId()&&window.swc_socket&&(e(".stream-wood-chat .sw-message").val()?this.setTimeout("swTypeTimer",function(){t.endType.call(t)},2e3):(this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode}),this.deleteTimeout("swTypeTimer")))},i.prototype.setMessages=function(t){var s=this;e(".stream-wood-chat .sw-send-group span").show(),e(".stream-wood-chat .sw-send-group").addClass("sw-grey"),e(".stream-wood-chat .sw-message-group").empty().addClass("sw-grey"),e("<textarea>").addClass("sw-message").unbind("keypress").keypress(function(t){if(("1"==s.settings.design.sendMessageType||!s.settings.design.sendMessageType&&t.ctrlKey)&&(13===t.keyCode||13===t.which||10===t.keyCode||10===t.which))return e(".stream-wood-chat .sw-send-btn").click(),!1;if(this.value){s.deleteTimeout.apply(s,["swTypeTimer"]);var n=s.getSessionId();if(n&&window.swc_socket&&!s.getTimeout.apply(s,["swTypeTimer"])){var i=e(".stream-wood-chat .sw-message").val();i=s.stripTags.apply(s,[i]),s.IOemit.apply(s,["swSessionType",{message:i,visor:s.settings.superVisorMode}])}n&&s.setTimeout("endType",function(){s.endType.call(s)},2e3)}else s.endType.call(s)}).unbind("focus").focus(function(){s.resetTitle.call(s)}).appendTo(".stream-wood-chat .sw-message-group"),this.updateMessages(t),e(".stream-wood-chat .sw-send-btn").unbind("click").click(function(){var t=e.trim(e(".stream-wood-chat .sw-message").val());if(e(".stream-wood-chat .sw-message").val()&&0!==t.length)if(window.swc_socket){var n=e(".stream-wood-chat .sw-message").val(),i=s.settings.clientName||s.languages[s.language].swGuestNameText;s.showError.call(s);var o=[],r={},a=new Date;n=s.stripTags.apply(s,[n]),r.message=n,r.d=a.getDate(),r.m=a.getMonth()+1,r.y=a.getFullYear(),r.hour=a.getHours(),r.min=a.getMinutes(),r.wait=!0,o.push(r),s.appendMessages.apply(s,[o]),e(".stream-wood-chat .sw-message").val(""),s.scrollChatDown(),e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),e.browser.msie&&parseInt(e.browser.version)<9&&"windows-1251"===(document.charset||document.characterSet)&&(n=s.utf8_encode.apply(s,[n]));var l={swClientName:i,message:n,managerId:s.settings.manager.id,managerKey:s.settings.manager.key,hostKey:s.settings.swDomainKey,visor:s.settings.superVisorMode,ip:s.settings.ipAddr};s.settings.manager.from_mobile>0?e.ajax({type:"POST",url:s.settings.serverUrl+"/api/?Action=cloudMessage&swDomainKey="+s.settings.swDomainKey+"&swKey="+s.settings.swKey+"&swSessionId="+s.settings.sessionId+"&callback=?",data:l,cache:!1,dataType:"json",success:function(t){e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")}}):window.swc_socket&&s.IOemit.apply(s,["swSendMessageFromSession",l]),s.managerIsOnline(s.settings.manager)||(s.feedbackRequest({swMessage:n,swClientData:s.getClientData()}),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait")),s.deleteTimeout.apply(s,["swTypeTimer"]),s.hideBtn.call(s)}else s.showError.apply(s,[s.languages[s.language].swServerErrorText]);else e(".stream-wood-chat .sw-message").focus();return!1})},i.prototype.iAmOnline=function(){var t=this;e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"iAmOnline",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swTimeAll:this.getCookie(this.strings.timeAll)}).done(function(e){e&&e.Data.sessionId&&t.updateSession.apply(t,[e.Data.sessionId])})},i.prototype.updateMessages=function(t){var s=this;e(".stream-wood-chat .sw-messages-list").empty(),e.each(t,function(e,t){s.appendMessage.apply(s,[t])})},i.prototype.appendMessages=function(t){var s=this;e.each(t,function(e,t){s.appendMessage.apply(s,[t])})},i.prototype.appendMessage=function(t){var n="sw-message-id-"+t.node_id;if(t.node_id||(n=""),!n||!e("#"+n).length){var i={ru:["","января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],en:["","january","february","march","april","may","june","july","august","september","october","november","december"]},o={ru:["","янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],en:["","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};this.settings.design["chat-compact"]&&(i=o);var r="sw-ml-item sw-ml-item-my";t.direct==this.consts.SW_MESSAGE_FROM_MANAGER&&(r="sw-ml-item"),t.wait&&(r+=" sw-ml-item-wait"),t.hour<10&&(t.hour="0"+t.hour),t.min<10&&(t.min="0"+t.min);var a=new Date,l=t.hour+":"+t.min;a.getDate()==t.d&&a.getMonth()+1==t.m&&a.getFullYear()==t.y||(l=a.getFullYear()==t.y?t.d+" "+i[this.language][t.m]+this.languages[this.language].swInText+t.hour+":"+t.min:t.d+" "+i[this.language][t.m]+" "+t.y+this.languages[this.language].swInText+t.hour+":"+t.min);var c=this.languages[this.language].swGuestNameText;this.settings.clientName&&(c=this.settings.clientName),1==t.direct&&((c=t.name)||(c=this.settings.managerName));var d=t.message||"";1!=t.direct&&(d=(d=d.replace(/&amp;/g,"&")).replace(/(ht|f)tps?:\/\/[\,\w.\/%\?\&#:=\-\\)\\(]+/gi,'<a target="_blank" href="$&">$&</a>')),d=d.replace("\n","<br>"),c=s(c),e("<div>").attr("id",n).addClass(r).append('<div class="sw-name-d"><span>'+l+"</span>"+c+"</div>").append('<div class="append-message">'+d+"</div>").appendTo(".stream-wood-chat .sw-messages-list"),this.scrollChatDown(),this.settings.messageCounter++}},i.prototype.appendTypeMessage=function(){var t=this.settings.managerName;e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-type").append(e('<p class="sw-name-d"></p>').text(t+" пишет...")).appendTo(".stream-wood-chat .sw-messages-list")},i.prototype.appendContactInfo=function(){var e="";return this.settings.design.sendContact&&(e='<dl><dt><select class="sw-contact-type" name="contact-type"><option value="2">'+this.languages[this.language].swPhoneText+'</option><option value="1">'+this.languages[this.language].swEmailText+'</option></select></dt><dd><input class="sw-email sw-phone" type="phone" value="+'+this.settings.phonePrefix+'"/><div class="sw-error sw-email-error" style="display:none"></div><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>',1==this.settings.design.contactSelectType?e="<dl><dt>"+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="50" value="+'+this.settings.phonePrefix+'"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>':2==this.settings.design.contactSelectType?e="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>':3==this.settings.design.contactSelectType&&(e="<dl><dt>"+this.languages[this.language].swEmailText+'</dt><dd><input class="sw-email" type="email" maxlength="50"/><div class="sw-error sw-email-error" style="display:none"></div></dd></dl>\n<dl><dt>'+this.languages[this.language].swPhoneText+'</dt><dd><input class="sw-phone" type="phone" maxlength="17" value="+'+this.settings.phonePrefix+'"/><div class="sw-error sw-phone-error" style="display:none"></div></dd></dl>')),e},i.prototype.checkPhoneKeyDown=function(e){46===e.keyCode||8===e.keyCode||9===e.keyCode||27===e.keyCode||65===e.keyCode&&e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},i.prototype.checkPhoneKeyDownForRecall=function(e){46===e.keyCode||8===e.keyCode||9===e.keyCode||27===e.keyCode||65===e.keyCode&&e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&43===e.keyCode&&e.preventDefault()},i.prototype.checkPhoneKeyUpForRecall=function(t){var s=e(t.target);if(!(65===t.keyCode&&t.ctrlKey||t.keyCode>=35&&t.keyCode<=39)){var n=s.val();n=this.formatPhoneForCountry(n,this.settings.design["phone-formats"][0]),s.val(n)}},i.prototype.formatPhoneForCountry=function(e,t){switch(0===(e=e.replace(/\D/g,"")).indexOf("8")?e=this.settings.phonePrefix+e.substr(1):0!==e.indexOf(this.settings.phonePrefix)&&(e=this.settings.phonePrefix+e),t){case"kz":e=this.formatPhoneForKazakhstan(e);break;case"ru":default:e=this.formatPhoneForRussia(e)}return e},i.prototype.formatPhoneForRussia=function(e){if(e.length>11)return"+"+e;var t=!1;switch(e.length){case 0:e="7";break;case 5:t="X-XX-XX";break;case 6:t="XX-XX-XX";break;case 7:t="XXX-XX-XX";break;case 8:t="X(XXX) XXX-X";break;case 9:t="X(XXX) XXX-XX";break;case 10:t="X(XXX) XXX-XX-X";break;case 11:t="X(XXX) XXX-XX-XX"}return t&&(e=this.formatNumber(e,t)),"+"+e},i.prototype.formatPhoneForKazakhstan=function(e){e.length>11&&(e=e.substr(0,11));var t=!1;if(e.length>=3)if(-1!==["70","74","75","76","77"].indexOf(e.substr(1,2)))switch(t="X(XXX) XXX-XX-XX",e.length){case 3:t=t.substr(0,4);break;case 4:t=t.substr(0,5);break;case 5:t=t.substr(0,8);break;case 6:t=t.substr(0,9);break;case 7:t=t.substr(0,10);break;case 8:t=t.substr(0,12);break;case 9:t=t.substr(0,13);break;case 10:t=t.substr(0,15)}else switch(t="X(XXXX)XX-XX-XX",e.length){case 3:t=t.substr(0,4);break;case 4:t=t.substr(0,5);break;case 5:t=t.substr(0,6);break;case 6:t=t.substr(0,8);break;case 7:t=t.substr(0,9);break;case 8:t=t.substr(0,11);break;case 9:t=t.substr(0,12);break;case 10:t=t.substr(0,14)}else 0===e.length&&(e=this.settings.phonePrefix);return t&&(e=this.formatNumber(e,t)),"+"+e},i.prototype.checkEmail=function(e){return new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e)},i.prototype.checkPhoneBySettings=function(e){var t=!1;return!!e&&(-1!==this.settings.design["phone-formats"].indexOf("ru")&&(t=t||this.checkPhoneForRussia(e)),-1!==this.settings.design["phone-formats"].indexOf("kz")&&(t=t||this.checkPhoneForKazakhstan(e)),t)},i.prototype.checkPhoneForRussia=function(e){if(11!==(e=e.replace(/\D+/g,"")).length)return!1;if(e.substr(-7)%1111111==0)return!1;var t=e.substr(0,1);if("8"===t&&(e=t+e.substr(t.length)),"7"!==t)return!1;var s="301 302 336 341 342 343 345 346 347 349 351 352 353 365 381 382 383 384 385 388 390 391 394 395 401 411 413 415 416 421 423 424 426 427 471 472 473 474 475 481 482 483 484 485 486 487 491 492 493 494 495 496 498 499 811 812 813 814 815 816 817 818 820 821 831 833 834 835 836 841 842 843 844 845 846 847 848 851 855 861 862 863 865 866 867 869 871 872 873 877 878 879 900 901 902 903 904 905 906 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 936 937 938 939 941 950 951 952 953 954 955 956 958 960 961 962 963 964 965 966 967 968 969 977 978 980 981 982 983 984 985 986 987 988 989 991 992 993 994 995 "+"996 997 999".split(" "),n=e.substr(1,3);return-1!==s.indexOf(n)},i.prototype.checkPhoneForKazakhstan=function(e){if(11!==(e=e.replace(/\D+/g,"")).length)return!1;if(e.substr(-7)%1111111==0)return!1;if("7"!==e.substr(0,1))return!1;var t="710 711 712 713 714 715 716 717 718 721 722 723 724 725 726 727 728 729 736 700 701 702 "+"703 704 705 706 707 708 709 747 750 751 760 761 762 763 764 771 775 776 777 778".split(" "),s=e.substr(1,3);return-1!==t.indexOf(s)},i.prototype.appendContactInfoProperties=function(t){var s=this;t.find(".sw-contact-type").change(function(){s.showError("","email"),s.showError("","phone"),t.find(".sw-email").val(""),"2"===e(this).val()?t.find(".sw-email").addClass("sw-phone").val("+"+s.settings.phonePrefix):t.find(".sw-email").removeClass("sw-phone").removeAttr("placeholder")}),t.find(".sw-email, .sw-phone").unbind("keydown").keydown(function(t){e(this).hasClass("sw-phone")&&s.checkPhoneKeyDown.apply(s,[t])}).unbind("keyup").keyup(function(t){e(this).hasClass("sw-phone")&&s.checkPhoneKeyUpForRecall.apply(s,[t])})},i.prototype.startDialogContactChooser=function(t){t||(t=".stream-wood-chat");var s=e(t);if(!this.checkPersonalCheckboxes(s,null,this.settings.design.advertising_agree_text,this.settings.design.advertising_agree_required,null))return!1;var n=s.find(".sw-phone").val(),i=s.find(".sw-email:not(.sw-phone)").val();n="+7"===n?"":n;var o=parseInt(this.settings.design.contactSelectType,10)||0;if(this.showError("","email",s),this.showError("","phone",s),n&&!this.checkPhoneBySettings(n))return this.showError("Введите правильный номер телефона","phone",s),!1;if(i&&!this.checkEmail(i))return this.showError(this.languages[this.language].swEmailErrorText,"email",s),!1;if(this.settings.design.startDialogContact)switch(o){case 1:if(!n)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",s),!1;break;case 2:if(!i)return this.showError(this.languages[this.language].swEmptyErrorText,"email",s),!1;break;case 3:if(!i||!n)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",s),!1;break;default:if(!i&&!n){var t=i?"phone":"email";return this.showError(this.languages[this.language].swEmptyErrorText,t,s),!1}}return!0},i.prototype.startCollectorChooser=function(){var t=e(".stream-wood-noreply");if(this.showError("","email",t),this.showError("","phone",t),!this.checkPersonalCheckboxes(t,null,this.settings.design.advertising_agree_text,this.settings.design.advertising_agree_required,null))return!1;var s=t.find(".sw-phone").val(),n=t.find(".sw-email").val();this.checkPhoneBySettings(s)||(s="");var i=this.languages[this.language].swEmptyErrorText;switch(parseInt(this.settings.design["collector-selecttype"])){case 1:if(!s)return this.showError(i,"phone",t),!1;break;case 2:if(!n)return this.showError(i,"email",t),!1;break;case 3:if(!n||!s)return this.showError(i,"phone",t),!1;break;default:if(!n)return this.showError(i,"phone",t),!1}return!0},i.prototype.sendButtonClick=function(){var t=this;this.showError("","email"),this.showError("","phone");var s=e(".stream-wood-chat");if(!this.checkPersonalCheckboxes(s,null,this.settings.design.advertising_agree_text,this.settings.design.advertising_agree_required,null))return!1;var n=s.find(".sw-phone").val(),i=s.find(".sw-email").val(),o=s.find(".sw-contact-type").val(),r=parseInt(this.settings.design["feedback-selecttype"]);this.checkPhoneBySettings(n)||(n="");var a=s.find(".sw-offline-select-manager:visible");if(a.length>0&&!+a.find("option:selected").val())return this.showError(this.languages[this.language].swEmptyErrorText),!1;switch(r){case 1:if(!n)return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;case 2:if(!i)return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1;break;case 3:if(!i||!n)return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;default:if(!i)return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1}if(-1!==[0,2,3].indexOf(r)&&"2"!=o){if(!this.checkEmail(i))return this.showError(this.languages[this.language].swEmailErrorText,"email"),!1;this.showError("","email")}var l=n;if(l=l==="+"+this.settings.phonePrefix?"":l,("2"==o||l)&&!this.checkPhoneBySettings(l))return this.showError("Введите правильный номер телефона","phone"),!1;var c=s.find(".sw-message");if(c.val()||this.settings.design["feedback-empty-message"]){var d=s.find(".sw-name").val();(d=d.split('"').join(""))||(d=this.languages[this.language].swGuestNameText),this.setCookie(this.strings.clientName,d);var u=s.find(".sw-contact-type").val(),h=i,p=n,g=this.getPersonalCheckboxes(s),f={email:h,phone:p},m='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.getFeedbackSuccessMessage(f)+"</p>";switch(parseInt(this.settings.design["feedback-selecttype"])){case 1:u=2,h=p;break;case 2:u=1;break;case 3:u=3,h=h+", "+p;break;default:2==u&&(h=p)}var w=c.val(),v=0,b=0;this.settings.design.offlineSelect&&(v=this.settings.design.selectType,b=1==this.settings.design.operatorShowType?s.find(".sw-select-manager :checked").val():s.find(".sw-select-manager select").val()),s.find(".sw-container").prepend(e("<div>").addClass("sw-feedback-success").hide().html(m)),e('<div class="sw-send-group"></div>').append(e("<a>").addClass("sw-send-btn").text(this.languages[this.language].swCloseWindowText).attr("style",t.settings.design["chat-sendbtn-bkg-css"]).unbind("click").click(function(s){s.preventDefault(),t.settings.foreverChat||(t.deleteCookie(t.strings.opened),t.hideChat(void 0,function(){var t=e(".stream-wood-chat");t.find(".sw-feedback-success").remove(),t.find(".sw-manager,.sw-messages-list,.sw-message-group,.sw-send-group").show(),t.find(".sw-send-group .good,.sw-send-group .bad").hide(),t.find(".sw-send-group .sw-send-btn").removeClass("sw-send-btn-rating-on")}))})).appendTo(".stream-wood-chat .sw-feedback-success"),s.find(".sw-manager,.sw-messages-list,.sw-message-group,.sw-send-group,.stream-wood-feedback-personal-data").hide(),s.find(".sw-feedback-success").show().find(".sw-send-group").show(),s.find(".sw-email,.sw-phone").val(""),s.find(".sw-message").addClass("sw-message-empty"),this.showError("","email"),this.showError("","phone");var y={swClientName:d,swContactType:u,swEmail:h,swMessage:w,swEmailType:v,swContactId:b,swClientData:this.getClientData(),swUserPersonalCheckboxes:g};this.feedbackRequest(y)}else c.focus();return!1},i.prototype.getClientData=function(){var e=null,t=this.getCookie("roistat_visit");return t&&(e={roistat_visit:t}),e},i.prototype.feedbackDefaultParams=function(){var e={swClientName:this.settings.clientName,swContactId:0,swEmailType:0,swFormType:"feedback"};e.swContactType=this.settings.swContactType;var t=this.settings.swEmail,s=this.settings.swPhone;switch(parseInt(this.settings.design.contactSelectType,10)||0){case 1:e.swEmail=s,e.swContactType=2;break;case 2:e.swEmail=t,e.swContactType=1;break;case 3:e.swEmail=t+", "+s,e.swContactType=3;break;default:2===e.swContactType?e.swEmail=s:e.swEmail=t}return e},i.prototype.feedbackRequest=function(s){var n=this.feedbackDefaultParams();(s=e.extend(n,s)).swFormType="feedback";var i=this.getCalltouchSession();i&&(s.calltouchSession=i);var o=this;e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:document.URL,Params:t(s),formcheck:"q67e4wvubik43i6kb4uifuy35ik6td",crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href}).done(function(t){o.runTrigger.apply(o,["onaftersendfeedback",s]),t.hasOwnProperty("Errors")&&t.length>0&&e.each(t.Errors,function(e,t){o.showError.apply(o,[t,"email"]),o.showError.apply(o,[t,"phone"])}),o.goalIsAchieved("feedback")})},i.prototype.noReplySendButtonClick=function(){var s=this;if(!this.startCollectorChooser())return!1;var n=e(".stream-wood-noreply"),i=n.find(".sw-phone").val(),o=n.find(".sw-email").val();if(this.checkPhoneBySettings(i)||(i=""),"1"===n.find(".sw-contact-type").val()){if(!o)return s.showError(this.languages[s.language].swEmptyErrorText,"email",n),!1}else if("2"===n.find(".sw-contact-type").val()&&!i)return s.showError(this.languages[s.language].swEmptyErrorText,"phone",n),!1;var r=n.find(".sw-offline-select-manager:visible");if(r.length>0&&!+r.find("option:selected").val())return this.showError(this.languages[this.language].swEmptyErrorText),!1;switch(parseInt(this.settings.design["collector-selecttype"])){case 1:if(!i)return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;case 2:if(!o)return this.showError(this.languages[this.language].swEmptyErrorText,"email"),!1;break;case 3:if(!o||!i)return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1;break;default:if(!o&&!i)return this.showError(this.languages[this.language].swEmptyErrorText,"phone"),!1}if(2==this.settings.design["collector-selecttype"]||3==this.settings.design["collector-selecttype"]){if(!this.checkEmail(o))return this.showError(this.languages[this.language].swEmailErrorText,"email",n),!1;this.showError("","email",n)}var a=n.find(".sw-message");if(a.val()){var l=n.find(".sw-name").val();(l=l.split('"').join(""))||(l=this.languages[this.language].swGuestNameText);var c=n.find(".sw-contact-type").val(),d=o,u=i;switch(parseInt(this.settings.design["collector-selecttype"])){case 1:d=u,c=2;break;case 2:c=1;break;case 3:d=d+", "+u,c=3;break;default:2==c&&(d=u)}var h=this.getPersonalCheckboxes(n),p=a.val(),g=0,f=0;this.settings.design.offlineSelect&&(g=this.settings.design.selectType,f=1==this.settings.design.operatorShowType?e('.sw-select-manager input[name="sw-select-manager-noreply"]:checked').val():n.find(".sw-select-manager select").val());var m={email:o,phone:i},w='<p class="sw-title">'+this.languages[this.language].swMessageSendedText+"</p><p>"+this.getFeedbackSuccessMessage(m)+"</p>";n.prepend(e("<div>").addClass("sw-feedback-success").hide().html(w)),e("<div>").addClass("sw-send-group").append(e("<a>").addClass("sw-send-btn").text(this.languages[this.language].swCloseWindowText).unbind("click").click(function(){return s.slideDownNoReply(),e(".stream-wood-noreply .sw-feedback-success").remove(),e(".stream-wood-noreply .sw-manager,.stream-wood-noreply .sw-messages-list,.stream-wood-noreply .sw-message-group,.stream-wood-noreply .sw-send-group").show(),!1})).appendTo(".stream-wood-noreply .sw-feedback-success"),e(".stream-wood-noreply .sw-manager,.stream-wood-noreply .sw-messages-list,.stream-wood-noreply .sw-message-group,.stream-wood-noreply .sw-send-group").hide(),this.settings.feedback=!1,e(".stream-wood-noreply .sw-feedback-success").show().find(".sw-send-group").show(),e(".stream-wood-noreply .sw-email,.stream-wood-noreply .sw-phone").val(""),e(".stream-wood-noreply .sw-message").addClass("sw-message-empty"),this.showError("","email",".stream-wood-noreply"),this.showError("","phone",".stream-wood-noreply");var v={swClientName:l,swContactType:c,swEmail:d,swMessage:p,swEmailType:g,swContactId:f,swFormType:"leeds_online",swClientData:this.getClientData(),swUserPersonalCheckboxes:h},b=s.getCalltouchSession();b&&(v.calltouchSession=b),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:document.URL,Params:t(v),formcheck:"q67e4wvubik43i6kb4uifuy35ik6td",crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href}).done(function(t){t.hasOwnProperty("Errors")&&t.length>0&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"email",".stream-wood-noreply"]),s.showError.apply(s,[t,"phone",".stream-wood-noreply"])}),s.goalIsAchieved("noreply")})}else a.focus();return!1},i.prototype.personalDataIsChecked=function(e,t){var s=this,n=!0;return[{key:"personal_data",error_text:"Вы не дали согласие на обработку персональных данных"}].forEach(function(i){var o=e.find("[name="+i.key+"]");o.length>0&&o.parent().is(":visible")&&(o.is(":checked")||(s.showError(i.error_text,t,e),n&=!1))}),!0===n&&s.showError("",t,e),n},i.prototype.checkPersonalCheckboxes=function(e,t,s,n,i){s&&s.length>0||(s="на рекламную коммуникацию"),n||(n=!1),i&&i.length>0||(i="");var o=!1;+n&&(o=!0);var r=[{key:"advertising_agree",error_text:"Вы не дали согласие "+s,required:o,field_error:i},{key:"personal_data",error_text:"Вы не дали согласие на обработку персональных данных",required:!0,field_error:t}],a=this,l=!0;return r.forEach(function(t){var s=e.find("[name="+t.key+"]");s.length>0&&s.parent().is(":visible")&&t.required&&(s.is(":checked")||(a.showError(t.error_text,t.field_error,e),l&=!1))}),!0===l&&r.forEach(function(t){a.showError("",t.field_error,e)}),l},i.prototype.getPersonalCheckboxes=function(e){var t={};return[{key:"personal_data"},{key:"advertising_agree"}].forEach(function(s){var n=s.key,i=e.find("[name="+n+"]");i.length>0&&i.parent().is(":visible")&&(i.is(":checked")?t[n]=1:t[n]=0)}),t},i.prototype.generatorSendButtonClick=function(){var s=this;if(s.settings.generatorSending)return!1;s.settings.generatorSending=!0;var n=e(".stream-wood-generator");if(this.showError("","name",n),this.showError("","email",n),!this.personalDataIsChecked(n,"name"))return s.settings.generatorSending=!1,!1;var i=parseInt(this.settings.design["generator-contact-type"],10)||2,o=n.find(".sw-send-group"),r=o.find(".sw-gen-name").val(),a=o.find(".sw-gen-email").val(),l=o.find(".sw-gen-phone").val(),c=o.find(".sw-gen-user-field").val(),d=n.find(".sw-select-department");if(l="+7"===l?"":l,!r)return this.showError(this.languages[this.language].swEmptyErrorText,"name",n),s.settings.generatorSending=!1,!1;if(-1!==[1,3].indexOf(i)&&!a)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),s.settings.generatorSending=!1,!1;if(a&&!this.checkEmail(a))return this.showError(this.languages[this.language].swEmailErrorText,"email",n),s.settings.generatorSending=!1,!1;if(1===d.length&&!d.val())return this.showError(this.languages[this.language].swEmptyErrorText,"department",n),s.settings.generatorSending=!1,!1;var u,h=a,p=l;if(-1!==[2,3].indexOf(i)&&!this.checkPhoneBySettings(p))return this.showError(this.languages[this.language].swPhoneErrorText,"phone",n),s.settings.generatorSending=!1,!1;switch(i){case 1:u=1;break;case 3:h=h+", "+p,u=3;break;case 2:default:u=2,h=p}var g,f=r.split('"').join("");void 0!==this.settings.design["generator-user-field"]&&(g=this.settings.design["generator-user-field"]+": "+c);var m,w;void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]&&(m=n.find(".sw-container .sw-select-department").val(),w=1);var v,b=h,y=this.settings.design["generator-id"]||"common",k=this.settings.sessionId;if(v=this.settings.design["generator-after-text"]?'<p class="sw-title">'+this.settings.design["generator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</p>",!+this.settings.design["generator-if-follow"]){var x=this.settings.design["generator-settings"],T=e('<a class="sw-send-btn"></a>').text(this.languages[this.language].swCloseWindowText).css({color:x["gen-yesbtn-font-color"]?"#"+x["gen-yesbtn-font-color"]:"",backgroundColor:x["gen-yesbtn-bg-color"]?"#"+x["gen-yesbtn-bg-color"]:""}),C=e('<div class="sw-feedback-success" style="display: none"></div>').html(v);e('<div class="sw-send-group"></div>').append(T).appendTo(C),T.unbind("click").click(function(e){e.preventDefault(),C.remove(),n.find(".sw-manager,.sw-send-group,.sw-copyright,.sw-disclaimer,.sw-select-department,.streamwood-personal-data").show(),s.hideGenerator(),s.generatorStopTimer()}),n.find(".sw-manager,.sw-send-group,.sw-copyright,.sw-disclaimer,.sw-select-department,.streamwood-personal-data").hide(),this.settings.feedback=!1,C.show().appendTo(n),o.find(".sw-gen-name,.sw-gen-phone,.sw-gen-email").val(""),this.showError("","name",n),this.showError("","email",n),this.showError("","department",n)}var _={swClientName:f,swContactType:u,swEmail:b,swEmailType:w,swUserMessage:g,swContactId:m,swGeneratorId:y,swFormType:"generator",swClientData:this.getClientData()},S=s.getCalltouchSession();return S&&(_.calltouchSession=S),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:k,swUrl:document.URL,Params:t(_),formcheck:"q67e4wvubik43i6kb4uifuy35ik6td",crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href}).done(function(t){t.Success?(s.runTrigger.apply(s,["onaftersendgenerator",_]),void 0!==s.settings.design["generator-if-follow"]&&1==s.settings.design["generator-if-follow"]&&(s.hideGenerator(),s.generatorStopTimer(),void 0!==s.settings.design["generator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["generator-follow-url"]},3e3))):t.Errors&&e.each(t.Errors,function(e,t){s.showError.apply(s,[t,"name",".stream-wood-generator"]),s.showError.apply(s,[t,"email",".stream-wood-generator"])}),s.settings.generatorSending=!1,s.goalIsAchieved("generator")}),!1},i.prototype.generatorNewVersionSendButtonClick=function(){var s=this;if(s.settings.generatorSending)return!1;s.settings.generatorSending=!0;var n=e(".stream-wood-generator-2");if(this.showError("","name",n),this.showError("","email",n),this.showError("","phone",n),!this.checkPersonalCheckboxes(n,"personal-agree",this.settings.design["generator-advertising-agree-text"],this.settings.design["generator-advertising-agree-required"],"advertising-agree"))return s.settings.generatorSending=!1,!1;var i=n.find(".stream-wood-generator-client-data"),o=i.find(".sw-gen-name").val(),r=i.find(".sw-gen-email").val(),a=i.find(".sw-gen-phone").val(),l=i.find(".sw-select-department"),c=n.find(".sw-sms-block-input").val();a="+7"===a?"":a;var d,u=i.find(".sw-gen-user-field");if(void 0!==this.settings.design["generator-settings"]["gen-one-button"]&&1==parseInt(this.settings.design["generator-settings"]["gen-one-button"]))r="-",a="-";else{if(!o)return this.showError(this.languages[this.language].swEmptyErrorText,"name",n),s.settings.generatorSending=!1,!1;if(a&&!this.checkPhoneBySettings(a))return this.showError(this.languages[this.language].swPhoneErrorText,"phone",n),s.settings.generatorSending=!1,!1;if(r&&!this.checkEmail(r))return this.showError(this.languages[this.language].swEmailErrorText,"email",n),s.settings.generatorSending=!1,!1;switch(parseInt(this.settings.design["generator-contact-type"],10)||1){case 2:if(!r)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),s.settings.generatorSending=!1,!1;break;case 3:if(!r)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),s.settings.generatorSending=!1,!1;if(!a)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",n),s.settings.generatorSending=!1,!1;break;case 4:if(!r&&!a){var h=r?"phone":"email";return this.showError(this.languages[this.language].swEmptyErrorText,h,n),s.settings.generatorSending=!1,!1}break;case 1:default:if(!a)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",n),s.settings.generatorSending=!1,!1}if(1===l.length&&!l.val())return this.showError(this.languages[this.language].swEmptyErrorText,"department",n),s.settings.generatorSending=!1,!1;if(+this.settings.design["generator-sms-block"]&&a&&!c)return this.showError(this.languages[this.language].swEmptyErrorText,"sms-block",n),s.settings.generatorSending=!1,!1}var p;a&&r?(p=r+","+a,d=3):a?(p=a,d=2):r?(p=r,d=1):(p=a,d=2);var g=o.split('"').join("");void 0!==this.settings.design["generator-settings"]["gen-one-button"]&&1==parseInt(this.settings.design["generator-settings"]["gen-one-button"])&&(g="-");var f;if(void 0!==this.settings.design["generator-user-field"]&&(u.val()!==this.settings.design["generator-user-field"]&&(f=this.settings.design["generator-user-field"]+": "+u.val()),void 0!==this.settings.design["generator-required-user-field"]&&"1"===this.settings.design["generator-required-user-field"]&&(void 0===f||f===this.settings.design["generator-user-field"])))return this.showError("Дополнительное поле должно быть заполенено","phone",n),s.settings.generatorSending=!1,!1;var m,w;void 0!==this.settings.design["generator-choice-department"]&&"1"==this.settings.design["generator-choice-department"]&&(m=n.find(".sw-select-department").val(),w=1);var v,b=this.settings.design["generator-id"]||"common",y=this.settings.sessionId;v=void 0!==this.settings.design["generator-after-text"]&&""!=this.settings.design["generator-after-text"]?'<p class="sw-title">'+this.settings.design["generator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</p>";var k=this.settings.design["generator-settings"],x=this.getPersonalCheckboxes(n),T={swClientName:g,swContactType:d,swEmail:p,swEmailType:w,swUserMessage:f,swContactId:m,swGeneratorId:b,swFormType:"generator",swClientData:this.getClientData(),swUserPersonalCheckboxes:x};+this.settings.design["generator-sms-block"]&&(T.swSmsCode=c);var C=s.getCalltouchSession();return C&&(T.calltouchSession=C),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendFeedback",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:y,swUrl:document.URL,Params:t(T),formcheck:"q67e4wvubik43i6kb4uifuy35ik6td",crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href}).done(function(t){if(t.Success){if(s.runTrigger.apply(s,["onaftersendgeneratorv2",T]),void 0===s.settings.design["generator-if-follow"]||0==s.settings.design["generator-if-follow"]){var o=e('<div class="stream-wood-feedback-success" style="display: none"></div>').html(v);e('<a class="sw-send-btn"></a>').text(s.languages[s.language].swCloseWindowText).css({color:k["gen-yesbtn-font-color"]?"#"+k["gen-yesbtn-font-color"]:"",backgroundColor:k["gen-yesbtn-bg-color"]?"#"+k["gen-yesbtn-bg-color"]:""}).appendTo(o).unbind("click").click(function(e){e.preventDefault(),o.remove(),s.hideGenerator.call(s),s.generatorStopTimer.call(s)}),e(".stream-wood-generator-wallpaper").css("background-image","none"),n.find(".stream-wood-generator-container").hide(),s.settings.feedback=!1,o.show().appendTo(n).find(".sw-send-group").show(),k["gen-wallpaper"]&&n.css({width:460,height:200}).find(".stream-wood-generator-blank").remove(),i.find(".sw-gen-name, .sw-gen-email, .sw-gen-phone").val(""),s.showError("","name",n),s.showError("","email",n)}void 0!==s.settings.design["generator-if-follow"]&&1==s.settings.design["generator-if-follow"]&&(s.hideGenerator(),s.generatorStopTimer(),void 0!==s.settings.design["generator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["generator-follow-url"]},3e3)),s.settings.generatorSending=!1}else t.Errors&&e.each(t.Errors,function(e,t){"SMS_ERROR"==t?s.showError.apply(s,["Введенный код из СМС не верный","sms-block",n]):(s.showError.apply(s,[t,"name",n]),s.showError.apply(s,[t,"email",n]))}),s.settings.generatorSending=!1;s.goalIsAchieved("generator")}),!1},i.prototype.smsBlockSend=function(s,n){var i=this,o=s.closest(".stream-wood-sms-block"),r={swPhone:n};e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"smsBlockSend",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,Params:t(r)}).done(function(e){e.Success?(o.siblings(".sw-sms-block-error").html("").hide(),o.find(".sw-sms-block-input").focus()):e.Error&&(o.siblings(".sw-sms-block-error").html("<p>"+e.Data+"</p>").show(),i.settings.smsBlockSending=!1,o.find(".sw-sms-block-btn").removeClass("sw-sms-block-btn-disable"))})},i.prototype.registratorSendButtonClick=function(){var s=this,n=e(".stream-wood-registrator");if(this.showError("","name",n),this.showError("","email",n),!this.checkPersonalCheckboxes(n,"name",this.settings.design["registrator-advertising-agree-text"],this.settings.design["registrator-advertising-agree-required"],"name"))return!1;var i=n.find(".stream-wood-registrator-fields"),o=i.find(".sw-reg-date").val(),r=i.find(".sw-reg-name").val(),a=i.find(".sw-reg-email").val(),l=i.find(".sw-reg-phone").val(),c=i.find(".sw-reg-department").val(),d=n.find(".sw-sms-block-input").val();if(this.checkPhoneBySettings(l)||(l=""),!r)return this.showError(this.languages[this.language].swEmptyErrorText,"name",n),!1;if(+this.settings.design["registrator-choice-department-required"]&&!c)return this.showError(this.languages[this.language].swChangeDepText,"department",n),!1;var u=this.settings.design["registrator-contact-type"];if("1"==u&&!l)return this.showError(this.languages[this.language].swEmptyErrorText,"phone",n),!1;if("2"==u&&!a)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),!1;if(!("3"!=u||l&&a)){var h=l?"email":"phone";return this.showError(this.languages[this.language].swEmptyErrorText,h,n),!1}if("4"==u&&!l&&!a)return this.showError(this.languages[this.language].swEmptyErrorText,"email",n),!1;if(l&&!this.checkPhoneBySettings(l))return this.showError(this.languages[this.language].swPhoneErrorText,"phone",n),!1;if(+this.settings.design["registrator-sms-block"]&&l&&!d)return this.showError(this.languages[this.language].swEmptyErrorText,"sms-block",n),!1;if(a&&!this.checkEmail(a))return this.showError(this.languages[this.language].swEmailErrorText,"email",n),!1;for(var p,g,f,m=Array.isArray(this.settings.design["registrator-custom-fields"])?this.settings.design["registrator-custom-fields"].length:0,w=[],v=this.settings.design["registrator-custom-fields"],b=0;b<m;b++){switch(g=v[b],f=!0,g.type){case"select":p=g.variants[0];break;case"input":p=g.label,f=g.required}var y=n.find('[name="custom_field['+b+']_origin"]').val();if(!y&&f)return s.showError("Не указаны все данные","name",n),!1;w[b]=p+": "+y}var k;k=void 0!==this.settings.design["registrator-after-text"]&&""!=this.settings.design["registrator-after-text"]?'<p class="sw-title">'+this.settings.design["registrator-after-text"]+"</p>":'<p class="sw-title">'+this.languages[this.language].swGenFeedbackText+"</p><p>"+this.languages[this.language].swGenFeedbackText1+"</b></p>";var x;this.settings.design["registrator-choice-department"]&&(x=n.find(".sw-reg-department").val());var T=this.getPersonalCheckboxes(n),C={swClientName:r,swContactType:u,swContactId:x,swDate:o,swEmail:a,swPhone:l,swCustomFields:w,swRegistratorId:this.settings.design["registrator-id"],swClientData:this.getClientData(),swUserPersonalCheckboxes:T};+this.settings.design["registrator-sms-block"]&&(C.swSmsCode=d);var _=s.getCalltouchSession();return _&&(C.calltouchSession=_),e.getJSON(this.settings.serverUrl+"/api/?callback=?",{Action:"sendRegistrator",swDomainKey:this.settings.swDomainKey,swKey:this.settings.swKey,swSessionId:this.settings.sessionId,swUrl:document.URL,Params:t(C),crmCookie:t(this.getCookiesForCrm()),crmParam:t(this.getParamsForCrm()),crmReferer:document.referrer,crmUri:window.location.href}).done(function(t){if(t.Success){if(s.runTrigger.apply(s,["onaftersendregistrator",C]),void 0===s.settings.design["registrator-if-follow"]||0==s.settings.design["registrator-if-follow"]){var o=e('<button class="stream-wood-registrator-success-btn">').text(s.languages[s.language].swCloseWindowText).css({backgroundColor:s.settings.design["registrator-color"],color:s.settings.design["registrator-text-color"]}).unbind("click").click(function(e){e.preventDefault(),s.hideRegistrator(),s.registratorStopTimer()});n.find(".stream-wood-registrator-success").html(k).append(o).show(),n.find(".stream-wood-registrator-form").hide(),s.settings.feedback=!1,i.find(".sw-reg-email, .sw-reg-phone, .sw-reg-name").val(""),s.showError("","name",n),s.showError("","email",n)}void 0!==s.settings.design["registrator-if-follow"]&&1==s.settings.design["registrator-if-follow"]&&(s.hideRegistrator(),s.registratorStopTimer(),void 0!==s.settings.design["registrator-follow-url"]&&s.setTimeout("go_to_url",function(){window.location=s.settings.design["registrator-follow-url"]},3e3))}else t.Errors&&e.each(t.Errors,function(e,t){"SMS_ERROR"==t?s.showError.apply(s,["Введенный код из СМС не верный","sms-block",".stream-wood-registrator"]):(s.showError.apply(s,[t,"name",".stream-wood-registrator"]),s.showError.apply(s,[t,"email",".stream-wood-registrator"]))});s.goalIsAchieved("registrator")}),!1},i.prototype.setCookie=function(e,t,s,n,i,o){if(n=!n&&this.site&&this.site.pathname?this.site.pathname:n||"/",!e||!t)return!1;n||(n="/");var r="";r=e+"="+encodeURIComponent(t),s&&(r+="; expires="+s.toGMTString()),r+="; path="+n,i&&(r+="; domain="+i),o&&(r+="; secure"),document.cookie=r},i.prototype.getCookie=function(e){var t="(?:; )?"+e+"=([^;]*);?";return!!new RegExp(t).test(document.cookie)&&decodeURIComponent(RegExp.$1)},i.prototype.getUriParamByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},i.prototype.deleteCookie=function(e,t,s){return t||(t="/"),this.setCookie(e,"0",new Date(0),t,s),!0},i.prototype.stripTags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var s=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(n,"").replace(s,function(e,s){return t.indexOf("<"+s.toLowerCase()+">")>-1?e:""})},i.prototype.utf8_encode=function(e){for(var t="",s=0;s<e.length;s++)t+="&#"+e.charCodeAt(s)+";";return t},i.prototype.initTimeouts=function(){this.hasOwnProperty("_timeouts")&&this._timeouts.length>0&&this.deleteAllTimeouts(),this._timeouts=[]},i.prototype.setTimeout=function(e,t,s){this._timeouts.hasOwnProperty(e)&&this.deleteTimeout(e),this._timeouts[e]=setTimeout(t,s)},i.prototype.getTimeout=function(e){return this._timeouts[e]},i.prototype.deleteTimeout=function(e){void 0!==this._timeouts[e]&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},i.prototype.deleteAllTimeouts=function(){for(var e in this._timeouts)this._timeouts.hasOwnProperty(e)&&this.deleteTimeout(e)},i.prototype.initIntervals=function(){this.hasOwnProperty("_intervals")&&this._intervals.length>0&&this.deleteAllIntervals(),this._intervals=[]},i.prototype.setInterval=function(e,t,s){this._intervals.hasOwnProperty(e)&&this.deleteInterval(e),this._intervals[e]=setInterval(t,s)},i.prototype.getInterval=function(e){return this._intervals[e]},i.prototype.deleteInterval=function(e){void 0!==this._intervals[e]&&(clearInterval(this._intervals[e]),delete this._intervals[e])},i.prototype.deleteAllIntervals=function(){for(var e in this._intervals)this._intervals.hasOwnProperty(e)&&this.deleteInterval(e)},i.prototype.IOinit=function(){var t=this;if(!window.hasOwnProperty("swc_socket")||!window.swc_socket){var s=parseInt(this.settings.nodeId)||0;s&&"undefined"!=typeof io&&(window.swc_socket=io.connect(this.settings.socketServerUrl,{path:"/"+s+"/socket.io",transports:["websocket","xhr-polling","jsonp-polling","polling"]}),window.swc_socket.on("connected",function(e){t.IOconnected.apply(t,[e])}).on("disconnect",function(e){t.IOdisconnect.apply(t,[e])}).on("swSessionInitialized",function(e){t.IOswSessionInitialized.apply(t,[e])}).on("swMessageFromSessionSended",function(e){t.IOswMessageFromSessionSended.apply(t,[e])}).on("swOperatorType",function(e){t.IOswOperatorType.apply(t,[e])}).on("swOperatorEndType",function(e){t.IOswOperatorEndType.apply(t,[e])}).on("swMessageFromOperator",function(e){t.IOswMessageFromOperator.apply(t,[e])}).on("swOperatorChanged",function(e){t.IOswOperatorChanged.apply(t,[e])}).on("swOperatorConnected",function(e){t.IOswOperatorConnected.apply(t,[e])}).on("swOperatorDisconnected",function(e){t.IOswOperatorDisconnected.apply(t,[e])}).on("swSupervisorCommandFromOperator",function(e){t.IOswSupervisorCommandFromOperator.apply(t,[e])}),this.settings.hasOwnProperty("superVisorMode")&&this.settings.superVisorMode&&(this.setInterval("sendCursorPosTimer",function(){window.swc_socket&&t.settings.superVisorMode&&t.IOemit.apply(t,["swSupervisorCommandToOperator",{action:"sendCursorPosition",url:encodeURIComponent(document.URL),x:t.settings.cursorPosition.x,y:t.settings.cursorPosition.y,width:e(document).width(),height:e(document).height()}])},2500),this.setTimeout("operatorTimer",function(){t.settings.superVisorMode&&(t.settings.superVisorMode=!1,t.deleteInterval.apply(t,["sendCursorPosTimer"]),t.setCookie.apply(t,[t.strings.isConnection,"false"]))},1e4)))}},i.prototype.IOemit=function(e,t){window.hasOwnProperty("swc_socket")&&window.swc_socket&&window.swc_socket.emit(e,t)},i.prototype.IOconnected=function(){var e=this.settings.sessionId;e&&this.IOemit("swSetSessionId",{sid:e})},i.prototype.IOdisconnect=function(){delete window.swc_socket,window.swc_socket=!1},i.prototype.IOswSessionInitialized=function(){this.settings.manager.key&&(this.IOemit("swSetSessionOperatorKey",{okey:this.settings.manager.key}),this.IOemit("swSessionEndType",{visor:this.settings.superVisorMode}),this.settings.swSocketInitialized=!0),this.IOemit("swUpdateVisitHistory",{url:encodeURIComponent(document.URL),title:document.title})},i.prototype.IOswMessageFromSessionSended=function(){var t=new Date;t.setHours(t.getHours()+18),this.setCookie("swnoinvitation",1,t),e(".stream-wood-chat .sw-messages-list .sw-ml-item").removeClass("sw-ml-item-wait"),this.showError()},i.prototype.IOswOperatorType=function(){e(".stream-wood-chat .sw-newmessage").length||(e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.appendTypeMessage(),this.scrollChatDown())},i.prototype.IOswOperatorEndType=function(){e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove()},i.prototype.IOswMessageFromOperator=function(t){if(e(".stream-wood-chat .sw-newmessage").length)this.settings.chatOpened=!0,this.settings.needBeep=!0,this.setCookie(this.strings.opened,1),e(".stream-wood-chat,.stream-wood-invitation,.stream-wood-btn").remove(),this.reload(2e3);else{e(".stream-wood-chat .sw-messages-list .sw-ml-item-type").remove(),this.settings.chatOpened||this.slideUp();var s={},n=new Date;s.message=t.data.message,s.direct=this.consts.SW_MESSAGE_FROM_MANAGER,s.d=n.getDate(),s.m=n.getMonth()+1,s.y=n.getFullYear(),s.hour=n.getHours(),s.min=n.getMinutes(),s.min=n.getMinutes(),s.node_id=t.data.node_id,this.appendMessage(s),this.scrollChatDown(),this.playBeep(),this.setTitle(),this.settings.design["collector-hide"]||this.slideDownNoReply()}},i.prototype.IOswOperatorChanged=function(e){e&&e.oid&&(this.settings.manager.id=e.oid,void 0!==this.settings.findOperatorId&&(this.settings.findOperatorId=e.oid)),this.reload(2e3)},i.prototype.IOswOperatorConnected=function(e){this.settings.manager.id==e.oid&&(this.settings.manager.from_mobile>0?this.settings.manager.status=this.consts.SW_MANAGER_STATUS_ONLINE:this.getTimeout("reload")?this.deleteTimeout("reload"):this.reload(2e3))},i.prototype.IOswOperatorDisconnected=function(e){this.settings.manager.id==e.oid&&(this.settings.manager.from_mobile>0?this.settings.manager.status=this.consts.SW_MANAGER_STATUS_OFFLINE:this.reload(1e4))},i.prototype.IOswSupervisorCommandFromOperator=function(t){var s=this;if(!this.settings.inFrame){var n=this.settings.sessionId;switch(t.action){case"operatorConnect":if(t.sid!==n||t.manager!==this.settings.manager.id)break;this.settings.superVisorMode=!0,this.setInterval("sendCursorPosTimer",function(){s.settings.superVisorMode&&s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendCursorPosition",url:encodeURIComponent(document.URL),x:s.settings.cursorPosition.x,y:s.settings.cursorPosition.y,width:e(document).width(),height:e(document).height()}])},2500),this.setCookie(this.strings.isConnection,"true");break;case"requestPermission":if(t.sid!=n||t.manager!=this.settings.manager.id)break;e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),this.slideUp(),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append('<p class="sw-name-d">'+this.settings.managerName+" "+this.languages[this.language].swRequestPermissionText+"</p>").appendTo(".stream-wood-chat .sw-messages-list"),e("<div>").addClass("sw-send-group sw-grey").append(e('<a href="javascript:void(0);">').addClass("sw-send-btn sw-send-btn-margin").text("Да").click(function(){return e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendAccessGranted",clientName:s.settings.clientName,width:e(document).width(),height:e(document).height()}]),e("<div>").addClass("sw-ml-item sw-ml-item-my sw-ml-item-access").append('<p class="sw-name-d">'+s.languages[s.language].swPermissionAccessText+"</p>").appendTo(".stream-wood-chat .sw-messages-list"),s.scrollChatDown(),!1})).append(e('<a href="javascript:void(0);">').addClass("sw-send-btn sw-send-btn-margin").html("Нет").click(function(){return e(".stream-wood-chat .sw-messages-list .sw-ml-item-access").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"sendAccessDenied"}]),s.scrollChatDown(),!1})).appendTo(".stream-wood-chat .sw-messages-list .sw-ml-item-access"),s.scrollChatDown();break;case"doAllocation":var i=e(document).width(),o=e(document).width()-(t.position.x+t.size.width);o<0&&(o=0);var r=e(document).height()-(t.position.y+t.size.height);r<0&&(r=0),e("body").append(e("<div>").addClass("dark-cover-top").css({height:t.position.y+"px",width:i+"px"})).append(e("<div>").addClass("dark-cover-bottom").css({top:t.position.y+t.size.height+"px",width:i+"px",height:r+"px"})).append(e("<div>").addClass("dark-cover-left").css({top:t.position.y,height:t.size.height,width:t.position.x})).append(e("<div>").addClass("dark-cover-right").css({top:t.position.y,height:t.size.height,left:t.position.x+t.size.width,width:o})).append(e("<div>").addClass("tclose").css({top:t.position.y-25+"px",left:o<30?t.position.x-25+"px":t.position.x+t.size.width+"px"}).unbind("click").click(function(){e(".dark-cover-top,.dark-cover-bottom,.dark-cover-left,.dark-cover-right,.tclose").remove(),s.IOemit.apply(s,["swSupervisorCommandToOperator",{action:"clientAllocationHide"}])})),e(document).scrollLeft(t.position.x-100),e(document).scrollTop(t.position.y-100);break;case"allocationHide":e(".dark-cover-top,.dark-cover-bottom,.dark-cover-left,.dark-cover-right,.tclose").remove();break;case"operatorDisconnected":if(t.sid!=n)break;this.settings.superVisorMode&&(this.settings.superVisorMode=!1,this.deleteInterval("sendCursorPosTimer"),this.setCookie(this.strings.isConnection,"false"));break;case"operatorIsConnect":if(t.sid!=n)break;this.setTimeout("operatorTimer",function(){s.settings.superVisorMode&&(s.settings.superVisorMode=!1,s.deleteInterval.apply(s,["sendCursorPosTimer"]),s.setCookie.apply(s,[s.strings.isConnection,"false"]))},1e4)}}},i.prototype.setLanguages=function(){this.languages={ru:{sendButtonText:"Отправить",swGuestNameText:"Гость",swHideText:"Спрятать",swSoundOffText:"Отключить звук",swSoundOnText:"Включить звук",swChangeRatingText:"Изменить оценку",swSendResultText:"Спасибо, Ваш голос учтен!",swSetRatingText:"Оценить диалог",swOrText:"или",swWorkedOnText:"Работает на",swYouMessageText:"Сообщение",swCancelButtonText:"Нет, спасибо",swQuestButtonText:"Спросить",swSendQuestionText:"Задать вопрос",swQuestionText:"Вопрос",swOnlineText:"В сети",swOfflineText:"Не в сети",swOperatorOnlineText:"оператор в сети",swOperatorOfflineText:"оператор не в сети",swChangeDepText:"Выберите отдел для обращения",swChangeCityText:"Выберите город выезда",swYouNameText:"Ваше имя",swHelloText:"Здравствуйте",swChangeManagerText:"Выберите оператора для начала диалога",swManagerText:"Оператор",swDepText:"Отдел",swCityText:"Город",swFeedbackText0:"Оставьте свое сообщение, мы Вам перезвоним или ответим на указанный Вами адрес электронной почты.",swFeedbackText1:"Оставьте свое сообщение, мы Вам перезвоним на указанный Вами номер телефона.",swFeedbackText2:"Оставьте свое сообщение, мы Вам ответим на указанный Вами адрес электронной почты.",swFeedbackText3:"Оставьте свое сообщение, мы перезвоним на указанный номер или ответим на почту.",swPhoneText:"Телефон",swEmailText:"Почта",swEmptyErrorText:"Заполните все поля",swEmailErrorText:"Неправильный адрес почты",swPhoneErrorText:"Некорректный номер телефона",swMessageSendedText:"Ваше сообщение успешно отправлено",swAnswerText0:"Ответ Вы получите на указанные контактные данные",swAnswerText1:"Ответ вы получите на указанную Вами почту <b>{email}</b>",swAnswerText2:"Ответ Вы получите по указанному Вами телефону <b>{phone}</b>",swAnswerText3:"Ответ Вы получите по указанному Вами телефону <b>{phone}</b> или почте <b>{email}</b>",swCloseWindowText:"Закрыть окно",swNoReplyText:"Извините, все операторы сейчас заняты",swNoReplyContactsText:"Оставьте свои контактные данные и мы обязательно ответим!",swGeneratorTitleText:"Время получать подарки!",swGeneratorContentText:"Хотите принять участие в розыгрыше ряда подарков?",swGenDaysText0:"ДНИ",swGenDaysText1:"ДЕНЬ",swGenDaysText2:"ДНЯ",swGenDaysText3:"ДНЕЙ",swGenHoursText0:"ЧАСЫ",swGenHoursText1:"ЧАС",swGenHoursText2:"ЧАСА",swGenHoursText3:"ЧАСОВ",swGenMinutesText0:"МИНУТЫ",swGenMinutesText1:"МИНУТА",swGenMinutesText2:"МИНУТЫ",swGenMinutesText3:"МИНУТ",swGenSecondsText0:"СЕКУНДЫ",swGenSecondsText1:"СЕКУНДА",swGenSecondsText2:"СЕКУНДЫ",swGenSecondsText3:"СЕКУНД",swGenNameText:"Ваше имя",swGenPhoneText:"Ваш телефон",swGenEmailText:"Ваша почта",swGenBtnYesText:"Хочу",swGenBtnNoText:"Нет, спасибо",swGenFeedbackText:"Спасибо, Ваша заявка успешно отправлена",swGenFeedbackText1:"Менеджер с Вами свяжется в ближайшее время",swGenNoWorked:"Генератор клиентов не поддерживается в данной версии браузера!",swRequestPermissionText:"запрашивает разрешение на подключение. Предоставить доступ?",swPermissionAccessText:"Разрешение предоставлено.",swNewMessageText:"Новое сообщение",swInvitationText:"Здравствуйте! Рады приветствовать Вас на нашем сайте. Есть какие-либо вопросы? Можете задать их прямо сейчас!",swNoManagerTitle:"Операторов нет на месте",swNoManagerText:"Оставьте свое сообщение и мы обязательно ответим",swManagerHelloText:"Здравствуйте, меня зовут ",swManagerManHelpText:"Буду рад помочь Вам.",swManagerWomanHelpText:"Буду рада помочь Вам.",swServerErrorText:"Попробуйте через пару секунд, ошибка соединения с сервером...",swInText:" в "},en:{sendButtonText:"Send text",swGuestNameText:"Guest",swHideText:"Hide",swSoundOffText:"Sound off",swSoundOnText:"Sound on",swChangeRatingText:"Change rating",swSendResultText:"Thank you, your vote has been counted!",swSetRatingText:"Rate dialogue",swOrText:"or",swWorkedOnText:"Powered by",swYouMessageText:"You message",swCancelButtonText:"No, thanks",swQuestButtonText:"Question",swSendQuestionText:"Ask a question",swQuestionText:"Question",swOnlineText:"Online",swOfflineText:"Offline",swOperatorOnlineText:"operator online",swOperatorOfflineText:"operator offline",swChangeDepText:"select department",swChangeCityText:"select a city departure",swYouNameText:"You name",swHelloText:"Hello",swChangeManagerText:"select the operator to start a dialogue",swManagerText:"Manager",swDepText:"Department",swCityText:"City",swFeedbackText0:"Leave your message, we will call you back or reply to your specified email address.",swFeedbackText1:"Leave your message, we will call you back at your specified phone number.",swFeedbackText2:"Leave your message, we will answer to your specified email address.",swFeedbackText3:"Leave your message, we will call to the specified number or reply to mail.",swPhoneText:"Phone",swEmailText:"Email",swEmptyErrorText:"Fill in all fields",swEmailErrorText:"Wrong e-mail address",swMessageSendedText:"Your message has been sent successfully",swAnswerText0:"The answer you will get your specified contacts",swAnswerText1:"The answer you will get your specified e-mail <b>{email}</b>",swAnswerText2:"The answer you get to the designated phone <b>{phone}</b>",swAnswerText3:"The answer you get to the designated phone <b>{phone}</b> or e-mail <b>{email}</b>",swCloseWindowText:"Close window",swNoReplyText:"Sorry, all the operators are busy",swNoReplyContactsText:"Leave your contact details and we will answer!",swGeneratorTitleText:"Time for presents!",swGeneratorContentText:"Want to take part in the draw of a number of gifts?",swGenDaysText0:"DAYS",swGenDaysText1:"DAY",swGenDaysText2:"DAYS",swGenDaysText3:"DAYS",swGenHoursText0:"HOURS",swGenHoursText1:"HOUR",swGenHoursText2:"HOURS",swGenHoursText3:"HOURS",swGenMinutesText0:"MINUTES",swGenMinutesText1:"MINUTE",swGenMinutesText2:"MINUTES",swGenMinutesText3:"MINUTES",swGenSecondsText0:"SECONDS",swGenSecondsText1:"SEC",swGenSecondsText2:"SECONDS",swGenSecondsText3:"SECONDS",swGenNameText:"YOU NAME",swGenPhoneText:"YOU PHONE",swGenEmailText:"YOU EMAIL",swGenBtnYesText:"Yes",swGenBtnNoText:"No, thanks",swGenFeedbackText:"Thank You, your application is successfully sent",swGenFeedbackText1:"Manager will contact you with in the near future",swGenNoWorked:"The generator is not yet supported in this version of your browser!",swRequestPermissionText:"asks for permission to connect. To provide access?",swPermissionAccessText:"Permission is granted.",swNewMessageText:"New message",swInvitationText:"Hello! Welcome you to our website. Are there any questions? Can ask them right now!",swNoManagerTitle:"Operators do not have in place",swNoManagerText:"Leave your message and we will answer",swManagerHelloText:"Hello, my name is ",swManagerManHelpText:"I will be glad to help you.",swManagerWomanHelpText:"I will be glad to help you.",swServerErrorText:"Try a couple of seconds, an error connecting to the server ...",swInText:" in "}}},i.prototype.setConsts=function(){this.consts={SW_MANAGER_STATUS_OFFLINE:0,SW_MANAGER_STATUS_ONLINE:1,SW_MESSAGE_NOTVIEW:0,SW_MESSAGE_VIEW:1,SW_MESSAGE_FROM_SITE:0,SW_MESSAGE_FROM_MANAGER:1,SW_NO_INVITATION_TIMEOUT:60,SW_BTN_ACTION_TIMEOUT:15,SW_CHECK_MESSAGES_TIMEOUT:5e3}},i.prototype.setSite=function(e){URL&&"function"==typeof URL&&(e?(-1===e.indexOf(":")&&(e="http://"+e),this.site=new URL(e)):this.site=null)},i.prototype.setSettings=function(){this.settings={clientName:"Гость",callbackOpened:!1,chatOpened:!1,departments:!1,design:!1,appEvents:{},feedback:!1,feedbackOpened:!1,findDepartmentId:!1,findOperatorId:!1,findOperatorType:0,foreverChat:0,generatorDepartments:[],registratorDepartments:[],generatorOpened:!1,generatorSending:!1,hideAll:!1,hideAnchor:!1,hideCloseBtn:0,hideOfflineAnchor:!1,imgServerUrl:"https://img.streamwood.ru",filesServerUrl:"https://files.streamwood.ru",invitationManager:!1,invitationOpened:!1,manager:!1,managerName:"",managerStatus:this.consts.SW_MANAGER_STATUS_OFFLINE,managers:!1,messageCounter:0,noReplyOpened:!1,recallOpened:!1,recallShowTime:!1,recallBtnColor:"80d189",recallBtnColorRid:"C6FBCC",recallBtnTube:"right",recallBtnHoverColor:"e8b45e",recallBtnHoverColorRid:"fbe3be",recallBtnHoverTube:"right",recallSource:"",recallSolid:"d72e7d",recallSending:!1,selectRecallTime:!1,phonePrefix:7,zalikeOpened:!1,callId:0,registratorOpened:!1,smsBlockSending:!1,serverUrl:"https://clients.streamwood.ru",smallWindow:!1,socketServerUrl:"https://chat1.streamwood.ru:443",swDomainKey:!1,swKey:!1,swSocketsLoaded:!1,title:!1,titleTimeout:1,userData:{},version:"2.6.0"}},i.prototype.setStrings=function(){this.strings={currentOpenedPages:"swc_openedPages",clientName:"swc_clientname",innerHeight:"swc_innerHeight",innerWidth:"swc_innerWidth",isConnection:"swc_isconnection",firstLoadTime:"swc_swfirstloadtime",firstMessage:"swc_swfirstmessage",genActionEnd:"swc_swgenfinish",genCountDown:"swc_swgencountdown",noNewVisit:"swc_swnonewvisit",nocallback:"swc_nocallback",noexitcallback:"swc_noexitcallback",mainPage:"swc_mainpage",opened:"swc_swopened",sessionId:"swc_swsessionid",soundOff:"swc_swsoundoff",timeAll:"swc_swtimeall",timePage:"swc_swtimepage",rating:"swc_swrating",referrer:"swc_swreferrer",updateMainPage:"swc_updatemainpage"}},i.prototype.setSounds=function(){this.sounds={incomingSoundHandler:!1}},i.prototype.setCallbacks=function(){this.callbacks={loaded:[]}},i.prototype.time2int=function(e){var t=e.split(":");return 1e3*(3600*parseInt(t[0],10)+60*parseInt(t[1],10))},i.prototype.padZero=function(e,t){for(;e.toString().length<t;)e="0"+e;return e},i.prototype.int2time=function(e){var t=[];return t[0]=Math.floor(e/36e5),t[1]=Math.floor(e%36e5/6e4),t[0]=this.padZero(t[0],2),t[1]=this.padZero(t[1],2),t.join(":")},i.prototype.setCallbackRecallTimeSelect=function(){var t=this,s=new Date,n=60*t.getClientServerOffset()*1e3,i=parseInt(e("#recall-select-day").val(),10)||s,o=new Date(i),r=this.callbackWorkingTimeByDay(o.getDay()),a=this.time2int(r.start_time)-n,l=this.time2int(r.end_time)-n;l<a&&(l+=864e5),o.toDateString()===s.toDateString()&&(a=this.time2int(s.getHours()+":"+s.getMinutes()),a+=3e5-a%3e5);var c=new Date(o.valueOf());c.setDate(c.getDate()+1);for(var d=this.callbackFormatRecallDate(c),u="",h=a,p=this.settings.design.recall_default_time_select?this.time2int(this.settings.design.recall_default_time_select):a,g=!1;h<l;){var f=this.int2time(h);h>=a&&(h>=864e5&&(f=this.int2time(h-864e5-n),f+=", "+d),u+="<option ",!g&&h>=p&&(u+=" selected ",g=!0),u+=' value="'+h+'">'+f+"</option>"),h+=6e5}e("#recall-select-hour").html(u)},i.prototype.setCallbackRecallDaySelect=function(){var t=this,s=e("#recall-select-day"),n="",i=new Date;i.setMinutes(0),i.setHours(0),i.setSeconds(0),i.setMilliseconds(0);for(var o=0;o<7;o++){var r=new Date(i.getTime()+24*o*36e5);t.callbackIsWorkingDay(r)&&(n+='<option value="'+r.getTime()+'">'+t.callbackFormatRecallDate(r)+"</option>")}s.html(n)},i.prototype.callbackFormatRecallDate=function(e){var t="";return t+=e.getDate(),t+=" ",t+="января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(",")[e.getMonth()],t+=", ",t+="вс,пн,вт,ср,чт,пт,сб,вс".split(",")[e.getDay()]},i.prototype.callbackIsWorkingDay=function(e){if(!+this.settings.design.recall_is_show_time)return!0;var t=this.callbackIsWorkingWeekDay(e.getDay()),s=new Date;if(s.toDateString()===e.toDateString()&&t){var n=this.callbackIsWorkingTime(s),i=this.callbackWorkingTimeByDay(e.getDay()).start_time.substr(0,2),o=s.getHours();return!n&&o<=i||n}return t},i.prototype.callbackIsWorkingWeekDay=function(e){return!+this.settings.design.recall_is_show_time||this.settings.design["recall-weekdays"]&&-1!==this.settings.design["recall-weekdays"].indexOf(e)},i.prototype.callbackIsWorkingTime=function(e){if(this.callbackIsWorkingWeekDay(e.getDay())){var t=60*this.getClientServerOffset(),s=this.callbackWorkingTimeByDay(e.getDay()),n=s.start_time.split(":"),i=new Date(e.getTime());if(i.setHours(n[0]),i.setMinutes(n[1]),i.setSeconds(-t),i.setMilliseconds(0),e.getTime()<i.getTime())return!1;n=s.end_time.split(":");var o=new Date(e.getTime());return o.setHours(n[0]),o.setMinutes(n[1]),o.setSeconds(-t),o.setMilliseconds(0),o.getTime()>e.getTime()}return!1},i.prototype.callbackWorkingTimeByDay=function(e){if(!+this.settings.design.recall_is_show_time)return{start_time:"00:00",end_time:"23:59"};var t=this.settings.design.recall_start_time,s=this.settings.design.recall_end_time;return Array.isArray(t)&&(t=t[e]||"00:00"),Array.isArray(s)&&(s=s[e]||"00:00"),{start_time:t,end_time:s}},i.prototype.getClientServerOffset=function(){return void 0!==this.client_server_offset&&this.client_server_offset?parseInt(this.client_server_offset):(new Date).getTimezoneOffset()+180},i.prototype.setClientServerOffset=function(e){var t=new Date,s=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());this.client_server_offset=((e-s/1e3)/60).toFixed(0)},i.prototype.goalIsAchieved=function(e){var t,s,n;switch(e){case"chat":t="chat_goal",s="NewMessage",n=this.settings.clientName+" начал диалог";break;case"feedback":t="feedback_goal",s="Feedback",n="Обращение в обратную связь";break;case"recall":t="callback_goal",s="Callback",n="Звонок в Callback-виджет";break;case"registrator":t="registrator_goal",s="Registrator",n="Заявка в регистратор";break;case"generator":t="generator_goal",s="Generator",n="Заявка в генератор клиентов";break;case"unibutton":t="unibutton_goal",s="Unibutton",n="Нажатие универсальной кнопки";break;case"multibutton":t="multibutton_goal",s="Multibutton",n="Переход по мультикнопке";break;case"noreply":t="noreply_goal",s="NoReply",n="Обращение в сборщик контактов";break;case"webpush":t="webpush_goal",s="Webpush",n="Подписка на Push-уведомления";break;default:return}if(this.settings.design.metrica_id&&this.settings.design[t]){var i=this.settings.design.metrica_id,o="yaCounter"+i,r=this.settings.design[t];"function"==typeof window.ym?window.ym(i,"reachGoal",r):window[o]&&window[o].reachGoal(r)}void 0!==window._gaq&&window._gaq.push(["_trackEvent","StreamWood",s,n]),"function"==typeof window.ga&&(window.ga("send","event","StreamWood",s,n),window.ga("gtm10.send",{hitType:"event",eventCategory:"Streamwood",eventAction:s,eventLabel:n,eventValue:void 0})),"function"==typeof window.gtag&&window.gtag("event",s,{event_category:"Streamwood",event_label:n}),void 0!==window.dataLayer&&"function"==typeof dataLayer.push&&window.dataLayer.push({event:"StreamWoodEvents",eventCategory:"StreamWood",eventAction:s,eventLabel:n})};var o={chat:'<div class="stream-wood-chat" style="display: none"><a class="sw-close" href="javascript:void(0);"></a><a class="sw-sound" href="javascript:void(0);"></a><div class="sw-container"><div class="sw-manager"></div><div class="sw-messages-list"></div><div class="sw-message-group"></div><div class="sw-send-group"><a class="good" href="javascript:void(0);"></a><a class="bad" href="javascript:void(0);"></a><div class="sw-upload" id="upload"><input type="file" id="file_upload" name="file"></div><a class="sw-send-btn sw-send-btn-rating-on" href="javascript:void(0);"><span class="sw-send-btn-text"></span></a><span class="sw-enter"><span> или</span> Ctrl+Enter</span></div><div class="sw-error sw-error-main"></div></div>',invitation:'<div class="stream-wood-invitation" style="display: none;"><div class="sw-manager"></div><div class="sw-message-group"><div class="sw-newmessage"><dl><dt></dt></dl><textarea class="sw-message"></textarea></div></div><div class="sw-send-group"><a class="sw-send-btn sw-cancel-btn" href="javascript:void(0);"></a><a class="sw-send-btn jssw-send-btn" href="javascript:void(0);"></a></div><div class="sw-error sw-error-main"></div></div>',invitation_top:'<div class="sw-manager-spot"><div class="sw-manager-info"><img src="" width="60" height="60" alt=""/><p class="sw-manager-name"></p><p class="sw-manager-position"></p></div><p class="invitation-text"></p></div>',noreply:'<div class="stream-wood-noreply" style="display: none"><div class="sw-manager sw-manager-no-manager"><p class="sw-title"></p><p class="sw-info"></p></div><div class="sw-message-group"></div><div class="sw-send-group"><a href="javascript:void(0);" class="sw-send-btn sw-cancel-btn">Нет, спасибо</a><a href="javascript:void(0);" class="sw-send-btn">Отправить</a></div><div class="sw-error sw-error-main"></div></div>',generator:'<div class="stream-wood-generator" style="display: none;"><div class="sw-container"><div class="sw-manager"><div class="sw-generator-title"><span class=generator-title></span></div></div></div></div>',btn:'<a class="stream-wood-btn" href="#" style="display: none"><span class="sw-title"></span><br><span class="sw-status"></span></a>',zalike:'<div class="stream-wood-zalike-window" style="display: none"><div class="stream-wood-zalike-window-head"><div class="stream-wood-zalike-title"></div><div class="stream-wood-zalike-subtitle"></div><div class="stream-wood-zalike-close"></div></div><div class="stream-wood-zalike-window-body"><div class="stream-wood-zalike-window-body-center"></div><div class="stream-wood-zalike-window-body-button"><a class="stream-wood-zalike-vk-button" href="javascript:void(0);" id="vkAdd"></a><div>нажмите на кнопку, чтобы разместить запись на своей странице</div></div></div><div class="stream-wood-zalike-window-footer"><a class="stream-wood-zalike-window-footer-link" href="javascript:void(0);" target="_blank">Работает на Streamwood</a></div></div>',recallcenter:'<div class="stream-wood-recall-3 stream-wood-recall-center" style="display: none"><div class="stream-wood-recall-container"><div class="stream-wood-recall-header" style="display: none"></div><a class="stream-wood-recall-close stream-wood-recall-close-30" href="javascript:void(0);"></a><div class="stream-wood-recall-logo-container"></div><div class="stream-wood-recall-content"><div class="stream-wood-recall-title">Хотите, мы перезвоним Вам за 25 секунд?</div><div class="stream-wood-recall-departments"></div><div class="stream-wood-recall-timer"><div class="stream-wood-recall-timer-digit"></div><div class="stream-wood-recall-timer-text">секунд</div><div class="sw-percent"></div><div id="sw-slice" class="gt50"><div class="pie"></div><div class="pie fill"></div></div></div><div class="sw-recall-select-time-container"><div class="sw-recall-select-time-header">Выберите удобное время звонка.</div><select id="recall-select-day" class="sw-recall-select-day"></select><select id="recall-select-hour" class="sw-recall-select-hour"></select></div><div class="stream-wood-recall-number"><input class="sw-recall-phone" type="phone" value="+7 ..."><span class="phone-number-text">Ваш телефон:</span><input class="sw-phone-recall" type="phone" value="+7 ..."><a class="sw-recall-send-btn" href="javascript:void(0);">Жду звонка!</a><div class="timer-text"></div><p id="sw-math-captcha"></p><div class="stream-wood-sms-block"><div class="stream-wood-sms-block-input"><input class="strmwd-textfield sw-sms-block-input stream-wood-recall-input" name="sms_code" type="text" placeholder="Код из СМС"></div><div class="stream-wood-sms-block-btn"><div class="sw-sms-block-btn">Отправить смс</div></div></div><div class="sw-error sw-sms-block-error"></div><p class="first">Укажите Ваш контактный телефон и<br>засекайте время!</p></div><div class="stream-wood-recall-number-wait"><span class="phone-number-text-wait">Телефон</span></br></br><span>Спасибо, ждите звонка!</span></div><div class="stream-wood-recall-button-container"><a class="sw-recall-send-btn" href="javascript:void(0);">Жду звонка!</a></div><p class="sw-recall-number-error">Введите правильный номер телефона</p><div class="sw-recall-select-time"><a class="sw-recall-select-time-link" href="#">Выбрать удобное время звонка</a></div></div><div class="stream-wood-recall-copyright">работает на <a href="https://streamwood.ru?utm_source=recall&amp;utm_medium=self&amp;utm_campaign=streamwood&amp;utm_content=150750498&amp;utm_term=" class="sw-copy" target="_blank">StreamWood</a></div></div></div>',recallside:'<div class="stream-wood-recall-3 stream-wood-recall-side" style="display: none"><a class="stream-wood-recall-close stream-wood-recall-close-30" href="javascript:void(0);"></a><a class="stream-wood-recall-hide-left" href="javascript:void(0);"><span class="recall-hide recall-hide-close"></span></a><a class="stream-wood-recall-hide-right" href="javascript:void(0);"><span class="recall-hide recall-hide-close"></span></a><div class="stream-wood-recall-container"><div class="stream-wood-recall-logo-container"></div><div class="stream-wood-recall-content"><div class="stream-wood-recall-title">Хотите, мы перезвоним Вам бесплатно и все обсудим?</div><div class="stream-wood-recall-departments"></div><div class="stream-wood-recall-timer"><div class="stream-wood-recall-timer-digit"></div><div class="stream-wood-recall-timer-text">секунд</div><div class="sw-percent"></div><div id="sw-slice" class="gt50"><div class="pie"></div><div class="pie fill"></div></div></div><div class="sw-recall-select-time-container"><div class="sw-recall-select-time-header">Выберите удобное время звонка.</div><select id="recall-select-day" class="sw-recall-select-day"></select><select id="recall-select-hour" class="sw-recall-select-hour"></select></div><div class="stream-wood-recall-number"><input class="sw-recall-phone" type="phone" value="+7 ..."><p class="phone-number-text">Ваш телефон:</p><input class="sw-phone-recall" type="phone" value="+7 ..."><p id="sw-math-captcha"></p><div class="stream-wood-sms-block"><div class="stream-wood-sms-block-input"><input class="strmwd-textfield sw-sms-block-input stream-wood-recall-input" name="sms_code" type="text" placeholder="Код из СМС"></div><div class="stream-wood-sms-block-btn"><div class="sw-sms-block-btn">Отправить смс</div></div></div><div class="sw-error sw-sms-block-error"></div><p class="first">Укажите Ваш контактный телефон и<br> засекайте время!</p></div><div class="stream-wood-recall-button-container"><a class="sw-recall-send-btn" href="javascript:void(0);">Жду звонка!</a><div class="timer-text"></div></div><div class="stream-wood-recall-number-wait"><span class="phone-number-text-wait">Телефон</span></br></br><span>Спасибо, ждите звонка!</span></div><p class="sw-recall-number-error">Введите правильный номер телефона</p><div class="sw-recall-select-time"><a class="sw-recall-select-time-link" href="#">Выбрать удобное время звонка</a></div></div><div class="stream-wood-recall-copyright">работает на <a href="https://streamwood.ru?utm_source=recall&amp;utm_medium=self&amp;utm_campaign=streamwood&amp;utm_content=150750498&amp;utm_term=" class="sw-copy" target="_blank">StreamWood</a></div></div></div>',generator_new:'<div class="stream-wood-generator-2" style="display: none;"><a href="#" class="stream-wood-generator-close stream-wood-generator-close-30"></a><div class="stream-wood-generator-logo-container"></div><div class="stream-wood-generator-container"><div class="stream-wood-generator-title"><span class="generator-title-span"></span></div><div class="stream-wood-generator-action-img"></div><div class="stream-wood-generator-body"><div class="stream-wood-generator-counter"><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-day">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-hour">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-min">00</div></div><div class="stream-wood-generator-counter-dot">:</div><div class="stream-wood-generator-counter-box"><div class="stream-wood-generator-counter-num" id="streamwood-generator-sec">00</div></div></div><div class="stream-wood-generator-counter-text-box"><div class="stream-wood-generator-counter-text">дни</div><div class="stream-wood-generator-counter-text">часы</div><div class="stream-wood-generator-counter-text">минуты</div><div class="stream-wood-generator-counter-text">секунды</div></div><div class="stream-wood-generator-action-content"><div class="stream-wood-generator-action-title"></div><div class="stream-wood-generator-action-text"></div></div><div class="stream-wood-generator-client-data"><div class="stream-wood-generator-client-name"><input type="text" placeholder="Ваше имя" value="" class="sw-gen-name stream-wood-generator-input" /><a class="stream-wood-generator-send-btn" href="javascript:void(0);" onclick="return false">Хочу</a></div><div class="sw-error sw-name-error"></div><div class="stream-wood-generator-client-phone"><input type="text" placeholder="Ваш телефон" value="" class="sw-gen-phone stream-wood-generator-input" /><a class="stream-wood-generator-cancel-btn" href="javascript:void(0);" onclick="return false">Нет, спасибо</a></div><div class="stream-wood-sms-block"><div class="stream-wood-sms-block-input"><input class="strmwd-textfield sw-sms-block-input stream-wood-generator-input" name="sms_code" type="text" placeholder="Код из СМС"></div><div class="stream-wood-sms-block-btn"><div class="sw-sms-block-btn">Отправить смс</div></div></div><div class="sw-error sw-sms-block-error"></div><div class="sw-error sw-phone-error"></div><div class="stream-wood-generator-phone-or-email" style="display: none;">или</div><div class="stream-wood-generator-client-email" style="display: none;"><input type="text" class="sw-gen-email stream-wood-generator-input" placeholder="Ваша почта" value="" /><a class="stream-wood-generator-cancel-btn" href="javascript:void(0);" onclick="return false">Нет, спасибо</a></div><div class="sw-error sw-email-error" style="display: none;"></div></div><div class="stream-wood-generator-rekl-note"></div><div class="stream-wood-generator-copyright">Работает на <a target="_blank" href="https://streamwood.ru">StreamWood</a></div></div></div></div>',registrator:function(){var t=e.fn.SWD;return'<svg xmlns="https://www.w3.org/2000/svg" display="none" style="display:none;"><symbol id="name" viewBox="0 0 50 50"><path style="fill: currentColor;" d="M30.933,32.528c-0.146-1.612-0.09-2.737-0.09-4.21c0.73-0.383,2.038-2.825,2.259-4.888c0.574-0.047,1.479-0.607,1.744-2.818  c0.143-1.187-0.425-1.855-0.771-2.065c0.934-2.809,2.874-11.499-3.588-12.397c-0.665-1.168-2.368-1.759-4.581-1.759  c-8.854,0.163-9.922,6.686-7.981,14.156c-0.345,0.21-0.913,0.878-0.771,2.065c0.266,2.211,1.17,2.771,1.744,2.818  c0.22,2.062,1.58,4.505,2.312,4.888c0,1.473,0.055,2.598-0.091,4.21C19.367,37.238,7.546,35.916,7,45h38  C44.455,35.916,32.685,37.238,30.933,32.528z"/></symbol><symbol id="phone" viewBox="0 0 42.5 42.5"><path style="fill: currentColor;" d="M42.4,33.1c-0.1-0.4-0.9-0.9-2.3-1.6c-0.4-0.2-0.9-0.5-1.6-0.9s-1.3-0.7-1.9-1.1c-0.6-0.3-1.1-0.6-1.6-0.9c-0.1-0.1-0.3-0.2-0.8-0.5c-0.4-0.3-0.8-0.5-1.1-0.6s-0.6-0.2-0.9-0.2c-0.4,0-0.9,0.3-1.5,0.9s-1.2,1.2-1.7,1.9c-0.5,0.7-1,1.3-1.6,1.9c-0.6,0.6-1,0.9-1.4,0.9c-0.2,0-0.4-0.1-0.7-0.1c-0.3-0.1-0.5-0.2-0.6-0.3s-0.4-0.2-0.7-0.4c-0.3-0.2-0.5-0.3-0.6-0.3c-2.8-1.5-5.1-3.3-7.1-5.3s-3.7-4.3-5.3-7.1c0,0-0.1-0.2-0.3-0.6c-0.2-0.3-0.4-0.6-0.4-0.7c-0.1-0.1-0.2-0.3-0.3-0.6c0-0.5,0-0.7,0-0.9c0-0.4,0.3-0.8,0.9-1.4c0.6-0.6,1.2-1.1,1.9-1.6s1.3-1.1,1.9-1.7c0.6-0.6,0.9-1.1,0.9-1.5c0-0.3-0.1-0.6-0.2-0.9C15.3,9,15,8.7,14.8,8.2c-0.3-0.4-0.5-0.7-0.5-0.8c-0.3-0.5-0.6-1-0.9-1.6c-0.3-0.6-0.7-1.2-1.1-1.9c-0.4-0.7-0.7-1.2-0.9-1.6C10.5,1,9.9,0.2,9.6,0.1C9.4,0,9.2,0,8.9,0C8.4,0,7.7,0.1,6.8,0.3S5.2,0.7,4.7,0.9c-1,0.4-2.1,1.7-3.2,3.7C0.5,6.5,0,8.4,0,10.2c0,0.5,0,1.1,0.1,1.6s0.2,1.1,0.4,1.7c0.2,0.6,0.3,1.1,0.4,1.4c0.1,0.3,0.3,0.9,0.6,1.7c0.3,0.9,0.5,1.4,0.6,1.5c0.7,2,1.5,3.7,2.5,5.3c1.6,2.6,3.8,5.2,6.5,8c2.7,2.7,5.4,4.9,8,6.5c1.5,1,3.3,1.8,5.3,2.5c0.2,0.1,0.7,0.2,1.5,0.5c0.8,0.3,1.4,0.5,1.7,0.6c0.3,0.1,0.8,0.3,1.4,0.4c0.6,0.2,1.2,0.3,1.7,0.4c0.5,0.1,1,0.1,1.6,0.1c1.9,0,3.7-0.5,5.6-1.5c2-1.1,3.3-2.2,3.7-3.2c0.2-0.5,0.4-1.2,0.6-2.1c0.2-0.9,0.3-1.6,0.3-2.1C42.5,33.5,42.5,33.3,42.4,33.1z"/></symbol><symbol id="email" viewBox="0 0 42.5 28.3"><path style="fill: currentColor;" d="M21.3,18L1.7,0h38.9L21.3,18L21.3,18z M0,26.7V1.4l13.5,12.7L0,26.7z M1.7,28.3l13.5-12.7l6,5.5l6-5.5l13.3,12.7H1.7L1.7,28.3z M29,14L42.5,1.4v25.4L29,14z"/></symbol></svg><div class="stream-wood-registrator" style="display: none;"><a class="stream-wood-registrator-close stream-wood-registrator-close-30" href="javascript:void(0);"></a><div class="stream-wood-registrator-header"><div class="stream-wood-registrator-title-container"><div class="stream-wood-registrator-title">Запись на тест-драйв</div></div></div><div class="stream-wood-registrator-body"><form class="stream-wood-registrator-form"><div class="stream-wood-registrator-fields"><div class="stream-wood-registrator-custom-fields"></div><div class="strmwd-field-group registrator-input-department" style="display: none;"><select class="sw-reg-department"><option value="">'+t.languages[t.language].swChangeDepText+"</option>"+t.settings.registratorDepartments.map(function(e){return'<option value="'+e.id+'">'+e.name+"</option>"}).join("")+'</select></div><div class="sw-error sw-department-error"></div><div class="strmwd-field-group strmwd-input-date"><div class="strmwd-slash"></div><input class="strmwd-textfield sw-datepicker-here sw-reg-date" data-timepicker="true" id="date_widget" name="date" type="text" placeholder="Желаемая дата и время"></div><div class="strmwd-field-group strmwd-input-phone"><svg class="strmwd-icon strmwd-icon-phone-mini"><use xlink:href="#phone"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-phone" type="phone" value="+'+t.settings.phonePrefix+'"></div><div class="sw-error sw-phone-error"></div><div class="stream-wood-sms-block"><div class="stream-wood-sms-block-input"><input class="strmwd-textfield sw-sms-block-input" name="sms_code" type="text" placeholder="Код из СМС"></div><div class="stream-wood-sms-block-btn"><div class="sw-sms-block-btn">Отправить смс</div></div></div><div class="sw-error sw-sms-block-error"></div><div class="strmwd-field-delimiter-text strmwd-phone-or-email" style="display: none">или</div><div class="strmwd-field-group strmwd-input-email"><svg class="strmwd-icon strmwd-icon-email-mini"><use xlink:href="#email"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-email" name="email" type="text" placeholder="Ваша почта"></div><div class="sw-error sw-email-error"></div><div class="strmwd-field-group strmwd-input-name"><svg class="strmwd-icon strmwd-icon-name-mini"><use xlink:href="#name"></use></svg><div class="strmwd-slash"></div><input class="strmwd-textfield sw-reg-name" name="name" type="text" placeholder="Ваше имя"></div><div class="sw-error sw-name-error"></div></div><div class="stream-wood-registrator-actions"><button class="stream-wood-registrator-action-button">Отправить</button></div></form><div class="stream-wood-registrator-success" style="display: none"></div></div><div class="stream-wood-registrator-footer"><div class="stream-wood-registrator-copyright">Работает на <a class="stream-wood-registrator-copyright-a" href="https://streamwood.ru/" target="_blank">Streamwood</a></div></div></div>'},registrator_custom_field_select:function(e,t){if(!Array.isArray(t))return"";var n="",i=t.length>2;return t.forEach(function(e,t){n+='<option value="'+s(i&&0===t?"":e)+'">'+s(e)+"</option>"}),'<div class="strmwd-field-group registrator-custom-field"><select class="strmwd-select" name="custom_field['+e+']_origin">'+n+"</select></div>"},registrator_custom_field_input:function(e,t){return'<div class="strmwd-field-group registrator-custom-field"><input type="text" placeholder="'+t+'" class="strmwd-textfield" name="custom_field['+e+']_origin"></div>'},recall_btn:'<div class="stream-wood-recall-btn"><div class="sw-call-rad"></div><div class="sw-call-rid"></div><div class="sw-call-img"></div><div class="sw-call-tail"></div></div>',personal_data:function(t,s){t||(t="https://streamwood.ru/policy/");var n="";if(t.startsWith("http")){n='Я согласен на обработку <a href="'+t+'" target="_blank" class="streamwood-personal-data-toggle">персональных данных</a>'}else n=t;var i=e('<div class="streamwood-personal-data"><div class="streamwood-personal-notice-wrapper"><input name="personal_data" type="checkbox" '+(s?'checked="checked"':"")+'/><label class="streamwood-checkbox"></label><label class="streamwood-personal-notice">'+n+"</label></div></div>");return i.find("label").on("click",function(){var t=e(this).parent().find("input[type=checkbox]");t.prop("checked",!t.prop("checked"))}),i},advertising_agree:function(t,s,n){n&&n.length>0||(n="");var i="";i=t&&t.length>0?'<a href="javascript:void(0);" target="_blank" class="streamwood-personal-data-toggle">'+(n.length?n:"на рекламную коммуникацию")+"</a>":n.length?n:"на рекламную коммуникацию";var o=e('<div class="streamwood-personal-data"><div class="streamwood-personal-notice-wrapper"><input name="advertising_agree" type="checkbox" '+(s?'checked="checked"':"")+'/><label class="streamwood-checkbox"></label><label class="streamwood-personal-notice">Я согласен '+i+"</label></div></div>");return o.find("label").on("click",function(){var t=e(this).parent().find("input[type=checkbox]");t.prop("checked",!t.prop("checked"))}),t&&t.length>0&&o.find("a").attr("href",t),o},dark_cover_all:'<div class="dark-cover-all"></div>',webpush_modal:'<div class="webpush-wrap"><a class="stream-wood-webpush-close" href="javascript:void(0);"></a><div class="img-wrap"></div><h2>Подписка на уведомления</h2><p>Разрешите этому сайту отправлять Вам уведомления на рабочий стол</p><button>Разрешить</button><div class="copyright"><a href="https://streamwood.ru" target="_blank" style="color: black;"><span>Работает на </span><i class="logo"></i> <b>Streamwood</b></a></div></div>',webpush_top:'<div class="webpush-wrap top"><a class="stream-wood-webpush-close" href="javascript:void(0);"></a><div class="img-wrap"></div><h2>Подписка на уведомления</h2><p>Разрешите этому сайту отправлять Вам уведомления на рабочий стол</p><button>Разрешить</button><div class="copyright"><a href="https://streamwood.ru" target="_blank" style="color: black;"><span>Работает на </span><i class="logo"></i> <b>Streamwood</b></a></div></div>',unibutton:'<a href="javascript:void(0);" class="streamwood-unibutton" target="_blank" ><div>Спец. предложение </div><span class="streamwood-unibutton-close"></span></a>',multibutton:'<div class="stream-wood-multibutton-container"><div class="stream-wood-multibutton"><div class="stream-wood-multibutton-menu-close" style="display: none"><i class="stream-wood-multibutton-icon-close"></i></div></div><button class="stream-wood-multibutton-hide" title="Скрыть кнопку"><i class="stream-wood-multibutton-icon-hide"></i></button></div>',multibutton_item:function(t){var s="",n=-1!==["link","telegram","viber","whatsapp","instagram","vk","skype"].indexOf(t.action)?"a":"button";s+="a"===n?'<a href="#" ':"<div ",s+='class="stream-wood-multibutton-menu-item"><span class="stream-wood-multibutton-menu-icon"><i></i></span><span class="stream-wood-multibutton-menu-item-title"></span>';var i,o=e(s+="a"===n?"</a>":"</div>"),r=-1!==t.image.indexOf("http://")||-1!==t.image.indexOf("https://");if(r?r&&o.find(".stream-wood-multibutton-menu-icon").addClass("stream-wood-multibutton-menu-icon--custom").children().css("backgroundImage","url("+t.image+")"):i="stream-wood-multibutton-icon-"+t.image,t.action&&o.attr("data-action",t.action),t.src&&o.attr("data-src",t.src),t.link_this_window&&o.attr("data-link-this-window",t.link_this_window),o.find(".stream-wood-multibutton-menu-item-title").html(t.title).end().find(".stream-wood-multibutton-menu-icon i").addClass(i),1==t.v2){var a='<span class="stream-wood-multibutton-menu-item-arrow"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.59009 16.58L13.1701 12L8.59009 7.41L10.0001 6L16.0001 12L10.0001 18L8.59009 16.58Z" fill="'+t.ver2_font_color+'"/></svg></span>';o.find(".stream-wood-multibutton-menu-item-title").after(a),o.attr("data-ver","v2")}else t["icon-color"]&&o.find(".stream-wood-multibutton-menu-icon").css("backgroundColor",t["icon-color"]);return o.get()[0].outerHTML},multibutton_frame:'<div class="stream-wood-multibutton-frame" style="display:none"></div>',multibutton_menu:'<div class="stream-wood-multibutton-menu"></div>',multiv2:'<div class="stream_wood_multiv2_container js-stream-wood-multiv2-container"><div class="stream_wood_multibutton_drag_header js-stream-wood-multiv2-accordion"><div class="stream_wood_multibutton_drag_line"></div></div><div class="stream_wood_multibutton_menu_block js-stream-wood-multiv2-menu-block" id="js-stream-wood-multiv2-menu-block"></div><div class="stream_wood_multibutton_header"><div class="stream_wood_multibutton_header_flex_block"><div class="stream_wood_multibutton_header_text_block stream_wood_multibutton_header_padd js-stream-wood-multiv2-accordion"><div class="stream_wood_multibutton_header_text_item js-stream-wood-multiv2-text-item"></div></div><div class="stream_wood_multibutton_header_close_block stream_wood_multibutton_header_padd js-stream-wood-multiv2-close"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="white"/></svg></div></div></div></div>'};if(window.hasOwnProperty("g_swKey")&&window.hasOwnProperty("g_swDomainKey"))return window.swQ.fn.SW({swKey:window.g_swKey,swDomainKey:window.g_swDomainKey});var r=function(){try{this.hasLocalStorage="localStorage"in window&&null!==window.localStorage}catch(e){this.hasLocalStorage=!1}};r.prototype={localStoreSupport:function(){return this.hasLocalStorage},set:function(e,t){if(this.localStoreSupport())localStorage.setItem(e,t);else{document.cookie=e+"="+t+"; path=/; secure"}},get:function(e){if(this.localStoreSupport())return this.boolcast(localStorage.getItem(e));var t="(?:; )?"+e+"=([^;]*);?",s=!1;return new RegExp(t).test(document.cookie)?(s=decodeURIComponent(RegExp.$1),this.boolcast(s)):null},delete:function(e){this.localStoreSupport()?localStorage.removeItem(e):this.set(e,"",-1)},boolcast:function(e){return"true"===e||"false"!==e&&e}}}(swQ);